(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function df(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lc={exports:{}},Zi={},Ac={exports:{}},z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zr=Symbol.for("react.element"),ff=Symbol.for("react.portal"),hf=Symbol.for("react.fragment"),gf=Symbol.for("react.strict_mode"),pf=Symbol.for("react.profiler"),mf=Symbol.for("react.provider"),_f=Symbol.for("react.context"),vf=Symbol.for("react.forward_ref"),wf=Symbol.for("react.suspense"),yf=Symbol.for("react.memo"),Sf=Symbol.for("react.lazy"),dl=Symbol.iterator;function kf(t){return t===null||typeof t!="object"?null:(t=dl&&t[dl]||t["@@iterator"],typeof t=="function"?t:null)}var Uc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mc=Object.assign,jc={};function Qn(t,e,n){this.props=t,this.context=e,this.refs=jc,this.updater=n||Uc}Qn.prototype.isReactComponent={};Qn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Oc(){}Oc.prototype=Qn.prototype;function Jo(t,e,n){this.props=t,this.context=e,this.refs=jc,this.updater=n||Uc}var Go=Jo.prototype=new Oc;Go.constructor=Jo;Mc(Go,Qn.prototype);Go.isPureReactComponent=!0;var fl=Array.isArray,zc=Object.prototype.hasOwnProperty,Xo={current:null},$c={key:!0,ref:!0,__self:!0,__source:!0};function Fc(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)zc.call(e,r)&&!$c.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:zr,type:t,key:s,ref:o,props:i,_owner:Xo.current}}function Ef(t,e){return{$$typeof:zr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yo(t){return typeof t=="object"&&t!==null&&t.$$typeof===zr}function Cf(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hl=/\/+/g;function _s(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cf(""+t.key):e.toString(36)}function di(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zr:case ff:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+_s(o,0):r,fl(i)?(n="",t!=null&&(n=t.replace(hl,"$&/")+"/"),di(i,e,n,"",function(c){return c})):i!=null&&(Yo(i)&&(i=Ef(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(hl,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",fl(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+_s(s,a);o+=di(s,e,n,l,i)}else if(l=kf(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+_s(s,a++),o+=di(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qr(t,e,n){if(t==null)return t;var r=[],i=0;return di(t,r,"","",function(s){return e.call(n,s,i++)}),r}function xf(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Te={current:null},fi={transition:null},If={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:fi,ReactCurrentOwner:Xo};function Hc(){throw Error("act(...) is not supported in production builds of React.")}z.Children={map:qr,forEach:function(t,e,n){qr(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qr(t,function(){e++}),e},toArray:function(t){return qr(t,function(e){return e})||[]},only:function(t){if(!Yo(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};z.Component=Qn;z.Fragment=hf;z.Profiler=pf;z.PureComponent=Jo;z.StrictMode=gf;z.Suspense=wf;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=If;z.act=Hc;z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Mc({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Xo.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)zc.call(e,l)&&!$c.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:zr,type:t.type,key:i,ref:s,props:r,_owner:o}};z.createContext=function(t){return t={$$typeof:_f,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mf,_context:t},t.Consumer=t};z.createElement=Fc;z.createFactory=function(t){var e=Fc.bind(null,t);return e.type=t,e};z.createRef=function(){return{current:null}};z.forwardRef=function(t){return{$$typeof:vf,render:t}};z.isValidElement=Yo;z.lazy=function(t){return{$$typeof:Sf,_payload:{_status:-1,_result:t},_init:xf}};z.memo=function(t,e){return{$$typeof:yf,type:t,compare:e===void 0?null:e}};z.startTransition=function(t){var e=fi.transition;fi.transition={};try{t()}finally{fi.transition=e}};z.unstable_act=Hc;z.useCallback=function(t,e){return Te.current.useCallback(t,e)};z.useContext=function(t){return Te.current.useContext(t)};z.useDebugValue=function(){};z.useDeferredValue=function(t){return Te.current.useDeferredValue(t)};z.useEffect=function(t,e){return Te.current.useEffect(t,e)};z.useId=function(){return Te.current.useId()};z.useImperativeHandle=function(t,e,n){return Te.current.useImperativeHandle(t,e,n)};z.useInsertionEffect=function(t,e){return Te.current.useInsertionEffect(t,e)};z.useLayoutEffect=function(t,e){return Te.current.useLayoutEffect(t,e)};z.useMemo=function(t,e){return Te.current.useMemo(t,e)};z.useReducer=function(t,e,n){return Te.current.useReducer(t,e,n)};z.useRef=function(t){return Te.current.useRef(t)};z.useState=function(t){return Te.current.useState(t)};z.useSyncExternalStore=function(t,e,n){return Te.current.useSyncExternalStore(t,e,n)};z.useTransition=function(){return Te.current.useTransition()};z.version="18.3.1";Ac.exports=z;var D=Ac.exports;const N=df(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf=D,Pf=Symbol.for("react.element"),Rf=Symbol.for("react.fragment"),Nf=Object.prototype.hasOwnProperty,bf=Tf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Df={key:!0,ref:!0,__self:!0,__source:!0};function Wc(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Nf.call(e,r)&&!Df.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Pf,type:t,key:s,ref:o,props:i,_owner:bf.current}}Zi.Fragment=Rf;Zi.jsx=Wc;Zi.jsxs=Wc;Lc.exports=Zi;var _=Lc.exports,Bc={exports:{}},Fe={},Vc={exports:{}},qc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,b){var U=P.length;P.push(b);e:for(;0<U;){var w=U-1>>>1,M=P[w];if(0<i(M,b))P[w]=b,P[U]=M,U=w;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var b=P[0],U=P.pop();if(U!==b){P[0]=U;e:for(var w=0,M=P.length,ee=M>>>1;w<ee;){var te=2*(w+1)-1,at=P[te],Ue=te+1,vt=P[Ue];if(0>i(at,U))Ue<M&&0>i(vt,at)?(P[w]=vt,P[Ue]=U,w=Ue):(P[w]=at,P[te]=U,w=te);else if(Ue<M&&0>i(vt,U))P[w]=vt,P[Ue]=U,w=Ue;else break e}}return b}function i(P,b){var U=P.sortIndex-b.sortIndex;return U!==0?U:P.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,g=null,f=3,m=!1,S=!1,k=!1,j=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(P){for(var b=n(c);b!==null;){if(b.callback===null)r(c);else if(b.startTime<=P)r(c),b.sortIndex=b.expirationTime,e(l,b);else break;b=n(c)}}function y(P){if(k=!1,p(P),!S)if(n(l)!==null)S=!0,ot(x);else{var b=n(c);b!==null&&Zt(y,b.startTime-P)}}function x(P,b){S=!1,k&&(k=!1,h(I),I=-1),m=!0;var U=f;try{for(p(b),g=n(l);g!==null&&(!(g.expirationTime>b)||P&&!le());){var w=g.callback;if(typeof w=="function"){g.callback=null,f=g.priorityLevel;var M=w(g.expirationTime<=b);b=t.unstable_now(),typeof M=="function"?g.callback=M:g===n(l)&&r(l),p(b)}else r(l);g=n(l)}if(g!==null)var ee=!0;else{var te=n(c);te!==null&&Zt(y,te.startTime-b),ee=!1}return ee}finally{g=null,f=U,m=!1}}var C=!1,T=null,I=-1,$=5,L=-1;function le(){return!(t.unstable_now()-L<$)}function Ee(){if(T!==null){var P=t.unstable_now();L=P;var b=!0;try{b=T(!0,P)}finally{b?_t():(C=!1,T=null)}}else C=!1}var _t;if(typeof u=="function")_t=function(){u(Ee)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,wn=Ge.port2;Ge.port1.onmessage=Ee,_t=function(){wn.postMessage(null)}}else _t=function(){j(Ee,0)};function ot(P){T=P,C||(C=!0,_t())}function Zt(P,b){I=j(function(){P(t.unstable_now())},b)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){S||m||(S=!0,ot(x))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var b=3;break;default:b=f}var U=f;f=b;try{return P()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,b){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var U=f;f=P;try{return b()}finally{f=U}},t.unstable_scheduleCallback=function(P,b,U){var w=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?w+U:w):U=w,P){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=U+M,P={id:d++,callback:b,priorityLevel:P,startTime:U,expirationTime:M,sortIndex:-1},U>w?(P.sortIndex=U,e(c,P),n(l)===null&&P===n(c)&&(k?(h(I),I=-1):k=!0,Zt(y,U-w))):(P.sortIndex=M,e(l,P),S||m||(S=!0,ot(x))),P},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(P){var b=f;return function(){var U=f;f=b;try{return P.apply(this,arguments)}finally{f=U}}}})(qc);Vc.exports=qc;var Lf=Vc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af=D,$e=Lf;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kc=new Set,wr={};function _n(t,e){zn(t,e),zn(t+"Capture",e)}function zn(t,e){for(wr[t]=e,t=0;t<e.length;t++)Kc.add(e[t])}var xt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Js=Object.prototype.hasOwnProperty,Uf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gl={},pl={};function Mf(t){return Js.call(pl,t)?!0:Js.call(gl,t)?!1:Uf.test(t)?pl[t]=!0:(gl[t]=!0,!1)}function jf(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Of(t,e,n,r){if(e===null||typeof e>"u"||jf(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pe(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){me[t]=new Pe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];me[e]=new Pe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){me[t]=new Pe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){me[t]=new Pe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){me[t]=new Pe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){me[t]=new Pe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){me[t]=new Pe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){me[t]=new Pe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){me[t]=new Pe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zo=/[\-:]([a-z])/g;function ea(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zo,ea);me[e]=new Pe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zo,ea);me[e]=new Pe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zo,ea);me[e]=new Pe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){me[t]=new Pe(t,1,!1,t.toLowerCase(),null,!1,!1)});me.xlinkHref=new Pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){me[t]=new Pe(t,1,!1,t.toLowerCase(),null,!0,!0)});function ta(t,e,n,r){var i=me.hasOwnProperty(e)?me[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Of(e,n,i,r)&&(n=null),r||i===null?Mf(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Nt=Af.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kr=Symbol.for("react.element"),Sn=Symbol.for("react.portal"),kn=Symbol.for("react.fragment"),na=Symbol.for("react.strict_mode"),Gs=Symbol.for("react.profiler"),Qc=Symbol.for("react.provider"),Jc=Symbol.for("react.context"),ra=Symbol.for("react.forward_ref"),Xs=Symbol.for("react.suspense"),Ys=Symbol.for("react.suspense_list"),ia=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),Gc=Symbol.for("react.offscreen"),ml=Symbol.iterator;function Xn(t){return t===null||typeof t!="object"?null:(t=ml&&t[ml]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Object.assign,vs;function sr(t){if(vs===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vs=e&&e[1]||""}return`
`+vs+t}var ws=!1;function ys(t,e){if(!t||ws)return"";ws=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ws=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sr(t):""}function zf(t){switch(t.tag){case 5:return sr(t.type);case 16:return sr("Lazy");case 13:return sr("Suspense");case 19:return sr("SuspenseList");case 0:case 2:case 15:return t=ys(t.type,!1),t;case 11:return t=ys(t.type.render,!1),t;case 1:return t=ys(t.type,!0),t;default:return""}}function Zs(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kn:return"Fragment";case Sn:return"Portal";case Gs:return"Profiler";case na:return"StrictMode";case Xs:return"Suspense";case Ys:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jc:return(t.displayName||"Context")+".Consumer";case Qc:return(t._context.displayName||"Context")+".Provider";case ra:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ia:return e=t.displayName||null,e!==null?e:Zs(t.type)||"Memo";case Lt:e=t._payload,t=t._init;try{return Zs(t(e))}catch{}}return null}function $f(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zs(e);case 8:return e===na?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xc(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ff(t){var e=Xc(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qr(t){t._valueTracker||(t._valueTracker=Ff(t))}function Yc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Xc(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ci(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eo(t,e){var n=e.checked;return Z({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _l(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qt(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Zc(t,e){e=e.checked,e!=null&&ta(t,"checked",e,!1)}function to(t,e){Zc(t,e);var n=Qt(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?no(t,e.type,n):e.hasOwnProperty("defaultValue")&&no(t,e.type,Qt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vl(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function no(t,e,n){(e!=="number"||Ci(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var or=Array.isArray;function Ln(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ro(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return Z({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wl(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(or(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qt(n)}}function eu(t,e){var n=Qt(e.value),r=Qt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function yl(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tu(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function io(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tu(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jr,nu=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jr=Jr||document.createElement("div"),Jr.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hf=["Webkit","ms","Moz","O"];Object.keys(ur).forEach(function(t){Hf.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ur[e]=ur[t]})});function ru(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ur.hasOwnProperty(t)&&ur[t]?(""+e).trim():e+"px"}function iu(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ru(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Wf=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function so(t,e){if(e){if(Wf[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function oo(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ao=null;function sa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lo=null,An=null,Un=null;function Sl(t){if(t=Hr(t)){if(typeof lo!="function")throw Error(E(280));var e=t.stateNode;e&&(e=is(e),lo(t.stateNode,t.type,e))}}function su(t){An?Un?Un.push(t):Un=[t]:An=t}function ou(){if(An){var t=An,e=Un;if(Un=An=null,Sl(t),e)for(t=0;t<e.length;t++)Sl(e[t])}}function au(t,e){return t(e)}function lu(){}var Ss=!1;function cu(t,e,n){if(Ss)return t(e,n);Ss=!0;try{return au(t,e,n)}finally{Ss=!1,(An!==null||Un!==null)&&(lu(),ou())}}function Sr(t,e){var n=t.stateNode;if(n===null)return null;var r=is(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var co=!1;if(xt)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){co=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{co=!1}function Bf(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var dr=!1,xi=null,Ii=!1,uo=null,Vf={onError:function(t){dr=!0,xi=t}};function qf(t,e,n,r,i,s,o,a,l){dr=!1,xi=null,Bf.apply(Vf,arguments)}function Kf(t,e,n,r,i,s,o,a,l){if(qf.apply(this,arguments),dr){if(dr){var c=xi;dr=!1,xi=null}else throw Error(E(198));Ii||(Ii=!0,uo=c)}}function vn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function uu(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kl(t){if(vn(t)!==t)throw Error(E(188))}function Qf(t){var e=t.alternate;if(!e){if(e=vn(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return kl(i),t;if(s===r)return kl(i),e;s=s.sibling}throw Error(E(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function du(t){return t=Qf(t),t!==null?fu(t):null}function fu(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fu(t);if(e!==null)return e;t=t.sibling}return null}var hu=$e.unstable_scheduleCallback,El=$e.unstable_cancelCallback,Jf=$e.unstable_shouldYield,Gf=$e.unstable_requestPaint,ie=$e.unstable_now,Xf=$e.unstable_getCurrentPriorityLevel,oa=$e.unstable_ImmediatePriority,gu=$e.unstable_UserBlockingPriority,Ti=$e.unstable_NormalPriority,Yf=$e.unstable_LowPriority,pu=$e.unstable_IdlePriority,es=null,pt=null;function Zf(t){if(pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(es,t,void 0,(t.current.flags&128)===128)}catch{}}var rt=Math.clz32?Math.clz32:nh,eh=Math.log,th=Math.LN2;function nh(t){return t>>>=0,t===0?32:31-(eh(t)/th|0)|0}var Gr=64,Xr=4194304;function ar(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ar(a):(s&=o,s!==0&&(r=ar(s)))}else o=n&~i,o!==0?r=ar(o):s!==0&&(r=ar(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rt(e),i=1<<n,r|=t[n],e&=~i;return r}function rh(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ih(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-rt(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=rh(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function fo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mu(){var t=Gr;return Gr<<=1,!(Gr&4194240)&&(Gr=64),t}function ks(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $r(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rt(e),t[e]=n}function sh(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function aa(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var B=0;function _u(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var vu,la,wu,yu,Su,ho=!1,Yr=[],$t=null,Ft=null,Ht=null,kr=new Map,Er=new Map,Mt=[],oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cl(t,e){switch(t){case"focusin":case"focusout":$t=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":Ht=null;break;case"pointerover":case"pointerout":kr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(e.pointerId)}}function Zn(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Hr(e),e!==null&&la(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ah(t,e,n,r,i){switch(e){case"focusin":return $t=Zn($t,t,e,n,r,i),!0;case"dragenter":return Ft=Zn(Ft,t,e,n,r,i),!0;case"mouseover":return Ht=Zn(Ht,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return kr.set(s,Zn(kr.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Er.set(s,Zn(Er.get(s)||null,t,e,n,r,i)),!0}return!1}function ku(t){var e=nn(t.target);if(e!==null){var n=vn(e);if(n!==null){if(e=n.tag,e===13){if(e=uu(n),e!==null){t.blockedOn=e,Su(t.priority,function(){wu(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=go(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ao=r,n.target.dispatchEvent(r),ao=null}else return e=Hr(n),e!==null&&la(e),t.blockedOn=n,!1;e.shift()}return!0}function xl(t,e,n){hi(t)&&n.delete(e)}function lh(){ho=!1,$t!==null&&hi($t)&&($t=null),Ft!==null&&hi(Ft)&&(Ft=null),Ht!==null&&hi(Ht)&&(Ht=null),kr.forEach(xl),Er.forEach(xl)}function er(t,e){t.blockedOn===e&&(t.blockedOn=null,ho||(ho=!0,$e.unstable_scheduleCallback($e.unstable_NormalPriority,lh)))}function Cr(t){function e(i){return er(i,t)}if(0<Yr.length){er(Yr[0],t);for(var n=1;n<Yr.length;n++){var r=Yr[n];r.blockedOn===t&&(r.blockedOn=null)}}for($t!==null&&er($t,t),Ft!==null&&er(Ft,t),Ht!==null&&er(Ht,t),kr.forEach(e),Er.forEach(e),n=0;n<Mt.length;n++)r=Mt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mt.length&&(n=Mt[0],n.blockedOn===null);)ku(n),n.blockedOn===null&&Mt.shift()}var Mn=Nt.ReactCurrentBatchConfig,Ri=!0;function ch(t,e,n,r){var i=B,s=Mn.transition;Mn.transition=null;try{B=1,ca(t,e,n,r)}finally{B=i,Mn.transition=s}}function uh(t,e,n,r){var i=B,s=Mn.transition;Mn.transition=null;try{B=4,ca(t,e,n,r)}finally{B=i,Mn.transition=s}}function ca(t,e,n,r){if(Ri){var i=go(t,e,n,r);if(i===null)Ds(t,e,r,Ni,n),Cl(t,r);else if(ah(i,t,e,n,r))r.stopPropagation();else if(Cl(t,r),e&4&&-1<oh.indexOf(t)){for(;i!==null;){var s=Hr(i);if(s!==null&&vu(s),s=go(t,e,n,r),s===null&&Ds(t,e,r,Ni,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ds(t,e,r,null,n)}}var Ni=null;function go(t,e,n,r){if(Ni=null,t=sa(r),t=nn(t),t!==null)if(e=vn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=uu(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ni=t,null}function Eu(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xf()){case oa:return 1;case gu:return 4;case Ti:case Yf:return 16;case pu:return 536870912;default:return 16}default:return 16}}var Ot=null,ua=null,gi=null;function Cu(){if(gi)return gi;var t,e=ua,n=e.length,r,i="value"in Ot?Ot.value:Ot.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return gi=i.slice(t,1<r?1-r:void 0)}function pi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zr(){return!0}function Il(){return!1}function He(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zr:Il,this.isPropagationStopped=Il,this}return Z(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zr)},persist:function(){},isPersistent:Zr}),e}var Jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=He(Jn),Fr=Z({},Jn,{view:0,detail:0}),dh=He(Fr),Es,Cs,tr,ts=Z({},Fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==tr&&(tr&&t.type==="mousemove"?(Es=t.screenX-tr.screenX,Cs=t.screenY-tr.screenY):Cs=Es=0,tr=t),Es)},movementY:function(t){return"movementY"in t?t.movementY:Cs}}),Tl=He(ts),fh=Z({},ts,{dataTransfer:0}),hh=He(fh),gh=Z({},Fr,{relatedTarget:0}),xs=He(gh),ph=Z({},Jn,{animationName:0,elapsedTime:0,pseudoElement:0}),mh=He(ph),_h=Z({},Jn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vh=He(_h),wh=Z({},Jn,{data:0}),Pl=He(wh),yh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eh(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kh[t])?!!e[t]:!1}function fa(){return Eh}var Ch=Z({},Fr,{key:function(t){if(t.key){var e=yh[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Sh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fa,charCode:function(t){return t.type==="keypress"?pi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xh=He(Ch),Ih=Z({},ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rl=He(Ih),Th=Z({},Fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fa}),Ph=He(Th),Rh=Z({},Jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nh=He(Rh),bh=Z({},ts,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dh=He(bh),Lh=[9,13,27,32],ha=xt&&"CompositionEvent"in window,fr=null;xt&&"documentMode"in document&&(fr=document.documentMode);var Ah=xt&&"TextEvent"in window&&!fr,xu=xt&&(!ha||fr&&8<fr&&11>=fr),Nl=" ",bl=!1;function Iu(t,e){switch(t){case"keyup":return Lh.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var En=!1;function Uh(t,e){switch(t){case"compositionend":return Tu(e);case"keypress":return e.which!==32?null:(bl=!0,Nl);case"textInput":return t=e.data,t===Nl&&bl?null:t;default:return null}}function Mh(t,e){if(En)return t==="compositionend"||!ha&&Iu(t,e)?(t=Cu(),gi=ua=Ot=null,En=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xu&&e.locale!=="ko"?null:e.data;default:return null}}var jh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jh[t.type]:e==="textarea"}function Pu(t,e,n,r){su(r),e=bi(e,"onChange"),0<e.length&&(n=new da("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hr=null,xr=null;function Oh(t){zu(t,0)}function ns(t){var e=In(t);if(Yc(e))return t}function zh(t,e){if(t==="change")return e}var Ru=!1;if(xt){var Is;if(xt){var Ts="oninput"in document;if(!Ts){var Ll=document.createElement("div");Ll.setAttribute("oninput","return;"),Ts=typeof Ll.oninput=="function"}Is=Ts}else Is=!1;Ru=Is&&(!document.documentMode||9<document.documentMode)}function Al(){hr&&(hr.detachEvent("onpropertychange",Nu),xr=hr=null)}function Nu(t){if(t.propertyName==="value"&&ns(xr)){var e=[];Pu(e,xr,t,sa(t)),cu(Oh,e)}}function $h(t,e,n){t==="focusin"?(Al(),hr=e,xr=n,hr.attachEvent("onpropertychange",Nu)):t==="focusout"&&Al()}function Fh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ns(xr)}function Hh(t,e){if(t==="click")return ns(e)}function Wh(t,e){if(t==="input"||t==="change")return ns(e)}function Bh(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var st=typeof Object.is=="function"?Object.is:Bh;function Ir(t,e){if(st(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Js.call(e,i)||!st(t[i],e[i]))return!1}return!0}function Ul(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ml(t,e){var n=Ul(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ul(n)}}function bu(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bu(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Du(){for(var t=window,e=Ci();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ci(t.document)}return e}function ga(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Vh(t){var e=Du(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bu(n.ownerDocument.documentElement,n)){if(r!==null&&ga(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ml(n,s);var o=Ml(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qh=xt&&"documentMode"in document&&11>=document.documentMode,Cn=null,po=null,gr=null,mo=!1;function jl(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mo||Cn==null||Cn!==Ci(r)||(r=Cn,"selectionStart"in r&&ga(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gr&&Ir(gr,r)||(gr=r,r=bi(po,"onSelect"),0<r.length&&(e=new da("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Cn)))}function ei(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xn={animationend:ei("Animation","AnimationEnd"),animationiteration:ei("Animation","AnimationIteration"),animationstart:ei("Animation","AnimationStart"),transitionend:ei("Transition","TransitionEnd")},Ps={},Lu={};xt&&(Lu=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);function rs(t){if(Ps[t])return Ps[t];if(!xn[t])return t;var e=xn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Lu)return Ps[t]=e[n];return t}var Au=rs("animationend"),Uu=rs("animationiteration"),Mu=rs("animationstart"),ju=rs("transitionend"),Ou=new Map,Ol="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gt(t,e){Ou.set(t,e),_n(e,[t])}for(var Rs=0;Rs<Ol.length;Rs++){var Ns=Ol[Rs],Kh=Ns.toLowerCase(),Qh=Ns[0].toUpperCase()+Ns.slice(1);Gt(Kh,"on"+Qh)}Gt(Au,"onAnimationEnd");Gt(Uu,"onAnimationIteration");Gt(Mu,"onAnimationStart");Gt("dblclick","onDoubleClick");Gt("focusin","onFocus");Gt("focusout","onBlur");Gt(ju,"onTransitionEnd");zn("onMouseEnter",["mouseout","mouseover"]);zn("onMouseLeave",["mouseout","mouseover"]);zn("onPointerEnter",["pointerout","pointerover"]);zn("onPointerLeave",["pointerout","pointerover"]);_n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_n("onBeforeInput",["compositionend","keypress","textInput","paste"]);_n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jh=new Set("cancel close invalid load scroll toggle".split(" ").concat(lr));function zl(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Kf(r,e,void 0,t),t.currentTarget=null}function zu(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;zl(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;zl(i,a,c),s=l}}}if(Ii)throw t=uo,Ii=!1,uo=null,t}function q(t,e){var n=e[So];n===void 0&&(n=e[So]=new Set);var r=t+"__bubble";n.has(r)||($u(e,t,2,!1),n.add(r))}function bs(t,e,n){var r=0;e&&(r|=4),$u(n,t,r,e)}var ti="_reactListening"+Math.random().toString(36).slice(2);function Tr(t){if(!t[ti]){t[ti]=!0,Kc.forEach(function(n){n!=="selectionchange"&&(Jh.has(n)||bs(n,!1,t),bs(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ti]||(e[ti]=!0,bs("selectionchange",!1,e))}}function $u(t,e,n,r){switch(Eu(e)){case 1:var i=ch;break;case 4:i=uh;break;default:i=ca}n=i.bind(null,e,n,t),i=void 0,!co||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ds(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=nn(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}cu(function(){var c=s,d=sa(n),g=[];e:{var f=Ou.get(t);if(f!==void 0){var m=da,S=t;switch(t){case"keypress":if(pi(n)===0)break e;case"keydown":case"keyup":m=xh;break;case"focusin":S="focus",m=xs;break;case"focusout":S="blur",m=xs;break;case"beforeblur":case"afterblur":m=xs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=hh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Ph;break;case Au:case Uu:case Mu:m=mh;break;case ju:m=Nh;break;case"scroll":m=dh;break;case"wheel":m=Dh;break;case"copy":case"cut":case"paste":m=vh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Rl}var k=(e&4)!==0,j=!k&&t==="scroll",h=k?f!==null?f+"Capture":null:f;k=[];for(var u=c,p;u!==null;){p=u;var y=p.stateNode;if(p.tag===5&&y!==null&&(p=y,h!==null&&(y=Sr(u,h),y!=null&&k.push(Pr(u,y,p)))),j)break;u=u.return}0<k.length&&(f=new m(f,S,null,n,d),g.push({event:f,listeners:k}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==ao&&(S=n.relatedTarget||n.fromElement)&&(nn(S)||S[It]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(S=n.relatedTarget||n.toElement,m=c,S=S?nn(S):null,S!==null&&(j=vn(S),S!==j||S.tag!==5&&S.tag!==6)&&(S=null)):(m=null,S=c),m!==S)){if(k=Tl,y="onMouseLeave",h="onMouseEnter",u="mouse",(t==="pointerout"||t==="pointerover")&&(k=Rl,y="onPointerLeave",h="onPointerEnter",u="pointer"),j=m==null?f:In(m),p=S==null?f:In(S),f=new k(y,u+"leave",m,n,d),f.target=j,f.relatedTarget=p,y=null,nn(d)===c&&(k=new k(h,u+"enter",S,n,d),k.target=p,k.relatedTarget=j,y=k),j=y,m&&S)t:{for(k=m,h=S,u=0,p=k;p;p=yn(p))u++;for(p=0,y=h;y;y=yn(y))p++;for(;0<u-p;)k=yn(k),u--;for(;0<p-u;)h=yn(h),p--;for(;u--;){if(k===h||h!==null&&k===h.alternate)break t;k=yn(k),h=yn(h)}k=null}else k=null;m!==null&&$l(g,f,m,k,!1),S!==null&&j!==null&&$l(g,j,S,k,!0)}}e:{if(f=c?In(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var x=zh;else if(Dl(f))if(Ru)x=Wh;else{x=Fh;var C=$h}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=Hh);if(x&&(x=x(t,c))){Pu(g,x,n,d);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&no(f,"number",f.value)}switch(C=c?In(c):window,t){case"focusin":(Dl(C)||C.contentEditable==="true")&&(Cn=C,po=c,gr=null);break;case"focusout":gr=po=Cn=null;break;case"mousedown":mo=!0;break;case"contextmenu":case"mouseup":case"dragend":mo=!1,jl(g,n,d);break;case"selectionchange":if(qh)break;case"keydown":case"keyup":jl(g,n,d)}var T;if(ha)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else En?Iu(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(xu&&n.locale!=="ko"&&(En||I!=="onCompositionStart"?I==="onCompositionEnd"&&En&&(T=Cu()):(Ot=d,ua="value"in Ot?Ot.value:Ot.textContent,En=!0)),C=bi(c,I),0<C.length&&(I=new Pl(I,t,null,n,d),g.push({event:I,listeners:C}),T?I.data=T:(T=Tu(n),T!==null&&(I.data=T)))),(T=Ah?Uh(t,n):Mh(t,n))&&(c=bi(c,"onBeforeInput"),0<c.length&&(d=new Pl("onBeforeInput","beforeinput",null,n,d),g.push({event:d,listeners:c}),d.data=T))}zu(g,e)})}function Pr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bi(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sr(t,n),s!=null&&r.unshift(Pr(t,s,i)),s=Sr(t,e),s!=null&&r.push(Pr(t,s,i))),t=t.return}return r}function yn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $l(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Sr(n,s),l!=null&&o.unshift(Pr(n,l,a))):i||(l=Sr(n,s),l!=null&&o.push(Pr(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Gh=/\r\n?/g,Xh=/\u0000|\uFFFD/g;function Fl(t){return(typeof t=="string"?t:""+t).replace(Gh,`
`).replace(Xh,"")}function ni(t,e,n){if(e=Fl(e),Fl(t)!==e&&n)throw Error(E(425))}function Di(){}var _o=null,vo=null;function wo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yo=typeof setTimeout=="function"?setTimeout:void 0,Yh=typeof clearTimeout=="function"?clearTimeout:void 0,Hl=typeof Promise=="function"?Promise:void 0,Zh=typeof queueMicrotask=="function"?queueMicrotask:typeof Hl<"u"?function(t){return Hl.resolve(null).then(t).catch(eg)}:yo;function eg(t){setTimeout(function(){throw t})}function Ls(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Cr(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cr(e)}function Wt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wl(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gn=Math.random().toString(36).slice(2),gt="__reactFiber$"+Gn,Rr="__reactProps$"+Gn,It="__reactContainer$"+Gn,So="__reactEvents$"+Gn,tg="__reactListeners$"+Gn,ng="__reactHandles$"+Gn;function nn(t){var e=t[gt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[It]||n[gt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wl(t);t!==null;){if(n=t[gt])return n;t=Wl(t)}return e}t=n,n=t.parentNode}return null}function Hr(t){return t=t[gt]||t[It],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function In(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function is(t){return t[Rr]||null}var ko=[],Tn=-1;function Xt(t){return{current:t}}function Q(t){0>Tn||(t.current=ko[Tn],ko[Tn]=null,Tn--)}function V(t,e){Tn++,ko[Tn]=t.current,t.current=e}var Jt={},ke=Xt(Jt),De=Xt(!1),un=Jt;function $n(t,e){var n=t.type.contextTypes;if(!n)return Jt;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Le(t){return t=t.childContextTypes,t!=null}function Li(){Q(De),Q(ke)}function Bl(t,e,n){if(ke.current!==Jt)throw Error(E(168));V(ke,e),V(De,n)}function Fu(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(E(108,$f(t)||"Unknown",i));return Z({},n,r)}function Ai(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jt,un=ke.current,V(ke,t),V(De,De.current),!0}function Vl(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=Fu(t,e,un),r.__reactInternalMemoizedMergedChildContext=t,Q(De),Q(ke),V(ke,t)):Q(De),V(De,n)}var St=null,ss=!1,As=!1;function Hu(t){St===null?St=[t]:St.push(t)}function rg(t){ss=!0,Hu(t)}function Yt(){if(!As&&St!==null){As=!0;var t=0,e=B;try{var n=St;for(B=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}St=null,ss=!1}catch(i){throw St!==null&&(St=St.slice(t+1)),hu(oa,Yt),i}finally{B=e,As=!1}}return null}var Pn=[],Rn=0,Ui=null,Mi=0,Be=[],Ve=0,dn=null,kt=1,Et="";function en(t,e){Pn[Rn++]=Mi,Pn[Rn++]=Ui,Ui=t,Mi=e}function Wu(t,e,n){Be[Ve++]=kt,Be[Ve++]=Et,Be[Ve++]=dn,dn=t;var r=kt;t=Et;var i=32-rt(r)-1;r&=~(1<<i),n+=1;var s=32-rt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,kt=1<<32-rt(e)+i|n<<i|r,Et=s+t}else kt=1<<s|n<<i|r,Et=t}function pa(t){t.return!==null&&(en(t,1),Wu(t,1,0))}function ma(t){for(;t===Ui;)Ui=Pn[--Rn],Pn[Rn]=null,Mi=Pn[--Rn],Pn[Rn]=null;for(;t===dn;)dn=Be[--Ve],Be[Ve]=null,Et=Be[--Ve],Be[Ve]=null,kt=Be[--Ve],Be[Ve]=null}var ze=null,je=null,J=!1,tt=null;function Bu(t,e){var n=qe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ql(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ze=t,je=Wt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ze=t,je=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=dn!==null?{id:kt,overflow:Et}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ze=t,je=null,!0):!1;default:return!1}}function Eo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Co(t){if(J){var e=je;if(e){var n=e;if(!ql(t,e)){if(Eo(t))throw Error(E(418));e=Wt(n.nextSibling);var r=ze;e&&ql(t,e)?Bu(r,n):(t.flags=t.flags&-4097|2,J=!1,ze=t)}}else{if(Eo(t))throw Error(E(418));t.flags=t.flags&-4097|2,J=!1,ze=t}}}function Kl(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ze=t}function ri(t){if(t!==ze)return!1;if(!J)return Kl(t),J=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wo(t.type,t.memoizedProps)),e&&(e=je)){if(Eo(t))throw Vu(),Error(E(418));for(;e;)Bu(t,e),e=Wt(e.nextSibling)}if(Kl(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){je=Wt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}je=null}}else je=ze?Wt(t.stateNode.nextSibling):null;return!0}function Vu(){for(var t=je;t;)t=Wt(t.nextSibling)}function Fn(){je=ze=null,J=!1}function _a(t){tt===null?tt=[t]:tt.push(t)}var ig=Nt.ReactCurrentBatchConfig;function nr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function ii(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ql(t){var e=t._init;return e(t._payload)}function qu(t){function e(h,u){if(t){var p=h.deletions;p===null?(h.deletions=[u],h.flags|=16):p.push(u)}}function n(h,u){if(!t)return null;for(;u!==null;)e(h,u),u=u.sibling;return null}function r(h,u){for(h=new Map;u!==null;)u.key!==null?h.set(u.key,u):h.set(u.index,u),u=u.sibling;return h}function i(h,u){return h=Kt(h,u),h.index=0,h.sibling=null,h}function s(h,u,p){return h.index=p,t?(p=h.alternate,p!==null?(p=p.index,p<u?(h.flags|=2,u):p):(h.flags|=2,u)):(h.flags|=1048576,u)}function o(h){return t&&h.alternate===null&&(h.flags|=2),h}function a(h,u,p,y){return u===null||u.tag!==6?(u=Fs(p,h.mode,y),u.return=h,u):(u=i(u,p),u.return=h,u)}function l(h,u,p,y){var x=p.type;return x===kn?d(h,u,p.props.children,y,p.key):u!==null&&(u.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Lt&&Ql(x)===u.type)?(y=i(u,p.props),y.ref=nr(h,u,p),y.return=h,y):(y=ki(p.type,p.key,p.props,null,h.mode,y),y.ref=nr(h,u,p),y.return=h,y)}function c(h,u,p,y){return u===null||u.tag!==4||u.stateNode.containerInfo!==p.containerInfo||u.stateNode.implementation!==p.implementation?(u=Hs(p,h.mode,y),u.return=h,u):(u=i(u,p.children||[]),u.return=h,u)}function d(h,u,p,y,x){return u===null||u.tag!==7?(u=an(p,h.mode,y,x),u.return=h,u):(u=i(u,p),u.return=h,u)}function g(h,u,p){if(typeof u=="string"&&u!==""||typeof u=="number")return u=Fs(""+u,h.mode,p),u.return=h,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case Kr:return p=ki(u.type,u.key,u.props,null,h.mode,p),p.ref=nr(h,null,u),p.return=h,p;case Sn:return u=Hs(u,h.mode,p),u.return=h,u;case Lt:var y=u._init;return g(h,y(u._payload),p)}if(or(u)||Xn(u))return u=an(u,h.mode,p,null),u.return=h,u;ii(h,u)}return null}function f(h,u,p,y){var x=u!==null?u.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return x!==null?null:a(h,u,""+p,y);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Kr:return p.key===x?l(h,u,p,y):null;case Sn:return p.key===x?c(h,u,p,y):null;case Lt:return x=p._init,f(h,u,x(p._payload),y)}if(or(p)||Xn(p))return x!==null?null:d(h,u,p,y,null);ii(h,p)}return null}function m(h,u,p,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return h=h.get(p)||null,a(u,h,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Kr:return h=h.get(y.key===null?p:y.key)||null,l(u,h,y,x);case Sn:return h=h.get(y.key===null?p:y.key)||null,c(u,h,y,x);case Lt:var C=y._init;return m(h,u,p,C(y._payload),x)}if(or(y)||Xn(y))return h=h.get(p)||null,d(u,h,y,x,null);ii(u,y)}return null}function S(h,u,p,y){for(var x=null,C=null,T=u,I=u=0,$=null;T!==null&&I<p.length;I++){T.index>I?($=T,T=null):$=T.sibling;var L=f(h,T,p[I],y);if(L===null){T===null&&(T=$);break}t&&T&&L.alternate===null&&e(h,T),u=s(L,u,I),C===null?x=L:C.sibling=L,C=L,T=$}if(I===p.length)return n(h,T),J&&en(h,I),x;if(T===null){for(;I<p.length;I++)T=g(h,p[I],y),T!==null&&(u=s(T,u,I),C===null?x=T:C.sibling=T,C=T);return J&&en(h,I),x}for(T=r(h,T);I<p.length;I++)$=m(T,h,I,p[I],y),$!==null&&(t&&$.alternate!==null&&T.delete($.key===null?I:$.key),u=s($,u,I),C===null?x=$:C.sibling=$,C=$);return t&&T.forEach(function(le){return e(h,le)}),J&&en(h,I),x}function k(h,u,p,y){var x=Xn(p);if(typeof x!="function")throw Error(E(150));if(p=x.call(p),p==null)throw Error(E(151));for(var C=x=null,T=u,I=u=0,$=null,L=p.next();T!==null&&!L.done;I++,L=p.next()){T.index>I?($=T,T=null):$=T.sibling;var le=f(h,T,L.value,y);if(le===null){T===null&&(T=$);break}t&&T&&le.alternate===null&&e(h,T),u=s(le,u,I),C===null?x=le:C.sibling=le,C=le,T=$}if(L.done)return n(h,T),J&&en(h,I),x;if(T===null){for(;!L.done;I++,L=p.next())L=g(h,L.value,y),L!==null&&(u=s(L,u,I),C===null?x=L:C.sibling=L,C=L);return J&&en(h,I),x}for(T=r(h,T);!L.done;I++,L=p.next())L=m(T,h,I,L.value,y),L!==null&&(t&&L.alternate!==null&&T.delete(L.key===null?I:L.key),u=s(L,u,I),C===null?x=L:C.sibling=L,C=L);return t&&T.forEach(function(Ee){return e(h,Ee)}),J&&en(h,I),x}function j(h,u,p,y){if(typeof p=="object"&&p!==null&&p.type===kn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Kr:e:{for(var x=p.key,C=u;C!==null;){if(C.key===x){if(x=p.type,x===kn){if(C.tag===7){n(h,C.sibling),u=i(C,p.props.children),u.return=h,h=u;break e}}else if(C.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Lt&&Ql(x)===C.type){n(h,C.sibling),u=i(C,p.props),u.ref=nr(h,C,p),u.return=h,h=u;break e}n(h,C);break}else e(h,C);C=C.sibling}p.type===kn?(u=an(p.props.children,h.mode,y,p.key),u.return=h,h=u):(y=ki(p.type,p.key,p.props,null,h.mode,y),y.ref=nr(h,u,p),y.return=h,h=y)}return o(h);case Sn:e:{for(C=p.key;u!==null;){if(u.key===C)if(u.tag===4&&u.stateNode.containerInfo===p.containerInfo&&u.stateNode.implementation===p.implementation){n(h,u.sibling),u=i(u,p.children||[]),u.return=h,h=u;break e}else{n(h,u);break}else e(h,u);u=u.sibling}u=Hs(p,h.mode,y),u.return=h,h=u}return o(h);case Lt:return C=p._init,j(h,u,C(p._payload),y)}if(or(p))return S(h,u,p,y);if(Xn(p))return k(h,u,p,y);ii(h,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,u!==null&&u.tag===6?(n(h,u.sibling),u=i(u,p),u.return=h,h=u):(n(h,u),u=Fs(p,h.mode,y),u.return=h,h=u),o(h)):n(h,u)}return j}var Hn=qu(!0),Ku=qu(!1),ji=Xt(null),Oi=null,Nn=null,va=null;function wa(){va=Nn=Oi=null}function ya(t){var e=ji.current;Q(ji),t._currentValue=e}function xo(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function jn(t,e){Oi=t,va=Nn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(be=!0),t.firstContext=null)}function Qe(t){var e=t._currentValue;if(va!==t)if(t={context:t,memoizedValue:e,next:null},Nn===null){if(Oi===null)throw Error(E(308));Nn=t,Oi.dependencies={lanes:0,firstContext:t}}else Nn=Nn.next=t;return e}var rn=null;function Sa(t){rn===null?rn=[t]:rn.push(t)}function Qu(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sa(e)):(n.next=i.next,i.next=n),e.interleaved=n,Tt(t,r)}function Tt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var At=!1;function ka(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ju(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ct(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,H&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Tt(t,n)}return i=r.interleaved,i===null?(e.next=e,Sa(r)):(e.next=i.next,i.next=e),r.interleaved=e,Tt(t,n)}function mi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,aa(t,n)}}function Jl(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zi(t,e,n,r){var i=t.updateQueue;At=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var g=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,k=a;switch(f=e,m=n,k.tag){case 1:if(S=k.payload,typeof S=="function"){g=S.call(m,g,f);break e}g=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=k.payload,f=typeof S=="function"?S.call(m,g,f):S,f==null)break e;g=Z({},g,f);break e;case 2:At=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=g):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=g),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);hn|=o,t.lanes=o,t.memoizedState=g}}function Gl(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var Wr={},mt=Xt(Wr),Nr=Xt(Wr),br=Xt(Wr);function sn(t){if(t===Wr)throw Error(E(174));return t}function Ea(t,e){switch(V(br,e),V(Nr,t),V(mt,Wr),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:io(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=io(e,t)}Q(mt),V(mt,e)}function Wn(){Q(mt),Q(Nr),Q(br)}function Gu(t){sn(br.current);var e=sn(mt.current),n=io(e,t.type);e!==n&&(V(Nr,t),V(mt,n))}function Ca(t){Nr.current===t&&(Q(mt),Q(Nr))}var G=Xt(0);function $i(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Us=[];function xa(){for(var t=0;t<Us.length;t++)Us[t]._workInProgressVersionPrimary=null;Us.length=0}var _i=Nt.ReactCurrentDispatcher,Ms=Nt.ReactCurrentBatchConfig,fn=0,Y=null,ue=null,fe=null,Fi=!1,pr=!1,Dr=0,sg=0;function _e(){throw Error(E(321))}function Ia(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!st(t[n],e[n]))return!1;return!0}function Ta(t,e,n,r,i,s){if(fn=s,Y=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_i.current=t===null||t.memoizedState===null?cg:ug,t=n(r,i),pr){s=0;do{if(pr=!1,Dr=0,25<=s)throw Error(E(301));s+=1,fe=ue=null,e.updateQueue=null,_i.current=dg,t=n(r,i)}while(pr)}if(_i.current=Hi,e=ue!==null&&ue.next!==null,fn=0,fe=ue=Y=null,Fi=!1,e)throw Error(E(300));return t}function Pa(){var t=Dr!==0;return Dr=0,t}function dt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?Y.memoizedState=fe=t:fe=fe.next=t,fe}function Je(){if(ue===null){var t=Y.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var e=fe===null?Y.memoizedState:fe.next;if(e!==null)fe=e,ue=t;else{if(t===null)throw Error(E(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},fe===null?Y.memoizedState=fe=t:fe=fe.next=t}return fe}function Lr(t,e){return typeof e=="function"?e(t):e}function js(t){var e=Je(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=ue,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((fn&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var g={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=g,o=r):l=l.next=g,Y.lanes|=d,hn|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,st(r,e.memoizedState)||(be=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Y.lanes|=s,hn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Os(t){var e=Je(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);st(s,e.memoizedState)||(be=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Xu(){}function Yu(t,e){var n=Y,r=Je(),i=e(),s=!st(r.memoizedState,i);if(s&&(r.memoizedState=i,be=!0),r=r.queue,Ra(td.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fe!==null&&fe.memoizedState.tag&1){if(n.flags|=2048,Ar(9,ed.bind(null,n,r,i,e),void 0,null),he===null)throw Error(E(349));fn&30||Zu(n,e,i)}return i}function Zu(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Y.updateQueue,e===null?(e={lastEffect:null,stores:null},Y.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ed(t,e,n,r){e.value=n,e.getSnapshot=r,nd(e)&&rd(t)}function td(t,e,n){return n(function(){nd(e)&&rd(t)})}function nd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!st(t,n)}catch{return!0}}function rd(t){var e=Tt(t,1);e!==null&&it(e,t,1,-1)}function Xl(t){var e=dt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:t},e.queue=t,t=t.dispatch=lg.bind(null,Y,t),[e.memoizedState,t]}function Ar(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Y.updateQueue,e===null?(e={lastEffect:null,stores:null},Y.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function id(){return Je().memoizedState}function vi(t,e,n,r){var i=dt();Y.flags|=t,i.memoizedState=Ar(1|e,n,void 0,r===void 0?null:r)}function os(t,e,n,r){var i=Je();r=r===void 0?null:r;var s=void 0;if(ue!==null){var o=ue.memoizedState;if(s=o.destroy,r!==null&&Ia(r,o.deps)){i.memoizedState=Ar(e,n,s,r);return}}Y.flags|=t,i.memoizedState=Ar(1|e,n,s,r)}function Yl(t,e){return vi(8390656,8,t,e)}function Ra(t,e){return os(2048,8,t,e)}function sd(t,e){return os(4,2,t,e)}function od(t,e){return os(4,4,t,e)}function ad(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ld(t,e,n){return n=n!=null?n.concat([t]):null,os(4,4,ad.bind(null,e,t),n)}function Na(){}function cd(t,e){var n=Je();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ia(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ud(t,e){var n=Je();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ia(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function dd(t,e,n){return fn&21?(st(n,e)||(n=mu(),Y.lanes|=n,hn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,be=!0),t.memoizedState=n)}function og(t,e){var n=B;B=n!==0&&4>n?n:4,t(!0);var r=Ms.transition;Ms.transition={};try{t(!1),e()}finally{B=n,Ms.transition=r}}function fd(){return Je().memoizedState}function ag(t,e,n){var r=qt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hd(t))gd(e,n);else if(n=Qu(t,e,n,r),n!==null){var i=Ie();it(n,t,r,i),pd(n,e,r)}}function lg(t,e,n){var r=qt(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hd(t))gd(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,st(a,o)){var l=e.interleaved;l===null?(i.next=i,Sa(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Qu(t,e,i,r),n!==null&&(i=Ie(),it(n,t,r,i),pd(n,e,r))}}function hd(t){var e=t.alternate;return t===Y||e!==null&&e===Y}function gd(t,e){pr=Fi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pd(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,aa(t,n)}}var Hi={readContext:Qe,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},cg={readContext:Qe,useCallback:function(t,e){return dt().memoizedState=[t,e===void 0?null:e],t},useContext:Qe,useEffect:Yl,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vi(4194308,4,ad.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vi(4194308,4,t,e)},useInsertionEffect:function(t,e){return vi(4,2,t,e)},useMemo:function(t,e){var n=dt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ag.bind(null,Y,t),[r.memoizedState,t]},useRef:function(t){var e=dt();return t={current:t},e.memoizedState=t},useState:Xl,useDebugValue:Na,useDeferredValue:function(t){return dt().memoizedState=t},useTransition:function(){var t=Xl(!1),e=t[0];return t=og.bind(null,t[1]),dt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Y,i=dt();if(J){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),he===null)throw Error(E(349));fn&30||Zu(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Yl(td.bind(null,r,s,t),[t]),r.flags|=2048,Ar(9,ed.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=dt(),e=he.identifierPrefix;if(J){var n=Et,r=kt;n=(r&~(1<<32-rt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sg++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ug={readContext:Qe,useCallback:cd,useContext:Qe,useEffect:Ra,useImperativeHandle:ld,useInsertionEffect:sd,useLayoutEffect:od,useMemo:ud,useReducer:js,useRef:id,useState:function(){return js(Lr)},useDebugValue:Na,useDeferredValue:function(t){var e=Je();return dd(e,ue.memoizedState,t)},useTransition:function(){var t=js(Lr)[0],e=Je().memoizedState;return[t,e]},useMutableSource:Xu,useSyncExternalStore:Yu,useId:fd,unstable_isNewReconciler:!1},dg={readContext:Qe,useCallback:cd,useContext:Qe,useEffect:Ra,useImperativeHandle:ld,useInsertionEffect:sd,useLayoutEffect:od,useMemo:ud,useReducer:Os,useRef:id,useState:function(){return Os(Lr)},useDebugValue:Na,useDeferredValue:function(t){var e=Je();return ue===null?e.memoizedState=t:dd(e,ue.memoizedState,t)},useTransition:function(){var t=Os(Lr)[0],e=Je().memoizedState;return[t,e]},useMutableSource:Xu,useSyncExternalStore:Yu,useId:fd,unstable_isNewReconciler:!1};function Ze(t,e){if(t&&t.defaultProps){e=Z({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Io(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Z({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var as={isMounted:function(t){return(t=t._reactInternals)?vn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=qt(t),s=Ct(r,i);s.payload=e,n!=null&&(s.callback=n),e=Bt(t,s,i),e!==null&&(it(e,t,i,r),mi(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=qt(t),s=Ct(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Bt(t,s,i),e!==null&&(it(e,t,i,r),mi(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ie(),r=qt(t),i=Ct(n,r);i.tag=2,e!=null&&(i.callback=e),e=Bt(t,i,r),e!==null&&(it(e,t,r,n),mi(e,t,r))}};function Zl(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ir(n,r)||!Ir(i,s):!0}function md(t,e,n){var r=!1,i=Jt,s=e.contextType;return typeof s=="object"&&s!==null?s=Qe(s):(i=Le(e)?un:ke.current,r=e.contextTypes,s=(r=r!=null)?$n(t,i):Jt),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=as,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ec(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&as.enqueueReplaceState(e,e.state,null)}function To(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ka(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Qe(s):(s=Le(e)?un:ke.current,i.context=$n(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Io(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&as.enqueueReplaceState(i,i.state,null),zi(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Bn(t,e){try{var n="",r=e;do n+=zf(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function zs(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Po(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fg=typeof WeakMap=="function"?WeakMap:Map;function _d(t,e,n){n=Ct(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Bi||(Bi=!0,Oo=r),Po(t,e)},n}function vd(t,e,n){n=Ct(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Po(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Po(t,e),typeof r!="function"&&(Vt===null?Vt=new Set([this]):Vt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function tc(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fg;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ig.bind(null,t,e,n),e.then(t,t))}function nc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rc(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ct(-1,1),e.tag=2,Bt(n,e,1))),n.lanes|=1),t)}var hg=Nt.ReactCurrentOwner,be=!1;function Ce(t,e,n,r){e.child=t===null?Ku(e,null,n,r):Hn(e,t.child,n,r)}function ic(t,e,n,r,i){n=n.render;var s=e.ref;return jn(e,i),r=Ta(t,e,n,r,s,i),n=Pa(),t!==null&&!be?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pt(t,e,i)):(J&&n&&pa(e),e.flags|=1,Ce(t,e,r,i),e.child)}function sc(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Oa(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,wd(t,e,s,r,i)):(t=ki(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ir,n(o,r)&&t.ref===e.ref)return Pt(t,e,i)}return e.flags|=1,t=Kt(s,r),t.ref=e.ref,t.return=e,e.child=t}function wd(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ir(s,r)&&t.ref===e.ref)if(be=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(be=!0);else return e.lanes=t.lanes,Pt(t,e,i)}return Ro(t,e,n,r,i)}function yd(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},V(Dn,Me),Me|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,V(Dn,Me),Me|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,V(Dn,Me),Me|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,V(Dn,Me),Me|=r;return Ce(t,e,i,n),e.child}function Sd(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ro(t,e,n,r,i){var s=Le(n)?un:ke.current;return s=$n(e,s),jn(e,i),n=Ta(t,e,n,r,s,i),r=Pa(),t!==null&&!be?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pt(t,e,i)):(J&&r&&pa(e),e.flags|=1,Ce(t,e,n,i),e.child)}function oc(t,e,n,r,i){if(Le(n)){var s=!0;Ai(e)}else s=!1;if(jn(e,i),e.stateNode===null)wi(t,e),md(e,n,r),To(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Qe(c):(c=Le(n)?un:ke.current,c=$n(e,c));var d=n.getDerivedStateFromProps,g=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ec(e,o,r,c),At=!1;var f=e.memoizedState;o.state=f,zi(e,r,o,i),l=e.memoizedState,a!==r||f!==l||De.current||At?(typeof d=="function"&&(Io(e,n,d,r),l=e.memoizedState),(a=At||Zl(e,n,a,r,f,l,c))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ju(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ze(e.type,a),o.props=c,g=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Qe(l):(l=Le(n)?un:ke.current,l=$n(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||f!==l)&&ec(e,o,r,l),At=!1,f=e.memoizedState,o.state=f,zi(e,r,o,i);var S=e.memoizedState;a!==g||f!==S||De.current||At?(typeof m=="function"&&(Io(e,n,m,r),S=e.memoizedState),(c=At||Zl(e,n,c,r,f,S,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return No(t,e,n,r,s,i)}function No(t,e,n,r,i,s){Sd(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Vl(e,n,!1),Pt(t,e,s);r=e.stateNode,hg.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Hn(e,t.child,null,s),e.child=Hn(e,null,a,s)):Ce(t,e,a,s),e.memoizedState=r.state,i&&Vl(e,n,!0),e.child}function kd(t){var e=t.stateNode;e.pendingContext?Bl(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Bl(t,e.context,!1),Ea(t,e.containerInfo)}function ac(t,e,n,r,i){return Fn(),_a(i),e.flags|=256,Ce(t,e,n,r),e.child}var bo={dehydrated:null,treeContext:null,retryLane:0};function Do(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ed(t,e,n){var r=e.pendingProps,i=G.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),V(G,i&1),t===null)return Co(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=us(o,r,0,null),t=an(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Do(n),e.memoizedState=bo,t):ba(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return gg(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Kt(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Kt(a,s):(s=an(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Do(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=bo,r}return s=t.child,t=s.sibling,r=Kt(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ba(t,e){return e=us({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function si(t,e,n,r){return r!==null&&_a(r),Hn(e,t.child,null,n),t=ba(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gg(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=zs(Error(E(422))),si(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=us({mode:"visible",children:r.children},i,0,null),s=an(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Hn(e,t.child,null,o),e.child.memoizedState=Do(o),e.memoizedState=bo,s);if(!(e.mode&1))return si(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(E(419)),r=zs(s,r,void 0),si(t,e,o,r)}if(a=(o&t.childLanes)!==0,be||a){if(r=he,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Tt(t,i),it(r,t,i,-1))}return ja(),r=zs(Error(E(421))),si(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Tg.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,je=Wt(i.nextSibling),ze=e,J=!0,tt=null,t!==null&&(Be[Ve++]=kt,Be[Ve++]=Et,Be[Ve++]=dn,kt=t.id,Et=t.overflow,dn=e),e=ba(e,r.children),e.flags|=4096,e)}function lc(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xo(t.return,e,n)}function $s(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Cd(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ce(t,e,r.children,n),r=G.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lc(t,n,e);else if(t.tag===19)lc(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(V(G,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$i(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$s(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$i(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$s(e,!0,n,null,s);break;case"together":$s(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wi(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=Kt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Kt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pg(t,e,n){switch(e.tag){case 3:kd(e),Fn();break;case 5:Gu(e);break;case 1:Le(e.type)&&Ai(e);break;case 4:Ea(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;V(ji,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(V(G,G.current&1),e.flags|=128,null):n&e.child.childLanes?Ed(t,e,n):(V(G,G.current&1),t=Pt(t,e,n),t!==null?t.sibling:null);V(G,G.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Cd(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),V(G,G.current),r)break;return null;case 22:case 23:return e.lanes=0,yd(t,e,n)}return Pt(t,e,n)}var xd,Lo,Id,Td;xd=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lo=function(){};Id=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,sn(mt.current);var s=null;switch(n){case"input":i=eo(t,i),r=eo(t,r),s=[];break;case"select":i=Z({},i,{value:void 0}),r=Z({},r,{value:void 0}),s=[];break;case"textarea":i=ro(t,i),r=ro(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Di)}so(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wr.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(wr.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&q("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Td=function(t,e,n,r){n!==r&&(e.flags|=4)};function rr(t,e){if(!J)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ve(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mg(t,e,n){var r=e.pendingProps;switch(ma(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ve(e),null;case 1:return Le(e.type)&&Li(),ve(e),null;case 3:return r=e.stateNode,Wn(),Q(De),Q(ke),xa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ri(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tt!==null&&(Fo(tt),tt=null))),Lo(t,e),ve(e),null;case 5:Ca(e);var i=sn(br.current);if(n=e.type,t!==null&&e.stateNode!=null)Id(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return ve(e),null}if(t=sn(mt.current),ri(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[gt]=e,r[Rr]=s,t=(e.mode&1)!==0,n){case"dialog":q("cancel",r),q("close",r);break;case"iframe":case"object":case"embed":q("load",r);break;case"video":case"audio":for(i=0;i<lr.length;i++)q(lr[i],r);break;case"source":q("error",r);break;case"img":case"image":case"link":q("error",r),q("load",r);break;case"details":q("toggle",r);break;case"input":_l(r,s),q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},q("invalid",r);break;case"textarea":wl(r,s),q("invalid",r)}so(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ni(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ni(r.textContent,a,t),i=["children",""+a]):wr.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&q("scroll",r)}switch(n){case"input":Qr(r),vl(r,s,!0);break;case"textarea":Qr(r),yl(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Di)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tu(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gt]=e,t[Rr]=r,xd(t,e,!1,!1),e.stateNode=t;e:{switch(o=oo(n,r),n){case"dialog":q("cancel",t),q("close",t),i=r;break;case"iframe":case"object":case"embed":q("load",t),i=r;break;case"video":case"audio":for(i=0;i<lr.length;i++)q(lr[i],t);i=r;break;case"source":q("error",t),i=r;break;case"img":case"image":case"link":q("error",t),q("load",t),i=r;break;case"details":q("toggle",t),i=r;break;case"input":_l(t,r),i=eo(t,r),q("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Z({},r,{value:void 0}),q("invalid",t);break;case"textarea":wl(t,r),i=ro(t,r),q("invalid",t);break;default:i=r}so(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?iu(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nu(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&yr(t,l):typeof l=="number"&&yr(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wr.hasOwnProperty(s)?l!=null&&s==="onScroll"&&q("scroll",t):l!=null&&ta(t,s,l,o))}switch(n){case"input":Qr(t),vl(t,r,!1);break;case"textarea":Qr(t),yl(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qt(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ln(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ln(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Di)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ve(e),null;case 6:if(t&&e.stateNode!=null)Td(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=sn(br.current),sn(mt.current),ri(e)){if(r=e.stateNode,n=e.memoizedProps,r[gt]=e,(s=r.nodeValue!==n)&&(t=ze,t!==null))switch(t.tag){case 3:ni(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ni(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gt]=e,e.stateNode=r}return ve(e),null;case 13:if(Q(G),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(J&&je!==null&&e.mode&1&&!(e.flags&128))Vu(),Fn(),e.flags|=98560,s=!1;else if(s=ri(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[gt]=e}else Fn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ve(e),s=!1}else tt!==null&&(Fo(tt),tt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||G.current&1?de===0&&(de=3):ja())),e.updateQueue!==null&&(e.flags|=4),ve(e),null);case 4:return Wn(),Lo(t,e),t===null&&Tr(e.stateNode.containerInfo),ve(e),null;case 10:return ya(e.type._context),ve(e),null;case 17:return Le(e.type)&&Li(),ve(e),null;case 19:if(Q(G),s=e.memoizedState,s===null)return ve(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)rr(s,!1);else{if(de!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$i(t),o!==null){for(e.flags|=128,rr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return V(G,G.current&1|2),e.child}t=t.sibling}s.tail!==null&&ie()>Vn&&(e.flags|=128,r=!0,rr(s,!1),e.lanes=4194304)}else{if(!r)if(t=$i(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),rr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!J)return ve(e),null}else 2*ie()-s.renderingStartTime>Vn&&n!==1073741824&&(e.flags|=128,r=!0,rr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ie(),e.sibling=null,n=G.current,V(G,r?n&1|2:n&1),e):(ve(e),null);case 22:case 23:return Ma(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Me&1073741824&&(ve(e),e.subtreeFlags&6&&(e.flags|=8192)):ve(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function _g(t,e){switch(ma(e),e.tag){case 1:return Le(e.type)&&Li(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wn(),Q(De),Q(ke),xa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ca(e),null;case 13:if(Q(G),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));Fn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Q(G),null;case 4:return Wn(),null;case 10:return ya(e.type._context),null;case 22:case 23:return Ma(),null;case 24:return null;default:return null}}var oi=!1,ye=!1,vg=typeof WeakSet=="function"?WeakSet:Set,R=null;function bn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){re(t,e,r)}else n.current=null}function Ao(t,e,n){try{n()}catch(r){re(t,e,r)}}var cc=!1;function wg(t,e){if(_o=Ri,t=Du(),ga(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,g=t,f=null;t:for(;;){for(var m;g!==n||i!==0&&g.nodeType!==3||(a=o+i),g!==s||r!==0&&g.nodeType!==3||(l=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(m=g.firstChild)!==null;)f=g,g=m;for(;;){if(g===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++d===r&&(l=o),(m=g.nextSibling)!==null)break;g=f,f=g.parentNode}g=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(vo={focusedElem:t,selectionRange:n},Ri=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var k=S.memoizedProps,j=S.memoizedState,h=e.stateNode,u=h.getSnapshotBeforeUpdate(e.elementType===e.type?k:Ze(e.type,k),j);h.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(y){re(e,e.return,y)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return S=cc,cc=!1,S}function mr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ao(e,n,s)}i=i.next}while(i!==r)}}function ls(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Uo(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Pd(t){var e=t.alternate;e!==null&&(t.alternate=null,Pd(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gt],delete e[Rr],delete e[So],delete e[tg],delete e[ng])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rd(t){return t.tag===5||t.tag===3||t.tag===4}function uc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mo(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Di));else if(r!==4&&(t=t.child,t!==null))for(Mo(t,e,n),t=t.sibling;t!==null;)Mo(t,e,n),t=t.sibling}function jo(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jo(t,e,n),t=t.sibling;t!==null;)jo(t,e,n),t=t.sibling}var ge=null,et=!1;function Dt(t,e,n){for(n=n.child;n!==null;)Nd(t,e,n),n=n.sibling}function Nd(t,e,n){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(es,n)}catch{}switch(n.tag){case 5:ye||bn(n,e);case 6:var r=ge,i=et;ge=null,Dt(t,e,n),ge=r,et=i,ge!==null&&(et?(t=ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ge.removeChild(n.stateNode));break;case 18:ge!==null&&(et?(t=ge,n=n.stateNode,t.nodeType===8?Ls(t.parentNode,n):t.nodeType===1&&Ls(t,n),Cr(t)):Ls(ge,n.stateNode));break;case 4:r=ge,i=et,ge=n.stateNode.containerInfo,et=!0,Dt(t,e,n),ge=r,et=i;break;case 0:case 11:case 14:case 15:if(!ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ao(n,e,o),i=i.next}while(i!==r)}Dt(t,e,n);break;case 1:if(!ye&&(bn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){re(n,e,a)}Dt(t,e,n);break;case 21:Dt(t,e,n);break;case 22:n.mode&1?(ye=(r=ye)||n.memoizedState!==null,Dt(t,e,n),ye=r):Dt(t,e,n);break;default:Dt(t,e,n)}}function dc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vg),e.forEach(function(r){var i=Pg.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xe(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ge=a.stateNode,et=!1;break e;case 3:ge=a.stateNode.containerInfo,et=!0;break e;case 4:ge=a.stateNode.containerInfo,et=!0;break e}a=a.return}if(ge===null)throw Error(E(160));Nd(s,o,i),ge=null,et=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){re(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bd(e,t),e=e.sibling}function bd(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xe(e,t),ct(t),r&4){try{mr(3,t,t.return),ls(3,t)}catch(k){re(t,t.return,k)}try{mr(5,t,t.return)}catch(k){re(t,t.return,k)}}break;case 1:Xe(e,t),ct(t),r&512&&n!==null&&bn(n,n.return);break;case 5:if(Xe(e,t),ct(t),r&512&&n!==null&&bn(n,n.return),t.flags&32){var i=t.stateNode;try{yr(i,"")}catch(k){re(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Zc(i,s),oo(a,o);var c=oo(a,s);for(o=0;o<l.length;o+=2){var d=l[o],g=l[o+1];d==="style"?iu(i,g):d==="dangerouslySetInnerHTML"?nu(i,g):d==="children"?yr(i,g):ta(i,d,g,c)}switch(a){case"input":to(i,s);break;case"textarea":eu(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ln(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ln(i,!!s.multiple,s.defaultValue,!0):Ln(i,!!s.multiple,s.multiple?[]:"",!1))}i[Rr]=s}catch(k){re(t,t.return,k)}}break;case 6:if(Xe(e,t),ct(t),r&4){if(t.stateNode===null)throw Error(E(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){re(t,t.return,k)}}break;case 3:if(Xe(e,t),ct(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cr(e.containerInfo)}catch(k){re(t,t.return,k)}break;case 4:Xe(e,t),ct(t);break;case 13:Xe(e,t),ct(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Aa=ie())),r&4&&dc(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ye=(c=ye)||d,Xe(e,t),ye=c):Xe(e,t),ct(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(R=t,d=t.child;d!==null;){for(g=R=d;R!==null;){switch(f=R,m=f.child,f.tag){case 0:case 11:case 14:case 15:mr(4,f,f.return);break;case 1:bn(f,f.return);var S=f.stateNode;if(typeof S.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(k){re(r,n,k)}}break;case 5:bn(f,f.return);break;case 22:if(f.memoizedState!==null){hc(g);continue}}m!==null?(m.return=f,R=m):hc(g)}d=d.sibling}e:for(d=null,g=t;;){if(g.tag===5){if(d===null){d=g;try{i=g.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=g.stateNode,l=g.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ru("display",o))}catch(k){re(t,t.return,k)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=c?"":g.memoizedProps}catch(k){re(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Xe(e,t),ct(t),r&4&&dc(t);break;case 21:break;default:Xe(e,t),ct(t)}}function ct(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Rd(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(yr(i,""),r.flags&=-33);var s=uc(t);jo(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=uc(t);Mo(t,a,o);break;default:throw Error(E(161))}}catch(l){re(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yg(t,e,n){R=t,Dd(t)}function Dd(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||oi;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ye;a=oi;var c=ye;if(oi=o,(ye=l)&&!c)for(R=i;R!==null;)o=R,l=o.child,o.tag===22&&o.memoizedState!==null?gc(i):l!==null?(l.return=o,R=l):gc(i);for(;s!==null;)R=s,Dd(s),s=s.sibling;R=i,oi=a,ye=c}fc(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):fc(t)}}function fc(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ye||ls(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ye)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ze(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Gl(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Gl(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&Cr(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}ye||e.flags&512&&Uo(e)}catch(f){re(e,e.return,f)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function hc(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function gc(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ls(4,e)}catch(l){re(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){re(e,i,l)}}var s=e.return;try{Uo(e)}catch(l){re(e,s,l)}break;case 5:var o=e.return;try{Uo(e)}catch(l){re(e,o,l)}}}catch(l){re(e,e.return,l)}if(e===t){R=null;break}var a=e.sibling;if(a!==null){a.return=e.return,R=a;break}R=e.return}}var Sg=Math.ceil,Wi=Nt.ReactCurrentDispatcher,Da=Nt.ReactCurrentOwner,Ke=Nt.ReactCurrentBatchConfig,H=0,he=null,ae=null,pe=0,Me=0,Dn=Xt(0),de=0,Ur=null,hn=0,cs=0,La=0,_r=null,Ne=null,Aa=0,Vn=1/0,wt=null,Bi=!1,Oo=null,Vt=null,ai=!1,zt=null,Vi=0,vr=0,zo=null,yi=-1,Si=0;function Ie(){return H&6?ie():yi!==-1?yi:yi=ie()}function qt(t){return t.mode&1?H&2&&pe!==0?pe&-pe:ig.transition!==null?(Si===0&&(Si=mu()),Si):(t=B,t!==0||(t=window.event,t=t===void 0?16:Eu(t.type)),t):1}function it(t,e,n,r){if(50<vr)throw vr=0,zo=null,Error(E(185));$r(t,n,r),(!(H&2)||t!==he)&&(t===he&&(!(H&2)&&(cs|=n),de===4&&jt(t,pe)),Ae(t,r),n===1&&H===0&&!(e.mode&1)&&(Vn=ie()+500,ss&&Yt()))}function Ae(t,e){var n=t.callbackNode;ih(t,e);var r=Pi(t,t===he?pe:0);if(r===0)n!==null&&El(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&El(n),e===1)t.tag===0?rg(pc.bind(null,t)):Hu(pc.bind(null,t)),Zh(function(){!(H&6)&&Yt()}),n=null;else{switch(_u(r)){case 1:n=oa;break;case 4:n=gu;break;case 16:n=Ti;break;case 536870912:n=pu;break;default:n=Ti}n=$d(n,Ld.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ld(t,e){if(yi=-1,Si=0,H&6)throw Error(E(327));var n=t.callbackNode;if(On()&&t.callbackNode!==n)return null;var r=Pi(t,t===he?pe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qi(t,r);else{e=r;var i=H;H|=2;var s=Ud();(he!==t||pe!==e)&&(wt=null,Vn=ie()+500,on(t,e));do try{Cg();break}catch(a){Ad(t,a)}while(!0);wa(),Wi.current=s,H=i,ae!==null?e=0:(he=null,pe=0,e=de)}if(e!==0){if(e===2&&(i=fo(t),i!==0&&(r=i,e=$o(t,i))),e===1)throw n=Ur,on(t,0),jt(t,r),Ae(t,ie()),n;if(e===6)jt(t,r);else{if(i=t.current.alternate,!(r&30)&&!kg(i)&&(e=qi(t,r),e===2&&(s=fo(t),s!==0&&(r=s,e=$o(t,s))),e===1))throw n=Ur,on(t,0),jt(t,r),Ae(t,ie()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:tn(t,Ne,wt);break;case 3:if(jt(t,r),(r&130023424)===r&&(e=Aa+500-ie(),10<e)){if(Pi(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ie(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=yo(tn.bind(null,t,Ne,wt),e);break}tn(t,Ne,wt);break;case 4:if(jt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-rt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sg(r/1960))-r,10<r){t.timeoutHandle=yo(tn.bind(null,t,Ne,wt),r);break}tn(t,Ne,wt);break;case 5:tn(t,Ne,wt);break;default:throw Error(E(329))}}}return Ae(t,ie()),t.callbackNode===n?Ld.bind(null,t):null}function $o(t,e){var n=_r;return t.current.memoizedState.isDehydrated&&(on(t,e).flags|=256),t=qi(t,e),t!==2&&(e=Ne,Ne=n,e!==null&&Fo(e)),t}function Fo(t){Ne===null?Ne=t:Ne.push.apply(Ne,t)}function kg(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!st(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jt(t,e){for(e&=~La,e&=~cs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rt(e),r=1<<n;t[n]=-1,e&=~r}}function pc(t){if(H&6)throw Error(E(327));On();var e=Pi(t,0);if(!(e&1))return Ae(t,ie()),null;var n=qi(t,e);if(t.tag!==0&&n===2){var r=fo(t);r!==0&&(e=r,n=$o(t,r))}if(n===1)throw n=Ur,on(t,0),jt(t,e),Ae(t,ie()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,tn(t,Ne,wt),Ae(t,ie()),null}function Ua(t,e){var n=H;H|=1;try{return t(e)}finally{H=n,H===0&&(Vn=ie()+500,ss&&Yt())}}function gn(t){zt!==null&&zt.tag===0&&!(H&6)&&On();var e=H;H|=1;var n=Ke.transition,r=B;try{if(Ke.transition=null,B=1,t)return t()}finally{B=r,Ke.transition=n,H=e,!(H&6)&&Yt()}}function Ma(){Me=Dn.current,Q(Dn)}function on(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Yh(n)),ae!==null)for(n=ae.return;n!==null;){var r=n;switch(ma(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Li();break;case 3:Wn(),Q(De),Q(ke),xa();break;case 5:Ca(r);break;case 4:Wn();break;case 13:Q(G);break;case 19:Q(G);break;case 10:ya(r.type._context);break;case 22:case 23:Ma()}n=n.return}if(he=t,ae=t=Kt(t.current,null),pe=Me=e,de=0,Ur=null,La=cs=hn=0,Ne=_r=null,rn!==null){for(e=0;e<rn.length;e++)if(n=rn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}rn=null}return t}function Ad(t,e){do{var n=ae;try{if(wa(),_i.current=Hi,Fi){for(var r=Y.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fi=!1}if(fn=0,fe=ue=Y=null,pr=!1,Dr=0,Da.current=null,n===null||n.return===null){de=1,Ur=e,ae=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=pe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,g=d.tag;if(!(d.mode&1)&&(g===0||g===11||g===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=nc(o);if(m!==null){m.flags&=-257,rc(m,o,a,s,e),m.mode&1&&tc(s,c,e),e=m,l=c;var S=e.updateQueue;if(S===null){var k=new Set;k.add(l),e.updateQueue=k}else S.add(l);break e}else{if(!(e&1)){tc(s,c,e),ja();break e}l=Error(E(426))}}else if(J&&a.mode&1){var j=nc(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),rc(j,o,a,s,e),_a(Bn(l,a));break e}}s=l=Bn(l,a),de!==4&&(de=2),_r===null?_r=[s]:_r.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var h=_d(s,l,e);Jl(s,h);break e;case 1:a=l;var u=s.type,p=s.stateNode;if(!(s.flags&128)&&(typeof u.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Vt===null||!Vt.has(p)))){s.flags|=65536,e&=-e,s.lanes|=e;var y=vd(s,a,e);Jl(s,y);break e}}s=s.return}while(s!==null)}jd(n)}catch(x){e=x,ae===n&&n!==null&&(ae=n=n.return);continue}break}while(!0)}function Ud(){var t=Wi.current;return Wi.current=Hi,t===null?Hi:t}function ja(){(de===0||de===3||de===2)&&(de=4),he===null||!(hn&268435455)&&!(cs&268435455)||jt(he,pe)}function qi(t,e){var n=H;H|=2;var r=Ud();(he!==t||pe!==e)&&(wt=null,on(t,e));do try{Eg();break}catch(i){Ad(t,i)}while(!0);if(wa(),H=n,Wi.current=r,ae!==null)throw Error(E(261));return he=null,pe=0,de}function Eg(){for(;ae!==null;)Md(ae)}function Cg(){for(;ae!==null&&!Jf();)Md(ae)}function Md(t){var e=zd(t.alternate,t,Me);t.memoizedProps=t.pendingProps,e===null?jd(t):ae=e,Da.current=null}function jd(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_g(n,e),n!==null){n.flags&=32767,ae=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{de=6,ae=null;return}}else if(n=mg(n,e,Me),n!==null){ae=n;return}if(e=e.sibling,e!==null){ae=e;return}ae=e=t}while(e!==null);de===0&&(de=5)}function tn(t,e,n){var r=B,i=Ke.transition;try{Ke.transition=null,B=1,xg(t,e,n,r)}finally{Ke.transition=i,B=r}return null}function xg(t,e,n,r){do On();while(zt!==null);if(H&6)throw Error(E(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(sh(t,s),t===he&&(ae=he=null,pe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ai||(ai=!0,$d(Ti,function(){return On(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ke.transition,Ke.transition=null;var o=B;B=1;var a=H;H|=4,Da.current=null,wg(t,n),bd(n,t),Vh(vo),Ri=!!_o,vo=_o=null,t.current=n,yg(n),Gf(),H=a,B=o,Ke.transition=s}else t.current=n;if(ai&&(ai=!1,zt=t,Vi=i),s=t.pendingLanes,s===0&&(Vt=null),Zf(n.stateNode),Ae(t,ie()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bi)throw Bi=!1,t=Oo,Oo=null,t;return Vi&1&&t.tag!==0&&On(),s=t.pendingLanes,s&1?t===zo?vr++:(vr=0,zo=t):vr=0,Yt(),null}function On(){if(zt!==null){var t=_u(Vi),e=Ke.transition,n=B;try{if(Ke.transition=null,B=16>t?16:t,zt===null)var r=!1;else{if(t=zt,zt=null,Vi=0,H&6)throw Error(E(331));var i=H;for(H|=4,R=t.current;R!==null;){var s=R,o=s.child;if(R.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(R=c;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:mr(8,d,s)}var g=d.child;if(g!==null)g.return=d,R=g;else for(;R!==null;){d=R;var f=d.sibling,m=d.return;if(Pd(d),d===c){R=null;break}if(f!==null){f.return=m,R=f;break}R=m}}}var S=s.alternate;if(S!==null){var k=S.child;if(k!==null){S.child=null;do{var j=k.sibling;k.sibling=null,k=j}while(k!==null)}}R=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,R=o;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:mr(9,s,s.return)}var h=s.sibling;if(h!==null){h.return=s.return,R=h;break e}R=s.return}}var u=t.current;for(R=u;R!==null;){o=R;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,R=p;else e:for(o=u;R!==null;){if(a=R,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ls(9,a)}}catch(x){re(a,a.return,x)}if(a===o){R=null;break e}var y=a.sibling;if(y!==null){y.return=a.return,R=y;break e}R=a.return}}if(H=i,Yt(),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(es,t)}catch{}r=!0}return r}finally{B=n,Ke.transition=e}}return!1}function mc(t,e,n){e=Bn(n,e),e=_d(t,e,1),t=Bt(t,e,1),e=Ie(),t!==null&&($r(t,1,e),Ae(t,e))}function re(t,e,n){if(t.tag===3)mc(t,t,n);else for(;e!==null;){if(e.tag===3){mc(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vt===null||!Vt.has(r))){t=Bn(n,t),t=vd(e,t,1),e=Bt(e,t,1),t=Ie(),e!==null&&($r(e,1,t),Ae(e,t));break}}e=e.return}}function Ig(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ie(),t.pingedLanes|=t.suspendedLanes&n,he===t&&(pe&n)===n&&(de===4||de===3&&(pe&130023424)===pe&&500>ie()-Aa?on(t,0):La|=n),Ae(t,e)}function Od(t,e){e===0&&(t.mode&1?(e=Xr,Xr<<=1,!(Xr&130023424)&&(Xr=4194304)):e=1);var n=Ie();t=Tt(t,e),t!==null&&($r(t,e,n),Ae(t,n))}function Tg(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Od(t,n)}function Pg(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),Od(t,n)}var zd;zd=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||De.current)be=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return be=!1,pg(t,e,n);be=!!(t.flags&131072)}else be=!1,J&&e.flags&1048576&&Wu(e,Mi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;wi(t,e),t=e.pendingProps;var i=$n(e,ke.current);jn(e,n),i=Ta(null,e,r,t,i,n);var s=Pa();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Le(r)?(s=!0,Ai(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ka(e),i.updater=as,e.stateNode=i,i._reactInternals=e,To(e,r,t,n),e=No(null,e,r,!0,s,n)):(e.tag=0,J&&s&&pa(e),Ce(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(wi(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Ng(r),t=Ze(r,t),i){case 0:e=Ro(null,e,r,t,n);break e;case 1:e=oc(null,e,r,t,n);break e;case 11:e=ic(null,e,r,t,n);break e;case 14:e=sc(null,e,r,Ze(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ze(r,i),Ro(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ze(r,i),oc(t,e,r,i,n);case 3:e:{if(kd(e),t===null)throw Error(E(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Ju(t,e),zi(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Bn(Error(E(423)),e),e=ac(t,e,r,n,i);break e}else if(r!==i){i=Bn(Error(E(424)),e),e=ac(t,e,r,n,i);break e}else for(je=Wt(e.stateNode.containerInfo.firstChild),ze=e,J=!0,tt=null,n=Ku(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fn(),r===i){e=Pt(t,e,n);break e}Ce(t,e,r,n)}e=e.child}return e;case 5:return Gu(e),t===null&&Co(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,wo(r,i)?o=null:s!==null&&wo(r,s)&&(e.flags|=32),Sd(t,e),Ce(t,e,o,n),e.child;case 6:return t===null&&Co(e),null;case 13:return Ed(t,e,n);case 4:return Ea(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hn(e,null,r,n):Ce(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ze(r,i),ic(t,e,r,i,n);case 7:return Ce(t,e,e.pendingProps,n),e.child;case 8:return Ce(t,e,e.pendingProps.children,n),e.child;case 12:return Ce(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,V(ji,r._currentValue),r._currentValue=o,s!==null)if(st(s.value,o)){if(s.children===i.children&&!De.current){e=Pt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ct(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),xo(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),xo(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ce(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,jn(e,n),i=Qe(i),r=r(i),e.flags|=1,Ce(t,e,r,n),e.child;case 14:return r=e.type,i=Ze(r,e.pendingProps),i=Ze(r.type,i),sc(t,e,r,i,n);case 15:return wd(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ze(r,i),wi(t,e),e.tag=1,Le(r)?(t=!0,Ai(e)):t=!1,jn(e,n),md(e,r,i),To(e,r,i,n),No(null,e,r,!0,t,n);case 19:return Cd(t,e,n);case 22:return yd(t,e,n)}throw Error(E(156,e.tag))};function $d(t,e){return hu(t,e)}function Rg(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qe(t,e,n,r){return new Rg(t,e,n,r)}function Oa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ng(t){if(typeof t=="function")return Oa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ra)return 11;if(t===ia)return 14}return 2}function Kt(t,e){var n=t.alternate;return n===null?(n=qe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ki(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Oa(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case kn:return an(n.children,i,s,e);case na:o=8,i|=8;break;case Gs:return t=qe(12,n,e,i|2),t.elementType=Gs,t.lanes=s,t;case Xs:return t=qe(13,n,e,i),t.elementType=Xs,t.lanes=s,t;case Ys:return t=qe(19,n,e,i),t.elementType=Ys,t.lanes=s,t;case Gc:return us(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Qc:o=10;break e;case Jc:o=9;break e;case ra:o=11;break e;case ia:o=14;break e;case Lt:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=qe(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function an(t,e,n,r){return t=qe(7,t,r,e),t.lanes=n,t}function us(t,e,n,r){return t=qe(22,t,r,e),t.elementType=Gc,t.lanes=n,t.stateNode={isHidden:!1},t}function Fs(t,e,n){return t=qe(6,t,null,e),t.lanes=n,t}function Hs(t,e,n){return e=qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bg(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ks(0),this.expirationTimes=ks(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ks(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function za(t,e,n,r,i,s,o,a,l){return t=new bg(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qe(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ka(s),t}function Dg(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Fd(t){if(!t)return Jt;t=t._reactInternals;e:{if(vn(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Le(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Le(n))return Fu(t,n,e)}return e}function Hd(t,e,n,r,i,s,o,a,l){return t=za(n,r,!0,t,i,s,o,a,l),t.context=Fd(null),n=t.current,r=Ie(),i=qt(n),s=Ct(r,i),s.callback=e??null,Bt(n,s,i),t.current.lanes=i,$r(t,i,r),Ae(t,r),t}function ds(t,e,n,r){var i=e.current,s=Ie(),o=qt(i);return n=Fd(n),e.context===null?e.context=n:e.pendingContext=n,e=Ct(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bt(i,e,o),t!==null&&(it(t,i,o,s),mi(t,i,o)),o}function Ki(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _c(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $a(t,e){_c(t,e),(t=t.alternate)&&_c(t,e)}function Lg(){return null}var Wd=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fa(t){this._internalRoot=t}fs.prototype.render=Fa.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));ds(t,e,null,null)};fs.prototype.unmount=Fa.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gn(function(){ds(null,t,null,null)}),e[It]=null}};function fs(t){this._internalRoot=t}fs.prototype.unstable_scheduleHydration=function(t){if(t){var e=yu();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mt.length&&e!==0&&e<Mt[n].priority;n++);Mt.splice(n,0,t),n===0&&ku(t)}};function Ha(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hs(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vc(){}function Ag(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ki(o);s.call(c)}}var o=Hd(e,r,t,0,null,!1,!1,"",vc);return t._reactRootContainer=o,t[It]=o.current,Tr(t.nodeType===8?t.parentNode:t),gn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ki(l);a.call(c)}}var l=za(t,0,!1,null,null,!1,!1,"",vc);return t._reactRootContainer=l,t[It]=l.current,Tr(t.nodeType===8?t.parentNode:t),gn(function(){ds(e,l,n,r)}),l}function gs(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ki(o);a.call(l)}}ds(e,o,t,i)}else o=Ag(n,e,t,i,r);return Ki(o)}vu=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ar(e.pendingLanes);n!==0&&(aa(e,n|1),Ae(e,ie()),!(H&6)&&(Vn=ie()+500,Yt()))}break;case 13:gn(function(){var r=Tt(t,1);if(r!==null){var i=Ie();it(r,t,1,i)}}),$a(t,1)}};la=function(t){if(t.tag===13){var e=Tt(t,134217728);if(e!==null){var n=Ie();it(e,t,134217728,n)}$a(t,134217728)}};wu=function(t){if(t.tag===13){var e=qt(t),n=Tt(t,e);if(n!==null){var r=Ie();it(n,t,e,r)}$a(t,e)}};yu=function(){return B};Su=function(t,e){var n=B;try{return B=t,e()}finally{B=n}};lo=function(t,e,n){switch(e){case"input":if(to(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=is(r);if(!i)throw Error(E(90));Yc(r),to(r,i)}}}break;case"textarea":eu(t,n);break;case"select":e=n.value,e!=null&&Ln(t,!!n.multiple,e,!1)}};au=Ua;lu=gn;var Ug={usingClientEntryPoint:!1,Events:[Hr,In,is,su,ou,Ua]},ir={findFiberByHostInstance:nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mg={bundleType:ir.bundleType,version:ir.version,rendererPackageName:ir.rendererPackageName,rendererConfig:ir.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=du(t),t===null?null:t.stateNode},findFiberByHostInstance:ir.findFiberByHostInstance||Lg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var li=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!li.isDisabled&&li.supportsFiber)try{es=li.inject(Mg),pt=li}catch{}}Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ug;Fe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ha(e))throw Error(E(200));return Dg(t,e,null,n)};Fe.createRoot=function(t,e){if(!Ha(t))throw Error(E(299));var n=!1,r="",i=Wd;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=za(t,1,!1,null,null,n,!1,r,i),t[It]=e.current,Tr(t.nodeType===8?t.parentNode:t),new Fa(e)};Fe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=du(e),t=t===null?null:t.stateNode,t};Fe.flushSync=function(t){return gn(t)};Fe.hydrate=function(t,e,n){if(!hs(e))throw Error(E(200));return gs(null,t,e,!0,n)};Fe.hydrateRoot=function(t,e,n){if(!Ha(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Wd;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Hd(e,null,t,1,n??null,i,!1,s,o),t[It]=e.current,Tr(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new fs(e)};Fe.render=function(t,e,n){if(!hs(e))throw Error(E(200));return gs(null,t,e,!1,n)};Fe.unmountComponentAtNode=function(t){if(!hs(t))throw Error(E(40));return t._reactRootContainer?(gn(function(){gs(null,null,t,!1,function(){t._reactRootContainer=null,t[It]=null})}),!0):!1};Fe.unstable_batchedUpdates=Ua;Fe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hs(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return gs(t,e,n,!1,r)};Fe.version="18.3.1-next-f1338f8080-20240426";function Bd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bd)}catch(t){console.error(t)}}Bd(),Bc.exports=Fe;var jg=Bc.exports,Vd,wc=jg;Vd=wc.createRoot,wc.hydrateRoot;class cr extends Error{}cr.prototype.name="InvalidTokenError";function Og(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function zg(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Og(e)}catch{return atob(e)}}function $g(t,e){if(typeof t!="string")throw new cr("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new cr(`Invalid token specified: missing part #${n+1}`);let i;try{i=zg(r)}catch(s){throw new cr(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new cr(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}var Fg={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},ft,ht,Qi=(t=>(t[t.NONE=0]="NONE",t[t.ERROR=1]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=3]="INFO",t[t.DEBUG=4]="DEBUG",t))(Qi||{});(t=>{function e(){ft=3,ht=Fg}t.reset=e;function n(i){if(!(0<=i&&i<=4))throw new Error("Invalid log level");ft=i}t.setLevel=n;function r(i){ht=i}t.setLogger=r})(Qi||(Qi={}));var F=class ut{constructor(e){this._name=e}debug(...e){ft>=4&&ht.debug(ut._format(this._name,this._method),...e)}info(...e){ft>=3&&ht.info(ut._format(this._name,this._method),...e)}warn(...e){ft>=2&&ht.warn(ut._format(this._name,this._method),...e)}error(...e){ft>=1&&ht.error(ut._format(this._name,this._method),...e)}throw(e){throw this.error(e),e}create(e){const n=Object.create(this);return n._method=e,n.debug("begin"),n}static createStatic(e,n){const r=new ut(`${e}.${n}`);return r.debug("begin"),r}static _format(e,n){const r=`[${e}]`;return n?`${r} ${n}:`:r}static debug(e,...n){ft>=4&&ht.debug(ut._format(e),...n)}static info(e,...n){ft>=3&&ht.info(ut._format(e),...n)}static warn(e,...n){ft>=2&&ht.warn(ut._format(e),...n)}static error(e,...n){ft>=1&&ht.error(ut._format(e),...n)}};Qi.reset();var Mr=class{static decode(t){try{return $g(t)}catch(e){throw F.error("JwtUtils.decode",e),e}}static async generateSignedJwt(t,e,n){const r=se.encodeBase64Url(new TextEncoder().encode(JSON.stringify(t))),i=se.encodeBase64Url(new TextEncoder().encode(JSON.stringify(e))),s=`${r}.${i}`,o=await window.crypto.subtle.sign({name:"ECDSA",hash:{name:"SHA-256"}},n,new TextEncoder().encode(s)),a=se.encodeBase64Url(new Uint8Array(o));return`${s}.${a}`}static async generateSignedJwtWithHmac(t,e,n){const r=se.encodeBase64Url(new TextEncoder().encode(JSON.stringify(t))),i=se.encodeBase64Url(new TextEncoder().encode(JSON.stringify(e))),s=`${r}.${i}`,o=await window.crypto.subtle.sign("HMAC",n,new TextEncoder().encode(s)),a=se.encodeBase64Url(new Uint8Array(o));return`${s}.${a}`}},Hg="10000000-1000-4000-8000-100000000000",Ho=t=>btoa([...new Uint8Array(t)].map(e=>String.fromCharCode(e)).join("")),qd=class Ye{static _randomWord(){const e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}static generateUUIDv4(){return Hg.replace(/[018]/g,n=>(+n^Ye._randomWord()&15>>+n/4).toString(16)).replace(/-/g,"")}static generateCodeVerifier(){return Ye.generateUUIDv4()+Ye.generateUUIDv4()+Ye.generateUUIDv4()}static async generateCodeChallenge(e){if(!crypto.subtle)throw new Error("Crypto.subtle is available only in secure contexts (HTTPS).");try{const r=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",r);return Ho(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(n){throw F.error("CryptoUtils.generateCodeChallenge",n),n}}static generateBasicAuth(e,n){const i=new TextEncoder().encode([e,n].join(":"));return Ho(i)}static async hash(e,n){const r=new TextEncoder().encode(n),i=await crypto.subtle.digest(e,r);return new Uint8Array(i)}static async customCalculateJwkThumbprint(e){let n;switch(e.kty){case"RSA":n={e:e.e,kty:e.kty,n:e.n};break;case"EC":n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":n={crv:e.crv,kty:e.kty,x:e.x};break;case"oct":n={crv:e.k,kty:e.kty};break;default:throw new Error("Unknown jwk type")}const r=await Ye.hash("SHA-256",JSON.stringify(n));return Ye.encodeBase64Url(r)}static async generateDPoPProof({url:e,accessToken:n,httpMethod:r,keyPair:i,nonce:s}){let o,a;const l={jti:window.crypto.randomUUID(),htm:r??"GET",htu:e,iat:Math.floor(Date.now()/1e3)};n&&(o=await Ye.hash("SHA-256",n),a=Ye.encodeBase64Url(o),l.ath=a),s&&(l.nonce=s);try{const c=await crypto.subtle.exportKey("jwk",i.publicKey),d={alg:"ES256",typ:"dpop+jwt",jwk:{crv:c.crv,kty:c.kty,x:c.x,y:c.y}};return await Mr.generateSignedJwt(d,l,i.privateKey)}catch(c){throw c instanceof TypeError?new Error(`Error exporting dpop public key: ${c.message}`):c}}static async generateDPoPJkt(e){try{const n=await crypto.subtle.exportKey("jwk",e.publicKey);return await Ye.customCalculateJwkThumbprint(n)}catch(n){throw n instanceof TypeError?new Error(`Could not retrieve dpop keys from storage: ${n.message}`):n}}static async generateDPoPKeys(){return await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign","verify"])}static async generateClientAssertionJwt(e,n,r,i="HS256"){const s=Math.floor(Date.now()/1e3),o={alg:i,typ:"JWT"},a={iss:e,sub:e,aud:r,jti:Ye.generateUUIDv4(),exp:s+300,iat:s},c={HS256:"SHA-256",HS384:"SHA-384",HS512:"SHA-512"}[i];if(!c)throw new Error(`Unsupported algorithm: ${i}. Supported algorithms are: HS256, HS384, HS512`);const d=new TextEncoder,g=await crypto.subtle.importKey("raw",d.encode(n),{name:"HMAC",hash:c},!1,["sign"]);return await Mr.generateSignedJwtWithHmac(o,a,g)}};qd.encodeBase64Url=t=>Ho(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");var se=qd,Ut=class{constructor(t){this._name=t,this._callbacks=[],this._logger=new F(`Event('${this._name}')`)}addHandler(t){return this._callbacks.push(t),()=>this.removeHandler(t)}removeHandler(t){const e=this._callbacks.lastIndexOf(t);e>=0&&this._callbacks.splice(e,1)}async raise(...t){this._logger.debug("raise:",...t);for(const e of this._callbacks)await e(...t)}},yc=class{static center({...t}){var e,n,r;return t.width==null&&(t.width=(e=[800,720,600,480].find(i=>i<=window.outerWidth/1.618))!=null?e:360),(n=t.left)!=null||(t.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-t.width)/2))),t.height!=null&&((r=t.top)!=null||(t.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-t.height)/2)))),t}static serialize(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}=${typeof n!="boolean"?n:n?"yes":"no"}`).join(",")}},Rt=class Ei extends Ut{constructor(){super(...arguments),this._logger=new F(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{const e=this._expiration-Ei.getEpochTime();this._logger.debug("timer completes in",e),this._expiration<=Ei.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(e){const n=this._logger.create("init");e=Math.max(Math.floor(e),1);const r=Ei.getEpochTime()+e;if(this.expiration===r&&this._timerHandle){n.debug("skipping since already initialized for expiration at",this.expiration);return}this.cancel(),n.debug("using duration",e),this._expiration=r;const i=Math.min(e,5);this._timerHandle=setInterval(this._callback,i*1e3)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},Wo=class{static readParams(t,e="query"){if(!t)throw new TypeError("Invalid URL");const r=new URL(t,"http://127.0.0.1")[e==="fragment"?"hash":"search"];return new URLSearchParams(r.slice(1))}},qn=";",pn=class extends Error{constructor(t,e){var n,r,i;if(super(t.error_description||t.error||""),this.form=e,this.name="ErrorResponse",!t.error)throw F.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=t.error,this.error_description=(n=t.error_description)!=null?n:null,this.error_uri=(r=t.error_uri)!=null?r:null,this.state=t.userState,this.session_state=(i=t.session_state)!=null?i:null,this.url_state=t.url_state}},Wa=class extends Error{constructor(t){super(t),this.name="ErrorTimeout"}},Wg=class{constructor(t){this._logger=new F("AccessTokenEvents"),this._expiringTimer=new Rt("Access token expiring"),this._expiredTimer=new Rt("Access token expired"),this._expiringNotificationTimeInSeconds=t.expiringNotificationTimeInSeconds}async load(t){const e=this._logger.create("load");if(t.access_token&&t.expires_in!==void 0){const n=t.expires_in;if(e.debug("access token present, remaining duration:",n),n>0){let i=n-this._expiringNotificationTimeInSeconds;i<=0&&(i=1),e.debug("registering expiring timer, raising in",i,"seconds"),this._expiringTimer.init(i)}else e.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();const r=n+1;e.debug("registering expired timer, raising in",r,"seconds"),this._expiredTimer.init(r)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}async unload(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}addAccessTokenExpiring(t){return this._expiringTimer.addHandler(t)}removeAccessTokenExpiring(t){this._expiringTimer.removeHandler(t)}addAccessTokenExpired(t){return this._expiredTimer.addHandler(t)}removeAccessTokenExpired(t){this._expiredTimer.removeHandler(t)}},Bg=class{constructor(t,e,n,r,i){this._callback=t,this._client_id=e,this._intervalInSeconds=r,this._stopOnError=i,this._logger=new F("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=o=>{o.origin===this._frame_origin&&o.source===this._frame.contentWindow&&(o.data==="error"?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):o.data==="changed"?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(o.data+" message from check session op iframe"))};const s=new URL(n);this._frame_origin=s.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=s.href}load(){return new Promise(t=>{this._frame.onload=()=>{t()},window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)})}start(t){if(this._session_state===t)return;this._logger.create("start"),this.stop(),this._session_state=t;const e=()=>{!this._frame.contentWindow||!this._session_state||this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};e(),this._timer=setInterval(e,this._intervalInSeconds*1e3)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}},Kd=class{constructor(){this._logger=new F("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(t){return this._logger.create(`getItem('${t}')`),this._data[t]}setItem(t,e){this._logger.create(`setItem('${t}')`),this._data[t]=e}removeItem(t){this._logger.create(`removeItem('${t}')`),delete this._data[t]}get length(){return Object.getOwnPropertyNames(this._data).length}key(t){return Object.getOwnPropertyNames(this._data)[t]}},Bo=class extends Error{constructor(t,e){super(e),this.name="ErrorDPoPNonce",this.nonce=t}},Ba=class{constructor(t=[],e=null,n={}){this._jwtHandler=e,this._extraHeaders=n,this._logger=new F("JsonService"),this._contentTypes=[],this._contentTypes.push(...t,"application/json"),e&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(t,e={}){const{timeoutInSeconds:n,...r}=e;if(!n)return await fetch(t,r);const i=new AbortController,s=setTimeout(()=>i.abort(),n*1e3);try{return await fetch(t,{...e,signal:i.signal})}catch(o){throw o instanceof DOMException&&o.name==="AbortError"?new Wa("Network timed out"):o}finally{clearTimeout(s)}}async getJson(t,{token:e,credentials:n,timeoutInSeconds:r}={}){const i=this._logger.create("getJson"),s={Accept:this._contentTypes.join(", ")};e&&(i.debug("token passed, setting Authorization header"),s.Authorization="Bearer "+e),this._appendExtraHeaders(s);let o;try{i.debug("url:",t),o=await this.fetchWithTimeout(t,{method:"GET",headers:s,timeoutInSeconds:r,credentials:n})}catch(c){throw i.error("Network Error"),c}i.debug("HTTP response received, status",o.status);const a=o.headers.get("Content-Type");if(a&&!this._contentTypes.find(c=>a.startsWith(c))&&i.throw(new Error(`Invalid response Content-Type: ${a??"undefined"}, from URL: ${t}`)),o.ok&&this._jwtHandler&&(a!=null&&a.startsWith("application/jwt")))return await this._jwtHandler(await o.text());let l;try{l=await o.json()}catch(c){throw i.error("Error parsing JSON response",c),o.ok?c:new Error(`${o.statusText} (${o.status})`)}if(!o.ok)throw i.error("Error from server:",l),l.error?new pn(l):new Error(`${o.statusText} (${o.status}): ${JSON.stringify(l)}`);return l}async postForm(t,{body:e,basicAuth:n,timeoutInSeconds:r,initCredentials:i,extraHeaders:s}){const o=this._logger.create("postForm"),a={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded",...s};n!==void 0&&(a.Authorization="Basic "+n),this._appendExtraHeaders(a);let l;try{o.debug("url:",t),l=await this.fetchWithTimeout(t,{method:"POST",headers:a,body:e,timeoutInSeconds:r,credentials:i})}catch(f){throw o.error("Network error"),f}o.debug("HTTP response received, status",l.status);const c=l.headers.get("Content-Type");if(c&&!this._contentTypes.find(f=>c.startsWith(f)))throw new Error(`Invalid response Content-Type: ${c??"undefined"}, from URL: ${t}`);const d=await l.text();let g={};if(d)try{g=JSON.parse(d)}catch(f){throw o.error("Error parsing JSON response",f),l.ok?f:new Error(`${l.statusText} (${l.status})`)}if(!l.ok){if(o.error("Error from server:",g),l.headers.has("dpop-nonce")){const f=l.headers.get("dpop-nonce");throw new Bo(f,`${JSON.stringify(g)}`)}throw g.error?new pn(g,e):new Error(`${l.statusText} (${l.status}): ${JSON.stringify(g)}`)}return g}_appendExtraHeaders(t){const e=this._logger.create("appendExtraHeaders"),n=Object.keys(this._extraHeaders),r=["accept","content-type"],i=["authorization"];n.length!==0&&n.forEach(s=>{if(r.includes(s.toLocaleLowerCase())){e.warn("Protected header could not be set",s,r);return}if(i.includes(s.toLocaleLowerCase())&&Object.keys(t).includes(s)){e.warn("Header could not be overridden",s,i);return}const o=typeof this._extraHeaders[s]=="function"?this._extraHeaders[s]():this._extraHeaders[s];o&&o!==""&&(t[s]=o)})}},Vg=class{constructor(t){this._settings=t,this._logger=new F("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new Ba(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){const t=this._logger.create("getMetadata");if(this._metadata)return t.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw t.throw(new Error("No authority or metadataUrl configured on settings")),null;t.debug("getting metadata from",this._metadataUrl);const e=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials,timeoutInSeconds:this._settings.requestTimeoutInSeconds});return t.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},e,this._settings.metadataSeed),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(t=!0){return this._getMetadataProperty("token_endpoint",t)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(t=!0){return this._getMetadataProperty("revocation_endpoint",t)}getKeysEndpoint(t=!0){return this._getMetadataProperty("jwks_uri",t)}async _getMetadataProperty(t,e=!1){const n=this._logger.create(`_getMetadataProperty('${t}')`),r=await this.getMetadata();if(n.debug("resolved"),r[t]===void 0){if(e===!0){n.warn("Metadata does not contain optional property");return}n.throw(new Error("Metadata does not contain property "+t))}return r[t]}async getSigningKeys(){const t=this._logger.create("getSigningKeys");if(this._signingKeys)return t.debug("returning signingKeys from cache"),this._signingKeys;const e=await this.getKeysEndpoint(!1);t.debug("got jwks_uri",e);const n=await this._jsonService.getJson(e,{timeoutInSeconds:this._settings.requestTimeoutInSeconds});if(t.debug("got key set",n),!Array.isArray(n.keys))throw t.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=n.keys,this._signingKeys}},Ji=class{constructor({prefix:t="oidc.",store:e=localStorage}={}){this._logger=new F("WebStorageStateStore"),this._store=e,this._prefix=t}async set(t,e){this._logger.create(`set('${t}')`),t=this._prefix+t,await this._store.setItem(t,e)}async get(t){return this._logger.create(`get('${t}')`),t=this._prefix+t,await this._store.getItem(t)}async remove(t){this._logger.create(`remove('${t}')`),t=this._prefix+t;const e=await this._store.getItem(t);return await this._store.removeItem(t),e}async getAllKeys(){this._logger.create("getAllKeys");const t=await this._store.length,e=[];for(let n=0;n<t;n++){const r=await this._store.key(n);r&&r.indexOf(this._prefix)===0&&e.push(r.substr(this._prefix.length))}return e}},qg="code",Kg="openid",Qg="client_secret_post",Jg=60*15,Vo=class{constructor({authority:t,metadataUrl:e,metadata:n,signingKeys:r,metadataSeed:i,client_id:s,client_secret:o,response_type:a=qg,scope:l=Kg,redirect_uri:c,post_logout_redirect_uri:d,client_authentication:g=Qg,token_endpoint_auth_signing_alg:f="HS256",prompt:m,display:S,max_age:k,ui_locales:j,acr_values:h,resource:u,response_mode:p,filterProtocolClaims:y=!0,loadUserInfo:x=!1,requestTimeoutInSeconds:C,staleStateAgeInSeconds:T=Jg,mergeClaimsStrategy:I={array:"replace"},disablePKCE:$=!1,stateStore:L,revokeTokenAdditionalContentTypes:le,fetchRequestCredentials:Ee,refreshTokenAllowedScope:_t,extraQueryParams:Ge={},extraTokenParams:wn={},extraHeaders:ot={},dpop:Zt,omitScopeWhenRequesting:P=!1}){var b;if(this.authority=t,e?this.metadataUrl=e:(this.metadataUrl=t,t&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=n,this.metadataSeed=i,this.signingKeys=r,this.client_id=s,this.client_secret=o,this.response_type=a,this.scope=l,this.redirect_uri=c,this.post_logout_redirect_uri=d,this.client_authentication=g,this.token_endpoint_auth_signing_alg=f,this.prompt=m,this.display=S,this.max_age=k,this.ui_locales=j,this.acr_values=h,this.resource=u,this.response_mode=p,this.filterProtocolClaims=y??!0,this.loadUserInfo=!!x,this.staleStateAgeInSeconds=T,this.mergeClaimsStrategy=I,this.omitScopeWhenRequesting=P,this.disablePKCE=!!$,this.revokeTokenAdditionalContentTypes=le,this.fetchRequestCredentials=Ee||"same-origin",this.requestTimeoutInSeconds=C,L)this.stateStore=L;else{const U=typeof window<"u"?window.localStorage:new Kd;this.stateStore=new Ji({store:U})}if(this.refreshTokenAllowedScope=_t,this.extraQueryParams=Ge,this.extraTokenParams=wn,this.extraHeaders=ot,this.dpop=Zt,this.dpop&&!((b=this.dpop)!=null&&b.store))throw new Error("A DPoPStore is required when dpop is enabled")}},Gg=class{constructor(t,e){this._settings=t,this._metadataService=e,this._logger=new F("UserInfoService"),this._getClaimsFromJwt=async n=>{const r=this._logger.create("_getClaimsFromJwt");try{const i=Mr.decode(n);return r.debug("JWT decoding successful"),i}catch(i){throw r.error("Error parsing JWT response"),i}},this._jsonService=new Ba(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(t){const e=this._logger.create("getClaims");t||this._logger.throw(new Error("No token passed"));const n=await this._metadataService.getUserInfoEndpoint();e.debug("got userinfo url",n);const r=await this._jsonService.getJson(n,{token:t,credentials:this._settings.fetchRequestCredentials,timeoutInSeconds:this._settings.requestTimeoutInSeconds});return e.debug("got claims",r),r}},Qd=class{constructor(t,e){this._settings=t,this._metadataService=e,this._logger=new F("TokenClient"),this._jsonService=new Ba(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode({grant_type:t="authorization_code",redirect_uri:e=this._settings.redirect_uri,client_id:n=this._settings.client_id,client_secret:r=this._settings.client_secret,extraHeaders:i,...s}){const o=this._logger.create("exchangeCode");n||o.throw(new Error("A client_id is required")),e||o.throw(new Error("A redirect_uri is required")),s.code||o.throw(new Error("A code is required"));const a=new URLSearchParams({grant_type:t,redirect_uri:e});for(const[g,f]of Object.entries(s))f!=null&&a.set(g,f);if((this._settings.client_authentication==="client_secret_basic"||this._settings.client_authentication==="client_secret_jwt")&&r==null)throw o.throw(new Error("A client_secret is required")),null;let l;const c=await this._metadataService.getTokenEndpoint(!1);switch(this._settings.client_authentication){case"client_secret_basic":l=se.generateBasicAuth(n,r);break;case"client_secret_post":a.append("client_id",n),r&&a.append("client_secret",r);break;case"client_secret_jwt":{const g=await se.generateClientAssertionJwt(n,r,c,this._settings.token_endpoint_auth_signing_alg);a.append("client_id",n),a.append("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),a.append("client_assertion",g);break}}o.debug("got token endpoint");const d=await this._jsonService.postForm(c,{body:a,basicAuth:l,timeoutInSeconds:this._settings.requestTimeoutInSeconds,initCredentials:this._settings.fetchRequestCredentials,extraHeaders:i});return o.debug("got response"),d}async exchangeCredentials({grant_type:t="password",client_id:e=this._settings.client_id,client_secret:n=this._settings.client_secret,scope:r=this._settings.scope,...i}){const s=this._logger.create("exchangeCredentials");e||s.throw(new Error("A client_id is required"));const o=new URLSearchParams({grant_type:t});this._settings.omitScopeWhenRequesting||o.set("scope",r);for(const[d,g]of Object.entries(i))g!=null&&o.set(d,g);if((this._settings.client_authentication==="client_secret_basic"||this._settings.client_authentication==="client_secret_jwt")&&n==null)throw s.throw(new Error("A client_secret is required")),null;let a;const l=await this._metadataService.getTokenEndpoint(!1);switch(this._settings.client_authentication){case"client_secret_basic":a=se.generateBasicAuth(e,n);break;case"client_secret_post":o.append("client_id",e),n&&o.append("client_secret",n);break;case"client_secret_jwt":{const d=await se.generateClientAssertionJwt(e,n,l,this._settings.token_endpoint_auth_signing_alg);o.append("client_id",e),o.append("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),o.append("client_assertion",d);break}}s.debug("got token endpoint");const c=await this._jsonService.postForm(l,{body:o,basicAuth:a,timeoutInSeconds:this._settings.requestTimeoutInSeconds,initCredentials:this._settings.fetchRequestCredentials});return s.debug("got response"),c}async exchangeRefreshToken({grant_type:t="refresh_token",client_id:e=this._settings.client_id,client_secret:n=this._settings.client_secret,timeoutInSeconds:r,extraHeaders:i,...s}){const o=this._logger.create("exchangeRefreshToken");e||o.throw(new Error("A client_id is required")),s.refresh_token||o.throw(new Error("A refresh_token is required"));const a=new URLSearchParams({grant_type:t});for(const[g,f]of Object.entries(s))Array.isArray(f)?f.forEach(m=>a.append(g,m)):f!=null&&a.set(g,f);if((this._settings.client_authentication==="client_secret_basic"||this._settings.client_authentication==="client_secret_jwt")&&n==null)throw o.throw(new Error("A client_secret is required")),null;let l;const c=await this._metadataService.getTokenEndpoint(!1);switch(this._settings.client_authentication){case"client_secret_basic":l=se.generateBasicAuth(e,n);break;case"client_secret_post":a.append("client_id",e),n&&a.append("client_secret",n);break;case"client_secret_jwt":{const g=await se.generateClientAssertionJwt(e,n,c,this._settings.token_endpoint_auth_signing_alg);a.append("client_id",e),a.append("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),a.append("client_assertion",g);break}}o.debug("got token endpoint");const d=await this._jsonService.postForm(c,{body:a,basicAuth:l,timeoutInSeconds:r,initCredentials:this._settings.fetchRequestCredentials,extraHeaders:i});return o.debug("got response"),d}async revoke(t){var e;const n=this._logger.create("revoke");t.token||n.throw(new Error("A token is required"));const r=await this._metadataService.getRevocationEndpoint(!1);n.debug(`got revocation endpoint, revoking ${(e=t.token_type_hint)!=null?e:"default token type"}`);const i=new URLSearchParams;for(const[s,o]of Object.entries(t))o!=null&&i.set(s,o);i.set("client_id",this._settings.client_id),this._settings.client_secret&&i.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(r,{body:i,timeoutInSeconds:this._settings.requestTimeoutInSeconds}),n.debug("got response")}},Xg=class{constructor(t,e,n){this._settings=t,this._metadataService=e,this._claimsService=n,this._logger=new F("ResponseValidator"),this._userInfoService=new Gg(this._settings,this._metadataService),this._tokenClient=new Qd(this._settings,this._metadataService)}async validateSigninResponse(t,e,n){const r=this._logger.create("validateSigninResponse");this._processSigninState(t,e),r.debug("state processed"),await this._processCode(t,e,n),r.debug("code processed"),t.isOpenId&&this._validateIdTokenAttributes(t),r.debug("tokens validated"),await this._processClaims(t,e==null?void 0:e.skipUserInfo,t.isOpenId),r.debug("claims processed")}async validateCredentialsResponse(t,e){const n=this._logger.create("validateCredentialsResponse"),r=t.isOpenId&&!!t.id_token;r&&this._validateIdTokenAttributes(t),n.debug("tokens validated"),await this._processClaims(t,e,r),n.debug("claims processed")}async validateRefreshResponse(t,e){var n,r;const i=this._logger.create("validateRefreshResponse");t.userState=e.data,(n=t.session_state)!=null||(t.session_state=e.session_state),(r=t.scope)!=null||(t.scope=e.scope),t.isOpenId&&t.id_token&&(this._validateIdTokenAttributes(t,e.id_token),i.debug("ID Token validated")),t.id_token||(t.id_token=e.id_token,t.profile=e.profile);const s=t.isOpenId&&!!t.id_token;await this._processClaims(t,!1,s),i.debug("claims processed")}validateSignoutResponse(t,e){const n=this._logger.create("validateSignoutResponse");if(e.id!==t.state&&n.throw(new Error("State does not match")),n.debug("state validated"),t.userState=e.data,t.error)throw n.warn("Response was error",t.error),new pn(t)}_processSigninState(t,e){var n;const r=this._logger.create("_processSigninState");if(e.id!==t.state&&r.throw(new Error("State does not match")),e.client_id||r.throw(new Error("No client_id on state")),e.authority||r.throw(new Error("No authority on state")),this._settings.authority!==e.authority&&r.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==e.client_id&&r.throw(new Error("client_id mismatch on settings vs. signin state")),r.debug("state validated"),t.userState=e.data,t.url_state=e.url_state,(n=t.scope)!=null||(t.scope=e.scope),t.error)throw r.warn("Response was error",t.error),new pn(t);e.code_verifier&&!t.code&&r.throw(new Error("Expected code in response"))}async _processClaims(t,e=!1,n=!0){const r=this._logger.create("_processClaims");if(t.profile=this._claimsService.filterProtocolClaims(t.profile),e||!this._settings.loadUserInfo||!t.access_token){r.debug("not loading user info");return}r.debug("loading user info");const i=await this._userInfoService.getClaims(t.access_token);r.debug("user info claims received from user info endpoint"),n&&i.sub!==t.profile.sub&&r.throw(new Error("subject from UserInfo response does not match subject in ID Token")),t.profile=this._claimsService.mergeClaims(t.profile,this._claimsService.filterProtocolClaims(i)),r.debug("user info claims received, updated profile:",t.profile)}async _processCode(t,e,n){const r=this._logger.create("_processCode");if(t.code){r.debug("Validating code");const i=await this._tokenClient.exchangeCode({client_id:e.client_id,client_secret:e.client_secret,code:t.code,redirect_uri:e.redirect_uri,code_verifier:e.code_verifier,extraHeaders:n,...e.extraTokenParams});Object.assign(t,i)}else r.debug("No code to process")}_validateIdTokenAttributes(t,e){var n;const r=this._logger.create("_validateIdTokenAttributes");r.debug("decoding ID Token JWT");const i=Mr.decode((n=t.id_token)!=null?n:"");if(i.sub||r.throw(new Error("ID Token is missing a subject claim")),e){const s=Mr.decode(e);i.sub!==s.sub&&r.throw(new Error("sub in id_token does not match current sub")),i.auth_time&&i.auth_time!==s.auth_time&&r.throw(new Error("auth_time in id_token does not match original auth_time")),i.azp&&i.azp!==s.azp&&r.throw(new Error("azp in id_token does not match original azp")),!i.azp&&s.azp&&r.throw(new Error("azp not in id_token, but present in original id_token"))}t.profile=i}},Gi=class qo{constructor(e){this.id=e.id||se.generateUUIDv4(),this.data=e.data,e.created&&e.created>0?this.created=e.created:this.created=Rt.getEpochTime(),this.request_type=e.request_type,this.url_state=e.url_state}toStorageString(){return new F("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state})}static fromStorageString(e){return F.createStatic("State","fromStorageString"),Promise.resolve(new qo(JSON.parse(e)))}static async clearStaleState(e,n){const r=F.createStatic("State","clearStaleState"),i=Rt.getEpochTime()-n,s=await e.getAllKeys();r.debug("got keys",s);for(let o=0;o<s.length;o++){const a=s[o],l=await e.get(a);let c=!1;if(l)try{const d=await qo.fromStorageString(l);r.debug("got item from key:",a,d.created),d.created<=i&&(c=!0)}catch(d){r.error("Error parsing state for key:",a,d),c=!0}else r.debug("no item in storage for key:",a),c=!0;c&&(r.debug("removed item for key:",a),e.remove(a))}}},Jd=class Ko extends Gi{constructor(e){super(e),this.code_verifier=e.code_verifier,this.code_challenge=e.code_challenge,this.authority=e.authority,this.client_id=e.client_id,this.redirect_uri=e.redirect_uri,this.scope=e.scope,this.client_secret=e.client_secret,this.extraTokenParams=e.extraTokenParams,this.response_mode=e.response_mode,this.skipUserInfo=e.skipUserInfo}static async create(e){const n=e.code_verifier===!0?se.generateCodeVerifier():e.code_verifier||void 0,r=n?await se.generateCodeChallenge(n):void 0;return new Ko({...e,code_verifier:n,code_challenge:r})}toStorageString(){return new F("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(e){F.createStatic("SigninState","fromStorageString");const n=JSON.parse(e);return Ko.create(n)}},Gd=class Xd{constructor(e){this.url=e.url,this.state=e.state}static async create({url:e,authority:n,client_id:r,redirect_uri:i,response_type:s,scope:o,state_data:a,response_mode:l,request_type:c,client_secret:d,nonce:g,url_state:f,resource:m,skipUserInfo:S,extraQueryParams:k,extraTokenParams:j,disablePKCE:h,dpopJkt:u,omitScopeWhenRequesting:p,...y}){if(!e)throw this._logger.error("create: No url passed"),new Error("url");if(!r)throw this._logger.error("create: No client_id passed"),new Error("client_id");if(!i)throw this._logger.error("create: No redirect_uri passed"),new Error("redirect_uri");if(!s)throw this._logger.error("create: No response_type passed"),new Error("response_type");if(!o)throw this._logger.error("create: No scope passed"),new Error("scope");if(!n)throw this._logger.error("create: No authority passed"),new Error("authority");const x=await Jd.create({data:a,request_type:c,url_state:f,code_verifier:!h,client_id:r,authority:n,redirect_uri:i,response_mode:l,client_secret:d,scope:o,extraTokenParams:j,skipUserInfo:S}),C=new URL(e);C.searchParams.append("client_id",r),C.searchParams.append("redirect_uri",i),C.searchParams.append("response_type",s),p||C.searchParams.append("scope",o),g&&C.searchParams.append("nonce",g),u&&C.searchParams.append("dpop_jkt",u);let T=x.id;f&&(T=`${T}${qn}${f}`),C.searchParams.append("state",T),x.code_challenge&&(C.searchParams.append("code_challenge",x.code_challenge),C.searchParams.append("code_challenge_method","S256")),m&&(Array.isArray(m)?m:[m]).forEach($=>C.searchParams.append("resource",$));for(const[I,$]of Object.entries({response_mode:l,...y,...k}))$!=null&&C.searchParams.append(I,$.toString());return new Xd({url:C.href,state:x})}};Gd._logger=new F("SigninRequest");var Yg=Gd,Zg="openid",Ws=class{constructor(t){if(this.access_token="",this.token_type="",this.profile={},this.state=t.get("state"),this.session_state=t.get("session_state"),this.state){const e=decodeURIComponent(this.state).split(qn);this.state=e[0],e.length>1&&(this.url_state=e.slice(1).join(qn))}this.error=t.get("error"),this.error_description=t.get("error_description"),this.error_uri=t.get("error_uri"),this.code=t.get("code")}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-Rt.getEpochTime()}set expires_in(t){typeof t=="string"&&(t=Number(t)),t!==void 0&&t>=0&&(this.expires_at=Math.floor(t)+Rt.getEpochTime())}get isOpenId(){var t;return((t=this.scope)==null?void 0:t.split(" ").includes(Zg))||!!this.id_token}},ep=class{constructor({url:t,state_data:e,id_token_hint:n,post_logout_redirect_uri:r,extraQueryParams:i,request_type:s,client_id:o,url_state:a}){if(this._logger=new F("SignoutRequest"),!t)throw this._logger.error("ctor: No url passed"),new Error("url");const l=new URL(t);if(n&&l.searchParams.append("id_token_hint",n),o&&l.searchParams.append("client_id",o),r&&(l.searchParams.append("post_logout_redirect_uri",r),e||a)){this.state=new Gi({data:e,request_type:s,url_state:a});let c=this.state.id;a&&(c=`${c}${qn}${a}`),l.searchParams.append("state",c)}for(const[c,d]of Object.entries({...i}))d!=null&&l.searchParams.append(c,d.toString());this.url=l.href}},tp=class{constructor(t){if(this.state=t.get("state"),this.state){const e=decodeURIComponent(this.state).split(qn);this.state=e[0],e.length>1&&(this.url_state=e.slice(1).join(qn))}this.error=t.get("error"),this.error_description=t.get("error_description"),this.error_uri=t.get("error_uri")}},np=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],rp=["sub","iss","aud","exp","iat"],ip=class{constructor(t){this._settings=t,this._logger=new F("ClaimsService")}filterProtocolClaims(t){const e={...t};if(this._settings.filterProtocolClaims){let n;Array.isArray(this._settings.filterProtocolClaims)?n=this._settings.filterProtocolClaims:n=np;for(const r of n)rp.includes(r)||delete e[r]}return e}mergeClaims(t,e){const n={...t};for(const[r,i]of Object.entries(e))if(n[r]!==i)if(Array.isArray(n[r])||Array.isArray(i))if(this._settings.mergeClaimsStrategy.array=="replace")n[r]=i;else{const s=Array.isArray(n[r])?n[r]:[n[r]];for(const o of Array.isArray(i)?i:[i])s.includes(o)||s.push(o);n[r]=s}else typeof n[r]=="object"&&typeof i=="object"?n[r]=this.mergeClaims(n[r],i):n[r]=i;return n}},Yd=class{constructor(t,e){this.keys=t,this.nonce=e}},sp=class{constructor(t,e){this._logger=new F("OidcClient"),this.settings=t instanceof Vo?t:new Vo(t),this.metadataService=e??new Vg(this.settings),this._claimsService=new ip(this.settings),this._validator=new Xg(this.settings,this.metadataService,this._claimsService),this._tokenClient=new Qd(this.settings,this.metadataService)}async createSigninRequest({state:t,request:e,request_uri:n,request_type:r,id_token_hint:i,login_hint:s,skipUserInfo:o,nonce:a,url_state:l,response_type:c=this.settings.response_type,scope:d=this.settings.scope,redirect_uri:g=this.settings.redirect_uri,prompt:f=this.settings.prompt,display:m=this.settings.display,max_age:S=this.settings.max_age,ui_locales:k=this.settings.ui_locales,acr_values:j=this.settings.acr_values,resource:h=this.settings.resource,response_mode:u=this.settings.response_mode,extraQueryParams:p=this.settings.extraQueryParams,extraTokenParams:y=this.settings.extraTokenParams,dpopJkt:x,omitScopeWhenRequesting:C=this.settings.omitScopeWhenRequesting}){const T=this._logger.create("createSigninRequest");if(c!=="code")throw new Error("Only the Authorization Code flow (with PKCE) is supported");const I=await this.metadataService.getAuthorizationEndpoint();T.debug("Received authorization endpoint",I);const $=await Yg.create({url:I,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:g,response_type:c,scope:d,state_data:t,url_state:l,prompt:f,display:m,max_age:S,ui_locales:k,id_token_hint:i,login_hint:s,acr_values:j,dpopJkt:x,resource:h,request:e,request_uri:n,extraQueryParams:p,extraTokenParams:y,request_type:r,response_mode:u,client_secret:this.settings.client_secret,skipUserInfo:o,nonce:a,disablePKCE:this.settings.disablePKCE,omitScopeWhenRequesting:C});await this.clearStaleState();const L=$.state;return await this.settings.stateStore.set(L.id,L.toStorageString()),$}async readSigninResponseState(t,e=!1){const n=this._logger.create("readSigninResponseState"),r=new Ws(Wo.readParams(t,this.settings.response_mode));if(!r.state)throw n.throw(new Error("No state in response")),null;const i=await this.settings.stateStore[e?"remove":"get"](r.state);if(!i)throw n.throw(new Error("No matching state found in storage")),null;return{state:await Jd.fromStorageString(i),response:r}}async processSigninResponse(t,e,n=!0){const r=this._logger.create("processSigninResponse"),{state:i,response:s}=await this.readSigninResponseState(t,n);if(r.debug("received state from storage; validating response"),this.settings.dpop&&this.settings.dpop.store){const o=await this.getDpopProof(this.settings.dpop.store);e={...e,DPoP:o}}try{await this._validator.validateSigninResponse(s,i,e)}catch(o){if(o instanceof Bo&&this.settings.dpop){const a=await this.getDpopProof(this.settings.dpop.store,o.nonce);e.DPoP=a,await this._validator.validateSigninResponse(s,i,e)}else throw o}return s}async getDpopProof(t,e){let n,r;return(await t.getAllKeys()).includes(this.settings.client_id)?(r=await t.get(this.settings.client_id),r.nonce!==e&&e&&(r.nonce=e,await t.set(this.settings.client_id,r))):(n=await se.generateDPoPKeys(),r=new Yd(n,e),await t.set(this.settings.client_id,r)),await se.generateDPoPProof({url:await this.metadataService.getTokenEndpoint(!1),httpMethod:"POST",keyPair:r.keys,nonce:r.nonce})}async processResourceOwnerPasswordCredentials({username:t,password:e,skipUserInfo:n=!1,extraTokenParams:r={}}){const i=await this._tokenClient.exchangeCredentials({username:t,password:e,...r}),s=new Ws(new URLSearchParams);return Object.assign(s,i),await this._validator.validateCredentialsResponse(s,n),s}async useRefreshToken({state:t,redirect_uri:e,resource:n,timeoutInSeconds:r,extraHeaders:i,extraTokenParams:s}){var o;const a=this._logger.create("useRefreshToken");let l;if(this.settings.refreshTokenAllowedScope===void 0)l=t.scope;else{const g=this.settings.refreshTokenAllowedScope.split(" ");l=(((o=t.scope)==null?void 0:o.split(" "))||[]).filter(m=>g.includes(m)).join(" ")}if(this.settings.dpop&&this.settings.dpop.store){const g=await this.getDpopProof(this.settings.dpop.store);i={...i,DPoP:g}}let c;try{c=await this._tokenClient.exchangeRefreshToken({refresh_token:t.refresh_token,scope:l,redirect_uri:e,resource:n,timeoutInSeconds:r,extraHeaders:i,...s})}catch(g){if(g instanceof Bo&&this.settings.dpop)i.DPoP=await this.getDpopProof(this.settings.dpop.store,g.nonce),c=await this._tokenClient.exchangeRefreshToken({refresh_token:t.refresh_token,scope:l,redirect_uri:e,resource:n,timeoutInSeconds:r,extraHeaders:i,...s});else throw g}const d=new Ws(new URLSearchParams);return Object.assign(d,c),a.debug("validating response",d),await this._validator.validateRefreshResponse(d,{...t,scope:l}),d}async createSignoutRequest({state:t,id_token_hint:e,client_id:n,request_type:r,url_state:i,post_logout_redirect_uri:s=this.settings.post_logout_redirect_uri,extraQueryParams:o=this.settings.extraQueryParams}={}){const a=this._logger.create("createSignoutRequest"),l=await this.metadataService.getEndSessionEndpoint();if(!l)throw a.throw(new Error("No end session endpoint")),null;a.debug("Received end session endpoint",l),!n&&s&&!e&&(n=this.settings.client_id);const c=new ep({url:l,id_token_hint:e,client_id:n,post_logout_redirect_uri:s,state_data:t,extraQueryParams:o,request_type:r,url_state:i});await this.clearStaleState();const d=c.state;return d&&(a.debug("Signout request has state to persist"),await this.settings.stateStore.set(d.id,d.toStorageString())),c}async readSignoutResponseState(t,e=!1){const n=this._logger.create("readSignoutResponseState"),r=new tp(Wo.readParams(t,this.settings.response_mode));if(!r.state){if(n.debug("No state in response"),r.error)throw n.warn("Response was error:",r.error),new pn(r);return{state:void 0,response:r}}const i=await this.settings.stateStore[e?"remove":"get"](r.state);if(!i)throw n.throw(new Error("No matching state found in storage")),null;return{state:await Gi.fromStorageString(i),response:r}}async processSignoutResponse(t){const e=this._logger.create("processSignoutResponse"),{state:n,response:r}=await this.readSignoutResponseState(t,!0);return n?(e.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(r,n)):e.debug("No state from storage; skipping response validation"),r}clearStaleState(){return this._logger.create("clearStaleState"),Gi.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(t,e){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:t,token_type_hint:e})}},op=class{constructor(t){this._userManager=t,this._logger=new F("SessionMonitor"),this._start=async e=>{const n=e.session_state;if(!n)return;const r=this._logger.create("_start");if(e.profile?(this._sub=e.profile.sub,r.debug("session_state",n,", sub",this._sub)):(this._sub=void 0,r.debug("session_state",n,", anonymous user")),this._checkSessionIFrame){this._checkSessionIFrame.start(n);return}try{const i=await this._userManager.metadataService.getCheckSessionIframe();if(i){r.debug("initializing check session iframe");const s=this._userManager.settings.client_id,o=this._userManager.settings.checkSessionIntervalInSeconds,a=this._userManager.settings.stopCheckSessionOnError,l=new Bg(this._callback,s,i,o,a);await l.load(),this._checkSessionIFrame=l,l.start(n)}else r.warn("no check session iframe found in the metadata")}catch(i){r.error("Error from getCheckSessionIframe:",i instanceof Error?i.message:i)}},this._stop=()=>{const e=this._logger.create("_stop");if(this._sub=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){const n=setInterval(async()=>{clearInterval(n);try{const r=await this._userManager.querySessionStatus();if(r){const i={session_state:r.session_state,profile:r.sub?{sub:r.sub}:null};this._start(i)}}catch(r){e.error("error from querySessionStatus",r instanceof Error?r.message:r)}},1e3)}},this._callback=async()=>{const e=this._logger.create("_callback");try{const n=await this._userManager.querySessionStatus();let r=!0;n&&this._checkSessionIFrame?n.sub===this._sub?(r=!1,this._checkSessionIFrame.start(n.session_state),e.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",n.session_state),await this._userManager.events._raiseUserSessionChanged()):e.debug("different subject signed into OP",n.sub):e.debug("subject no longer signed into OP"),r?this._sub?await this._userManager.events._raiseUserSignedOut():await this._userManager.events._raiseUserSignedIn():e.debug("no change in session detected, no event to raise")}catch(n){this._sub&&(e.debug("Error calling queryCurrentSigninSession; raising signed out event",n),await this._userManager.events._raiseUserSignedOut())}},t||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch(e=>{this._logger.error(e)})}async _init(){this._logger.create("_init");const t=await this._userManager.getUser();if(t)this._start(t);else if(this._userManager.settings.monitorAnonymousSession){const e=await this._userManager.querySessionStatus();if(e){const n={session_state:e.session_state,profile:e.sub?{sub:e.sub}:null};this._start(n)}}}},Bs=class Zd{constructor(e){var n;this.id_token=e.id_token,this.session_state=(n=e.session_state)!=null?n:null,this.access_token=e.access_token,this.refresh_token=e.refresh_token,this.token_type=e.token_type,this.scope=e.scope,this.profile=e.profile,this.expires_at=e.expires_at,this.state=e.userState,this.url_state=e.url_state}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-Rt.getEpochTime()}set expires_in(e){e!==void 0&&(this.expires_at=Math.floor(e)+Rt.getEpochTime())}get expired(){const e=this.expires_in;if(e!==void 0)return e<=0}get scopes(){var e,n;return(n=(e=this.scope)==null?void 0:e.split(" "))!=null?n:[]}toStorageString(){return new F("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(e){return F.createStatic("User","fromStorageString"),new Zd(JSON.parse(e))}},Sc="oidc-client",ef=class{constructor(){this._abort=new Ut("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(t){const e=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");e.debug("setting URL in window"),this._window.location.replace(t.url);const{url:n,keepOpen:r}=await new Promise((i,s)=>{const o=l=>{var c;const d=l.data,g=(c=t.scriptOrigin)!=null?c:window.location.origin;if(!(l.origin!==g||(d==null?void 0:d.source)!==Sc)){try{const f=Wo.readParams(d.url,t.response_mode).get("state");if(f||e.warn("no state found in response url"),l.source!==this._window&&f!==t.state)return}catch{this._dispose(),s(new Error("Invalid response from window"))}i(d)}};window.addEventListener("message",o,!1),this._disposeHandlers.add(()=>window.removeEventListener("message",o,!1));const a=new BroadcastChannel(`oidc-client-popup-${t.state}`);a.addEventListener("message",o,!1),this._disposeHandlers.add(()=>a.close()),this._disposeHandlers.add(this._abort.addHandler(l=>{this._dispose(),s(l)}))});return e.debug("got response from window"),this._dispose(),r||this.close(),{url:n}}_dispose(){this._logger.create("_dispose");for(const t of this._disposeHandlers)t();this._disposeHandlers.clear()}static _notifyParent(t,e,n=!1,r=window.location.origin){const i={source:Sc,url:e,keepOpen:n},s=new F("_notifyParent");if(t)s.debug("With parent. Using parent.postMessage."),t.postMessage(i,r);else{s.debug("No parent. Using BroadcastChannel.");const o=new URL(e).searchParams.get("state");if(!o)throw new Error("No parent and no state in URL. Can't complete notification.");const a=new BroadcastChannel(`oidc-client-popup-${o}`);a.postMessage(i),a.close()}}},tf={location:!1,toolbar:!1,height:640,closePopupWindowAfterInSeconds:-1},nf="_blank",ap=60,lp=2,rf=10,cp=class extends Vo{constructor(t){const{popup_redirect_uri:e=t.redirect_uri,popup_post_logout_redirect_uri:n=t.post_logout_redirect_uri,popupWindowFeatures:r=tf,popupWindowTarget:i=nf,redirectMethod:s="assign",redirectTarget:o="self",iframeNotifyParentOrigin:a=t.iframeNotifyParentOrigin,iframeScriptOrigin:l=t.iframeScriptOrigin,requestTimeoutInSeconds:c,silent_redirect_uri:d=t.redirect_uri,silentRequestTimeoutInSeconds:g,automaticSilentRenew:f=!0,validateSubOnSilentRenew:m=!0,includeIdTokenInSilentRenew:S=!1,monitorSession:k=!1,monitorAnonymousSession:j=!1,checkSessionIntervalInSeconds:h=lp,query_status_response_type:u="code",stopCheckSessionOnError:p=!0,revokeTokenTypes:y=["access_token","refresh_token"],revokeTokensOnSignout:x=!1,includeIdTokenInSilentSignout:C=!1,accessTokenExpiringNotificationTimeInSeconds:T=ap,userStore:I}=t;if(super(t),this.popup_redirect_uri=e,this.popup_post_logout_redirect_uri=n,this.popupWindowFeatures=r,this.popupWindowTarget=i,this.redirectMethod=s,this.redirectTarget=o,this.iframeNotifyParentOrigin=a,this.iframeScriptOrigin=l,this.silent_redirect_uri=d,this.silentRequestTimeoutInSeconds=g||c||rf,this.automaticSilentRenew=f,this.validateSubOnSilentRenew=m,this.includeIdTokenInSilentRenew=S,this.monitorSession=k,this.monitorAnonymousSession=j,this.checkSessionIntervalInSeconds=h,this.stopCheckSessionOnError=p,this.query_status_response_type=u,this.revokeTokenTypes=y,this.revokeTokensOnSignout=x,this.includeIdTokenInSilentSignout=C,this.accessTokenExpiringNotificationTimeInSeconds=T,I)this.userStore=I;else{const $=typeof window<"u"?window.sessionStorage:new Kd;this.userStore=new Ji({store:$})}}},kc=class sf extends ef{constructor({silentRequestTimeoutInSeconds:e=rf}){super(),this._logger=new F("IFrameWindow"),this._timeoutInSeconds=e,this._frame=sf.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){const e=window.document.createElement("iframe");return e.style.visibility="hidden",e.style.position="fixed",e.style.left="-1000px",e.style.top="0",e.width="0",e.height="0",window.document.body.appendChild(e),e}async navigate(e){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);const n=setTimeout(()=>void this._abort.raise(new Wa("IFrame timed out without a response")),this._timeoutInSeconds*1e3);return this._disposeHandlers.add(()=>clearTimeout(n)),await super.navigate(e)}close(){var e;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",n=>{var r;const i=n.target;(r=i.parentNode)==null||r.removeChild(i),this._abort.raise(new Error("IFrame removed from DOM"))},!0),(e=this._frame.contentWindow)==null||e.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(e,n){return super._notifyParent(window.parent,e,!1,n)}},up=class{constructor(t){this._settings=t,this._logger=new F("IFrameNavigator")}async prepare({silentRequestTimeoutInSeconds:t=this._settings.silentRequestTimeoutInSeconds}){return new kc({silentRequestTimeoutInSeconds:t})}async callback(t){this._logger.create("callback"),kc.notifyParent(t,this._settings.iframeNotifyParentOrigin)}},dp=500,fp=1e3,Ec=class extends ef{constructor({popupWindowTarget:t=nf,popupWindowFeatures:e={},popupSignal:n,popupAbortOnClose:r}){super(),this._logger=new F("PopupWindow");const i=yc.center({...tf,...e});this._window=window.open(void 0,t,yc.serialize(i)),this.abortOnClose=!!r,n&&n.addEventListener("abort",()=>{var s;this._abort.raise(new Error((s=n.reason)!=null?s:"Popup aborted"))}),e.closePopupWindowAfterInSeconds&&e.closePopupWindowAfterInSeconds>0&&setTimeout(()=>{if(!this._window||typeof this._window.closed!="boolean"||this._window.closed){this._abort.raise(new Error("Popup blocked by user"));return}this.close()},e.closePopupWindowAfterInSeconds*fp)}async navigate(t){var e;(e=this._window)==null||e.focus();const n=setInterval(()=>{(!this._window||this._window.closed)&&(this._logger.debug("Popup closed by user or isolated by redirect"),r(),this._disposeHandlers.delete(r),this.abortOnClose&&this._abort.raise(new Error("Popup closed by user")))},dp),r=()=>clearInterval(n);return this._disposeHandlers.add(r),await super.navigate(t)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(t,e){super._notifyParent(window.opener,t,e),!e&&!window.opener&&window.close()}},hp=class{constructor(t){this._settings=t,this._logger=new F("PopupNavigator")}async prepare({popupWindowFeatures:t=this._settings.popupWindowFeatures,popupWindowTarget:e=this._settings.popupWindowTarget,popupSignal:n,popupAbortOnClose:r}){return new Ec({popupWindowFeatures:t,popupWindowTarget:e,popupSignal:n,popupAbortOnClose:r})}async callback(t,{keepOpen:e=!1}){this._logger.create("callback"),Ec.notifyOpener(t,e)}},gp=class{constructor(t){this._settings=t,this._logger=new F("RedirectNavigator")}async prepare({redirectMethod:t=this._settings.redirectMethod,redirectTarget:e=this._settings.redirectTarget}){var n;this._logger.create("prepare");let r=window.self;e==="top"&&(r=(n=window.top)!=null?n:window.self);const i=r.location[t].bind(r.location);let s;return{navigate:async o=>(this._logger.create("navigate"),await new Promise((l,c)=>{s=c,window.addEventListener("pageshow",()=>l(window.location.href)),i(o.url)})),close:()=>{this._logger.create("close"),s==null||s(new Error("Redirect aborted")),r.stop()}}}async callback(){}},pp=class extends Wg{constructor(t){super({expiringNotificationTimeInSeconds:t.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new F("UserManagerEvents"),this._userLoaded=new Ut("User loaded"),this._userUnloaded=new Ut("User unloaded"),this._silentRenewError=new Ut("Silent renew error"),this._userSignedIn=new Ut("User signed in"),this._userSignedOut=new Ut("User signed out"),this._userSessionChanged=new Ut("User session changed")}async load(t,e=!0){await super.load(t),e&&await this._userLoaded.raise(t)}async unload(){await super.unload(),await this._userUnloaded.raise()}addUserLoaded(t){return this._userLoaded.addHandler(t)}removeUserLoaded(t){return this._userLoaded.removeHandler(t)}addUserUnloaded(t){return this._userUnloaded.addHandler(t)}removeUserUnloaded(t){return this._userUnloaded.removeHandler(t)}addSilentRenewError(t){return this._silentRenewError.addHandler(t)}removeSilentRenewError(t){return this._silentRenewError.removeHandler(t)}async _raiseSilentRenewError(t){await this._silentRenewError.raise(t)}addUserSignedIn(t){return this._userSignedIn.addHandler(t)}removeUserSignedIn(t){this._userSignedIn.removeHandler(t)}async _raiseUserSignedIn(){await this._userSignedIn.raise()}addUserSignedOut(t){return this._userSignedOut.addHandler(t)}removeUserSignedOut(t){this._userSignedOut.removeHandler(t)}async _raiseUserSignedOut(){await this._userSignedOut.raise()}addUserSessionChanged(t){return this._userSessionChanged.addHandler(t)}removeUserSessionChanged(t){this._userSessionChanged.removeHandler(t)}async _raiseUserSessionChanged(){await this._userSessionChanged.raise()}},mp=class{constructor(t){this._userManager=t,this._logger=new F("SilentRenewService"),this._isStarted=!1,this._retryTimer=new Rt("Retry Silent Renew"),this._tokenExpiring=async()=>{const e=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),e.debug("silent token renewal successful")}catch(n){if(n instanceof Wa){e.warn("ErrorTimeout from signinSilent:",n,"retry in 5s"),this._retryTimer.init(5);return}e.error("Error from signinSilent:",n),await this._userManager.events._raiseSilentRenewError(n)}}}async start(){const t=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(e){t.error("getUser error",e)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}},_p=class{constructor(t){this.refresh_token=t.refresh_token,this.id_token=t.id_token,this.session_state=t.session_state,this.scope=t.scope,this.profile=t.profile,this.data=t.state}},vp=class{constructor(t,e,n,r){this._logger=new F("UserManager"),this.settings=new cp(t),this._client=new sp(t),this._redirectNavigator=e??new gp(this.settings),this._popupNavigator=n??new hp(this.settings),this._iframeNavigator=r??new up(this.settings),this._events=new pp(this.settings),this._silentRenewService=new mp(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new op(this))}get events(){return this._events}get metadataService(){return this._client.metadataService}async getUser(t=!1){const e=this._logger.create("getUser"),n=await this._loadUser();return n?(e.info("user loaded"),await this._events.load(n,t),n):(e.info("user not found in storage"),null)}async removeUser(){const t=this._logger.create("removeUser");await this.storeUser(null),t.info("user removed from storage"),await this._events.unload()}async signinRedirect(t={}){var e;this._logger.create("signinRedirect");const{redirectMethod:n,...r}=t;let i;(e=this.settings.dpop)!=null&&e.bind_authorization_code&&(i=await this.generateDPoPJkt(this.settings.dpop));const s=await this._redirectNavigator.prepare({redirectMethod:n});await this._signinStart({request_type:"si:r",dpopJkt:i,...r},s)}async signinRedirectCallback(t=window.location.href){const e=this._logger.create("signinRedirectCallback"),n=await this._signinEnd(t);return n.profile&&n.profile.sub?e.info("success, signed in subject",n.profile.sub):e.info("no subject"),n}async signinResourceOwnerCredentials({username:t,password:e,skipUserInfo:n=!1}){const r=this._logger.create("signinResourceOwnerCredential"),i=await this._client.processResourceOwnerPasswordCredentials({username:t,password:e,skipUserInfo:n,extraTokenParams:this.settings.extraTokenParams});r.debug("got signin response");const s=await this._buildUser(i);return s.profile&&s.profile.sub?r.info("success, signed in subject",s.profile.sub):r.info("no subject"),s}async signinPopup(t={}){var e;const n=this._logger.create("signinPopup");let r;(e=this.settings.dpop)!=null&&e.bind_authorization_code&&(r=await this.generateDPoPJkt(this.settings.dpop));const{popupWindowFeatures:i,popupWindowTarget:s,popupSignal:o,popupAbortOnClose:a,...l}=t,c=this.settings.popup_redirect_uri;c||n.throw(new Error("No popup_redirect_uri configured"));const d=await this._popupNavigator.prepare({popupWindowFeatures:i,popupWindowTarget:s,popupSignal:o,popupAbortOnClose:a}),g=await this._signin({request_type:"si:p",redirect_uri:c,display:"popup",dpopJkt:r,...l},d);return g&&(g.profile&&g.profile.sub?n.info("success, signed in subject",g.profile.sub):n.info("no subject")),g}async signinPopupCallback(t=window.location.href,e=!1){const n=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(t,{keepOpen:e}),n.info("success")}async signinSilent(t={}){var e,n;const r=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:i,...s}=t;let o=await this._loadUser();if(!t.forceIframeAuth&&(o!=null&&o.refresh_token)){r.debug("using refresh token");const g=new _p(o);return await this._useRefreshToken({state:g,redirect_uri:s.redirect_uri,resource:s.resource,extraTokenParams:s.extraTokenParams,timeoutInSeconds:i})}let a;(e=this.settings.dpop)!=null&&e.bind_authorization_code&&(a=await this.generateDPoPJkt(this.settings.dpop));const l=this.settings.silent_redirect_uri;l||r.throw(new Error("No silent_redirect_uri configured"));let c;o&&this.settings.validateSubOnSilentRenew&&(r.debug("subject prior to silent renew:",o.profile.sub),c=o.profile.sub);const d=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:i});return o=await this._signin({request_type:"si:s",redirect_uri:l,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?o==null?void 0:o.id_token:void 0,dpopJkt:a,...s},d,c),o&&((n=o.profile)!=null&&n.sub?r.info("success, signed in subject",o.profile.sub):r.info("no subject")),o}async _useRefreshToken(t){const e=await this._client.useRefreshToken({timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds,...t}),n=new Bs({...t.state,...e});return await this.storeUser(n),await this._events.load(n),n}async signinSilentCallback(t=window.location.href){const e=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(t),e.info("success")}async signinCallback(t=window.location.href){const{state:e}=await this._client.readSigninResponseState(t);switch(e.request_type){case"si:r":return await this.signinRedirectCallback(t);case"si:p":await this.signinPopupCallback(t);break;case"si:s":await this.signinSilentCallback(t);break;default:throw new Error("invalid response_type in state")}}async signoutCallback(t=window.location.href,e=!1){const{state:n}=await this._client.readSignoutResponseState(t);if(n)switch(n.request_type){case"so:r":return await this.signoutRedirectCallback(t);case"so:p":await this.signoutPopupCallback(t,e);break;case"so:s":await this.signoutSilentCallback(t);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(t={}){const e=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:n,...r}=t,i=this.settings.silent_redirect_uri;i||e.throw(new Error("No silent_redirect_uri configured"));const s=await this._loadUser(),o=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:n}),a=await this._signinStart({request_type:"si:s",redirect_uri:i,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?s==null?void 0:s.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0,...r},o);try{const l={},c=await this._client.processSigninResponse(a.url,l);return e.debug("got signin response"),c.session_state&&c.profile.sub?(e.info("success for subject",c.profile.sub),{session_state:c.session_state,sub:c.profile.sub}):(e.info("success, user not authenticated"),null)}catch(l){if(this.settings.monitorAnonymousSession&&l instanceof pn)switch(l.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return e.info("success for anonymous user"),{session_state:l.session_state}}throw l}}async _signin(t,e,n){const r=await this._signinStart(t,e);return await this._signinEnd(r.url,n)}async _signinStart(t,e){const n=this._logger.create("_signinStart");try{const r=await this._client.createSigninRequest(t);return n.debug("got signin request"),await e.navigate({url:r.url,state:r.state.id,response_mode:r.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(r){throw n.debug("error after preparing navigator, closing navigator window"),e.close(),r}}async _signinEnd(t,e){const n=this._logger.create("_signinEnd"),r={},i=await this._client.processSigninResponse(t,r);return n.debug("got signin response"),await this._buildUser(i,e)}async _buildUser(t,e){const n=this._logger.create("_buildUser"),r=new Bs(t);if(e){if(e!==r.profile.sub)throw n.debug("current user does not match user returned from signin. sub from signin:",r.profile.sub),new pn({...t,error:"login_required"});n.debug("current user matches user returned from signin")}return await this.storeUser(r),n.debug("user stored"),await this._events.load(r),r}async signoutRedirect(t={}){const e=this._logger.create("signoutRedirect"),{redirectMethod:n,...r}=t,i=await this._redirectNavigator.prepare({redirectMethod:n});await this._signoutStart({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri,...r},i),e.info("success")}async signoutRedirectCallback(t=window.location.href){const e=this._logger.create("signoutRedirectCallback"),n=await this._signoutEnd(t);return e.info("success"),n}async signoutPopup(t={}){const e=this._logger.create("signoutPopup"),{popupWindowFeatures:n,popupWindowTarget:r,popupSignal:i,...s}=t,o=this.settings.popup_post_logout_redirect_uri,a=await this._popupNavigator.prepare({popupWindowFeatures:n,popupWindowTarget:r,popupSignal:i});await this._signout({request_type:"so:p",post_logout_redirect_uri:o,state:o==null?void 0:{},...s},a),e.info("success")}async signoutPopupCallback(t=window.location.href,e=!1){const n=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(t,{keepOpen:e}),n.info("success")}async _signout(t,e){const n=await this._signoutStart(t,e);return await this._signoutEnd(n.url)}async _signoutStart(t={},e){var n;const r=this._logger.create("_signoutStart");try{const i=await this._loadUser();r.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(i);const s=t.id_token_hint||i&&i.id_token;s&&(r.debug("setting id_token_hint in signout request"),t.id_token_hint=s),await this.removeUser(),r.debug("user removed, creating signout request");const o=await this._client.createSignoutRequest(t);return r.debug("got signout request"),await e.navigate({url:o.url,state:(n=o.state)==null?void 0:n.id,scriptOrigin:this.settings.iframeScriptOrigin})}catch(i){throw r.debug("error after preparing navigator, closing navigator window"),e.close(),i}}async _signoutEnd(t){const e=this._logger.create("_signoutEnd"),n=await this._client.processSignoutResponse(t);return e.debug("got signout response"),n}async signoutSilent(t={}){var e;const n=this._logger.create("signoutSilent"),{silentRequestTimeoutInSeconds:r,...i}=t,s=this.settings.includeIdTokenInSilentSignout?(e=await this._loadUser())==null?void 0:e.id_token:void 0,o=this.settings.popup_post_logout_redirect_uri,a=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r});await this._signout({request_type:"so:s",post_logout_redirect_uri:o,id_token_hint:s,...i},a),n.info("success")}async signoutSilentCallback(t=window.location.href){const e=this._logger.create("signoutSilentCallback");await this._iframeNavigator.callback(t),e.info("success")}async revokeTokens(t){const e=await this._loadUser();await this._revokeInternal(e,t)}async _revokeInternal(t,e=this.settings.revokeTokenTypes){const n=this._logger.create("_revokeInternal");if(!t)return;const r=e.filter(i=>typeof t[i]=="string");if(!r.length){n.debug("no need to revoke due to no token(s)");return}for(const i of r)await this._client.revokeToken(t[i],i),n.info(`${i} revoked successfully`),i!=="access_token"&&(t[i]=null);await this.storeUser(t),n.debug("user stored"),await this._events.load(t)}startSilentRenew(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}stopSilentRenew(){this._silentRenewService.stop()}get _userStoreKey(){return`user:${this.settings.authority}:${this.settings.client_id}`}async _loadUser(){const t=this._logger.create("_loadUser"),e=await this.settings.userStore.get(this._userStoreKey);return e?(t.debug("user storageString loaded"),Bs.fromStorageString(e)):(t.debug("no user storageString"),null)}async storeUser(t){const e=this._logger.create("storeUser");if(t){e.debug("storing user");const n=t.toStorageString();await this.settings.userStore.set(this._userStoreKey,n)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey),this.settings.dpop&&await this.settings.dpop.store.remove(this.settings.client_id)}async clearStaleState(){await this._client.clearStaleState()}async dpopProof(t,e,n,r){var i,s;const o=await((s=(i=this.settings.dpop)==null?void 0:i.store)==null?void 0:s.get(this.settings.client_id));if(o)return await se.generateDPoPProof({url:t,accessToken:e==null?void 0:e.access_token,httpMethod:n,keyPair:o.keys,nonce:r})}async generateDPoPJkt(t){let e=await t.store.get(this.settings.client_id);if(!e){const n=await se.generateDPoPKeys();e=new Yd(n),await t.store.set(this.settings.client_id,e)}return await se.generateDPoPJkt(e.keys)}};const Cc={Trace:0,Debug:1,Information:2,Warning:3,Error:4,Critical:5};class W{constructor(e,n){this.categoryName=e,this.config=n}isEnabled(e){return Cc[e]>=Cc[this.config.minimumLogLevel]}log(e,n,r,i,s){if(!this.isEnabled(e))return;const a=(()=>{try{return{realm:O.Realm||"",clientId:O.isInitialized?O.ClientId:"",appName:O.AppName||"",environment:O.Environment||""}}catch{return{realm:"",clientId:"",appName:"",environment:""}}})(),l={realm:a.realm,client:a.clientId,timestamp:new Date().toISOString(),level:e,category:this.categoryName,eventId:i,eventName:s,message:n,exception:r==null?void 0:r.message,stackTrace:r==null?void 0:r.stack,application:a.appName,environment:a.environment,host:typeof window<"u"?window.location.host:"",pathname:typeof window<"u"?window.location.pathname:""};this.logLocally(e,n,r),this.config.loggerService&&(W.logQueue.push(l),this.processLogQueue())}trace(e,n){this.log("Trace",e,n)}debug(e,n){this.log("Debug",e,n)}info(e,n){this.log("Information",e,n)}warn(e,n){this.log("Warning",e,n)}error(e,n){this.log("Error",e,n)}critical(e,n){this.log("Critical",e,n)}logLocally(e,n,r){const s=`[${new Date().toISOString()}] [${e}] ${this.categoryName}: ${n}`;switch(e){case"Trace":case"Debug":console.debug(s);break;case"Information":console.log(s);break;case"Warning":console.warn(s);break;case"Error":case"Critical":console.error(s);break}r&&console.error(r)}async processLogQueue(){if(!(W.isProcessing||W.logQueue.length===0)){if(!W.initialDelayComplete){W.initialDelayTimeoutId===null&&(W.initialDelayTimeoutId=setTimeout(()=>{W.initialDelayComplete=!0,W.initialDelayTimeoutId=null,this.processLogQueue()},W.INITIAL_DELAY_MS));return}W.isProcessing=!0;try{const e=[];for(;W.logQueue.length>0;)try{const n=W.logQueue.shift();if(n&&await this.sendToRemoteService(n)==="retry"){const i=(n._retryCount||0)+1;i<=W.MAX_RETRIES?(n._retryCount=i,e.push(n)):console.warn(`Dropping log entry after ${W.MAX_RETRIES} failed attempts (auth not ready)`)}}catch(n){console.error("Exception processing log entry:",n)}e.length>0&&(W.logQueue.unshift(...e),this.scheduleRetry())}finally{W.isProcessing=!1}}}scheduleRetry(){W.retryTimeoutId===null&&(W.retryTimeoutId=setTimeout(()=>{W.retryTimeoutId=null,this.processLogQueue()},W.RETRY_DELAY_MS))}async sendToRemoteService(e){try{const{_retryCount:n,...r}=e,i=await fetch(`${this.config.loggerService}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({realm:r.realm,client:r.client,logData:r,environment:r.environment,application:r.application,logLevel:r.level})});return i.ok?"success":i.status===401?((e._retryCount||0)===0&&console.debug("Remote logging: auth not ready, will retry..."),"retry"):(console.error(`Remote logging failed: ${i.status}`),"error")}catch(n){return console.error("Exception sending log to remote service:",n),"error"}}}W.logQueue=[];W.isProcessing=!1;W.retryTimeoutId=null;W.initialDelayComplete=!1;W.initialDelayTimeoutId=null;W.MAX_RETRIES=3;W.RETRY_DELAY_MS=2e3;W.INITIAL_DELAY_MS=1e3;class we{static configure(e){Object.assign(we.config,e)}static createLogger(e){let n=we.loggers.get(e);return n||(n=new W(e,we.config),we.loggers.set(e,n)),n}static getLogger(e){return we.createLogger(e)}static clearLoggers(){we.loggers.clear()}}we.config={minimumLogLevel:"Information",loggerService:""};we.loggers=new Map;class ne{constructor(e){ne._configured||ne.autoConfigureFromConfigService(),this.logger=we.createLogger(e)}static getValidLogLevel(e){const n=["Trace","Debug","Information","Warning","Error","Critical"];if(typeof e=="number"&&e>=0&&e<n.length)return n[e];if(typeof e=="string"){if(n.includes(e))return e;const r=parseInt(e,10);if(!isNaN(r)&&r>=0&&r<n.length)return n[r]}return console.warn(`Invalid log level '${e}', falling back to 'Information'`),"Information"}static autoConfigureFromConfigService(){if(!ne._configured)try{if(O.isInitialized){const e=O.LoggerService,n=ne.getValidLogLevel(O.LogLevel);console.log(`Auto-configuring logger with URL from ConfigService: ${e||"(none)"}, LogLevel: ${n}`),we.configure({loggerService:e||"",minimumLogLevel:n})}else we.configure({loggerService:"",minimumLogLevel:"Information"});ne._configured=!0}catch(e){console.error("Failed to auto-configure logger from ConfigService:",e),we.configure({loggerService:"",minimumLogLevel:"Information"}),ne._configured=!0}}static configure(e){we.configure(e),ne._configured=!0}static async configureFromConfigService(){if(!O.isInitialized)throw new Error("ConfigService must be initialized before configuring LoggerService");const e=O.LoggerService,n=ne.getValidLogLevel(O.LogLevel);console.log(`Configuring logger with URL from ConfigService: ${e||"(none)"}, LogLevel: ${n}`),we.configure({loggerService:e||"",minimumLogLevel:n}),ne._configured=!0}static create(e){return new ne(e)}static getLogger(e){return new ne(e)}static reset(){ne._configured=!1,we.clearLoggers()}trace(e,n){this.logger.trace(e,n)}debug(e,n){this.logger.debug(e,n)}info(e,n){this.logger.info(e,n)}warn(e,n){this.logger.warn(e,n)}error(e,n){this.logger.error(e,n)}critical(e,n){this.logger.critical(e,n)}}ne._configured=!1;const ci={BASE_URL:"/infoforum/logs/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};class Re{static get(e){try{const n=`VITE_${e}`;if(typeof import.meta<"u"&&ci&&ci[n])return ci[n];if(e==="IF_ENVIRONMENT"&&typeof import.meta<"u"&&ci){const r="production".toUpperCase();if(this.VALID_ENVIRONMENTS.includes(r))return r}}catch{}return""}static validate(e,n=!1){const r=[],i=n?["IF_APP_NAME","IF_ENVIRONMENT","LOG_LEVEL"]:["IF_APP_DOMAIN","IF_APP_NAME","IF_ENVIRONMENT","LOG_LEVEL"],s=["IF_CONFIG_SERVICE_URL"],o=["AUTH_CLIENT_ID","AUTH_AUTHORITY","LOG_SERVICE_URL"],a=n;for(const c of i)this.get(c)||r.push(`Missing: ${c}`);const l=this.get("IF_ENVIRONMENT");if(l&&!this.VALID_ENVIRONMENTS.includes(l.toUpperCase())&&r.push(`Invalid IF_ENVIRONMENT: '${l}'. Must be one of: ${this.VALID_ENVIRONMENTS.join(", ")}`),e)for(const c of o)this.get(c)||r.push(`Missing: ${c}`);else if(!a)for(const c of s)this.get(c)||r.push(`Missing: ${c}`);return r}static logValidationErrors(e){console.error(`[EnvironmentConfig] Validation failed:
`+e.map(n=>`  - ${n}`).join(`
`))}static logConfiguration(e,n=!1){const r=n?["IF_APP_NAME","IF_ENVIRONMENT","LOG_LEVEL"]:["IF_APP_DOMAIN","IF_APP_NAME","IF_ENVIRONMENT","LOG_LEVEL"],i=["IF_CONFIG_SERVICE_URL"],s=["AUTH_CLIENT_ID","AUTH_AUTHORITY","LOG_SERVICE_URL"];let o;e?o=[...r,...s]:n?o=r:o=[...r,...i];const a=o.map(l=>`  ${l}: ${this.get(l)||"(not set)"}`).join(`
`);console.log(`[EnvironmentConfig] Configuration:
${a}`)}}Re.VALID_ENVIRONMENTS=["DBG","DEV","SIT","UAT","PRD"];class O{static get logger(){return this._logger||(this._logger=ne.create("ConfigService")),this._logger}static get ClientId(){if(!this._clientId)throw new Error("ConfigService not initialized. Call initialize() first.");return this._clientId}static get OpenIdConfig(){if(!this._openIdConfig)throw new Error("ConfigService not initialized. Call initialize() first.");return this._openIdConfig}static get LoggerService(){return this._loggerService}static get LogLevel(){return this._logLevel||Re.get("LOG_LEVEL")}static get Realm(){return this._realm}static get AppDomain(){return this._appDomain}static get AppName(){return this._appName}static get Environment(){return this._environment}static get isInitialized(){return this._initialized}static get appType(){return this._appType}static async initialize(e){if(!this._initialized){if(this._initializationPromise)return this._initializationPromise;this._appType=e.appType,this._initializationPromise=this.performInitialization(e);try{await this._initializationPromise}finally{this._initializationPromise=null}}}static async performInitialization(e){try{const n=`${e.configServiceUrl}/Config?cfg=bootstrap&type=${e.appType}&appDomain=${e.appDomain}`;this.logger.debug(`Fetching bootstrap configuration: ${n}`),console.log("ConfigService fetch URL:",n);const r=await fetch(n);if(!r.ok)throw new Error(`Failed to fetch bootstrap configuration: ${r.status} ${r.statusText}`);const i=await r.json();if(!i.clientId||!i.openIdConfig||!i.realm)throw new Error("Invalid bootstrap configuration: missing clientId, openIdConfig, or realm");this._clientId=i.clientId,this._openIdConfig=`${i.openIdConfig}/${i.realm}`,this._loggerService=i.loggerService||null,this._logLevel=i.logLevel||"",this._realm=i.realm,this._appDomain=e.appDomain,this._appName=e.appName,this._environment=e.environment,this.logger.info("Bootstrap configuration loaded successfully"),this.logger.debug(`AppDomain: ${this._appDomain}`),this.logger.debug(`Realm: ${this._realm}`),this.logger.debug(`ClientId: ${this._clientId}`),this.logger.debug(`Authority: ${this._openIdConfig}`),this._loggerService&&this.logger.debug(`Logger Service URL: ${this._loggerService}`),this.logger.debug(`Log Level: ${this._logLevel}`),this._initialized=!0}catch(n){throw this.logger.error("Failed to initialize ConfigService",n),n}}static initializeWithStaticConfig(e){this._initialized||(this._clientId=e.clientId,this._openIdConfig=e.openIdConfig,this._loggerService=e.loggerService||null,this._logLevel=e.logLevel||this._logLevel,this._realm=e.realm||null,this._appDomain=e.appDomain||null,this._appName=e.appName||null,this._environment=e.environment||null,this._appType=e.appType||"user",this.logger.info("ConfigService initialized with static config"),this.logger.debug(`ClientId: ${this._clientId}`),this.logger.debug(`Authority: ${this._openIdConfig}`),this._initialized=!0)}static reset(){this._clientId=null,this._openIdConfig=null,this._loggerService=null,this._logLevel="",this._realm=null,this._appDomain=null,this._appName=null,this._environment=null,this._initialized=!1,this._initializationPromise=null,this._appType="user",this._logger=null}}O._clientId=null;O._openIdConfig=null;O._loggerService=null;O._logLevel="";O._realm=null;O._appDomain=null;O._appName=null;O._environment=null;O._initialized=!1;O._initializationPromise=null;O._appType="user";O._logger=null;class We{constructor(){this.userManager=null,this.config=null,this._logger=null,this.userChangeCallbacks=new Set,this.expiringNotificationSeconds=60,this.endOfSessionStormMode=!1,this.endOfSessionStormLogged=!1,this.silentRenewStoppedByStorm=!1}static getInstance(){return We._instance||(We._instance=new We),We._instance}get logger(){return this._logger||(this._logger=ne.create("AuthService")),this._logger}notifyUserChange(e){this.userChangeCallbacks.forEach(n=>n(e))}onUserChange(e){return this.userChangeCallbacks.add(e),()=>this.userChangeCallbacks.delete(e)}async initialize(e){if(this.userManager)return;if(this.config=e,!O.isInitialized)throw new Error("ConfigService must be initialized before AuthService. Wrap your app with <AppInitializer> to ensure proper initialization order.");const n=e.clientId||O.ClientId,r=e.authority||O.OpenIdConfig;let i;if(e.oidcConfigUrl){const s=await fetch(e.oidcConfigUrl);if(!s.ok)throw new Error(`Failed to fetch OIDC configuration: ${s.statusText}`);const o=await s.json();i={authority:o.issuer,client_id:n,redirect_uri:e.redirectUri,scope:e.scope||"openid profile email",response_type:"code",post_logout_redirect_uri:e.postLogoutRedirectUri||e.redirectUri,automaticSilentRenew:e.automaticSilentRenew!==!1,silent_redirect_uri:e.silentRedirectUri||e.redirectUri,userStore:new Ji({store:window.localStorage}),metadata:o,accessTokenExpiringNotificationTimeInSeconds:this.expiringNotificationSeconds}}else i={authority:r,client_id:n,redirect_uri:e.redirectUri,scope:e.scope||"openid profile email",response_type:"code",post_logout_redirect_uri:e.postLogoutRedirectUri||e.redirectUri,automaticSilentRenew:e.automaticSilentRenew!==!1,silent_redirect_uri:e.silentRedirectUri||e.redirectUri,userStore:new Ji({store:window.localStorage}),metadata:e.metadata,accessTokenExpiringNotificationTimeInSeconds:this.expiringNotificationSeconds};this.userManager=new vp(i),this.userManager.events.addAccessTokenExpiring(()=>{this.endOfSessionStormMode||this.logger.info("Access token is about to expire, attempting silent renewal")}),this.userManager.events.addAccessTokenExpired(async()=>{var o,a;if(this.logger.warn("Access token has expired"),this.endOfSessionStormMode){await((o=this.userManager)==null?void 0:o.removeUser()),this.notifyUserChange(null);return}const s=await((a=this.userManager)==null?void 0:a.getUser());this.notifyUserChange(s??null)}),this.userManager.events.addSilentRenewError(s=>{this.endOfSessionStormMode?this.endOfSessionStormLogged||(this.endOfSessionStormLogged=!0,this.logger.warn("Silent renew failed near end-of-session; auto-renew is disabled to prevent refresh storms",s)):this.logger.error("Silent token renewal failed",s)}),this.userManager.events.addUserLoaded(s=>{this.logger.info("User loaded/renewed"),this.applyEndOfSessionStormSuppression(s),this.notifyUserChange(s)}),this.userManager.events.addUserUnloaded(()=>{this.logger.info("User unloaded"),this.notifyUserChange(null)}),this.userManager.events.addUserSignedOut(()=>{this.logger.info("User was signed out"),this.notifyUserChange(null)})}async signin(){if(!this.userManager)throw new Error("AuthService not initialized");this.logger.debug("Initiating signin redirect"),await this.userManager.signinRedirect()}applyEndOfSessionStormSuppression(e){if(!this.userManager||this.endOfSessionStormMode||!e.expires_at)return;const n=Math.floor(Date.now()/1e3),r=e.expires_at-n,i=2,s=this.expiringNotificationSeconds;r<=s+i&&(this.endOfSessionStormMode=!0,this.silentRenewStoppedByStorm=!0,this.userManager.stopSilentRenew(),this.endOfSessionStormLogged||(this.endOfSessionStormLogged=!0,this.logger.warn(`End-of-session detected: token lifetime (${r}s) is within expiring window (${s}s). Disabling automatic silent renew to prevent refresh-token storm (see oidc-client-ts #644).`)))}async completeSignin(){if(!this.userManager)throw new Error("AuthService not initialized");this.logger.debug("Processing signin callback");const e=await this.userManager.signinRedirectCallback(),n=(e==null?void 0:e.profile.preferred_username)||(e==null?void 0:e.profile.email)||"unknown";return this.logger.info(`User authenticated successfully: ${n}`),this.silentRenewStoppedByStorm&&(this.endOfSessionStormMode=!1,this.endOfSessionStormLogged=!1,this.silentRenewStoppedByStorm=!1,this.userManager.startSilentRenew(),this.logger.info("Automatic silent renew re-enabled after interactive sign-in")),e}async signout(){if(!this.userManager)throw new Error("AuthService not initialized");this.logger.debug("Initiating signout redirect"),await this.userManager.signoutRedirect()}async completeSignout(){if(!this.userManager)throw new Error("AuthService not initialized");this.logger.debug("Processing signout callback"),await this.userManager.signoutRedirectCallback(),this.logger.info("User signed out successfully"),this.endOfSessionStormMode=!1,this.endOfSessionStormLogged=!1,this.silentRenewStoppedByStorm=!1}async renewToken(){if(!this.userManager)throw new Error("AuthService not initialized");this.logger.debug("Attempting silent token renewal");const e=await this.userManager.signinSilent();if(!e)throw new Error("Silent renewal failed: no user returned");const n=e.profile.preferred_username||e.profile.email||"unknown",r=e.expires_at?new Date(e.expires_at*1e3).toISOString():"unknown";return this.logger.info(`Token renewed successfully for user ${n}. Expires at: ${r}`),e}async getUser(){if(!this.userManager)throw new Error("AuthService not initialized");return await this.userManager.getUser()}async getAccessToken(){if(!this.userManager)return null;const e=await this.getUser();return(e==null?void 0:e.access_token)||null}async removeUser(){if(!this.userManager)throw new Error("AuthService not initialized");await this.userManager.removeUser(),this.endOfSessionStormMode=!1,this.endOfSessionStormLogged=!1,this.silentRenewStoppedByStorm=!1}async completeSilentSignin(){if(!this.userManager)throw new Error("AuthService not initialized");await this.userManager.signinSilentCallback()}async clearStaleState(){if(!this.userManager)throw new Error("AuthService not initialized");await this.userManager.clearStaleState(),this.logger.info("Cleared stale OIDC state from storage")}isStateError(e){const n=e instanceof Error?e.message:String(e);return["No matching state found","Incorrect redirect_uri","No state in response","state not found","invalid state"].some(i=>n.toLowerCase().includes(i.toLowerCase()))}isAuthExpiredError(e){const n=e instanceof Error?e.message:String(e);return["authentication_expired","login_required","session_expired","temporarily_unavailable","interaction_required","expired_login_hint_token"].some(i=>n.toLowerCase().includes(i.toLowerCase()))}shouldRestartAuth(e){return this.isStateError(e)||this.isAuthExpiredError(e)}static reset(){We._instance&&(We._instance.userManager=null,We._instance.config=null,We._instance._logger=null),We._instance=null}}We._instance=null;const xe=We.getInstance();function wp(t){if(typeof window>"u")return;const{getAccessToken:e}=t,n=window.fetch;window.fetch=async function(...r){let[i,s={}]=r;const o=await e();return o?(s.headers={...s.headers,Authorization:`Bearer ${o}`},console.debug(`[FetchInterceptor] Token attached to request: ${i}`)):console.debug(`[FetchInterceptor] No token available for request: ${i}`),n(i,s)}}const yp={BASE_URL:"/infoforum/logs/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};let Qo=null;function Sp(t){Qo=t}function xc(t){return t?(t.startsWith("/")||(t="/"+t),t.endsWith("/")||(t=t+"/"),t):"/"}function Xi(){if(Qo!==null)return xc(Qo);const t=typeof import.meta<"u"&&yp&&"/infoforum/logs/";if(typeof t=="string")return xc(t);if(typeof window>"u")return"/";const e=window.location.pathname.split("/").filter(Boolean);return e.length>0?`/${e[0]}/`:"/"}function kp(){if(typeof window>"u")return"/";const{pathname:t,hash:e}=window.location;if(e&&e.startsWith("#/"))return e.slice(1);const n=Xi();return n!=="/"&&t.startsWith(n)?t.slice(n.length-1)||"/":t||"/"}function Vs(t){const e=Xi(),n=t.startsWith("/")?t.slice(1):t;return new URL(e+n,window.location.origin).toString()}const of=D.createContext(null),Va=()=>{const t=D.useContext(of);if(!t)throw new Error("useAuthInternal must be used within an AuthProvider");return t};function qs({children:t,config:e}){const[n,r]=D.useState({user:null,loading:!0,error:null,initialized:!1}),[i,s]=D.useState(null);D.useEffect(()=>{(async()=>{try{if(!O.isInitialized)throw new Error("ConfigService must be initialized before AuthProvider. Use AppInitializer.");const S=ne.create("AuthProvider");s(S),await xe.initialize(e);const k=await xe.getUser();if(k&&!k.expired){const j=k.profile.preferred_username||k.profile.email||"unknown",h=k.expires_at?new Date(k.expires_at*1e3).toISOString():"unknown";S.info(`Existing session found for user: ${j}, expires: ${h}`),r({user:k,loading:!1,error:null,initialized:!0})}else S.debug("No existing session found"),r({user:null,loading:!1,error:null,initialized:!0})}catch(S){console.error("AuthProvider: Failed to initialize auth:",S),i&&i.error("Failed to initialize authentication",S),r({user:null,loading:!1,error:S.message,initialized:!1})}})();const m=xe.onUserChange(S=>{r(k=>({...k,user:S}))});return()=>m()},[e]);const o=async()=>{try{if(!n.initialized)throw new Error("Authentication system not initialized. Please wait...");i==null||i.debug("Initiating signin redirect"),r(f=>({...f,error:null})),await xe.signin()}catch(f){throw i==null||i.error("User sign-in failed",f),r(m=>({...m,error:f.message})),f}},a=async()=>{try{if(!n.initialized)throw new Error("Authentication system not initialized");if(r(f=>({...f,error:null})),n.user&&i){const f=n.user.profile.preferred_username||n.user.profile.email,m=n.user.expires_at?Math.floor((n.user.expires_at-Date.now()/1e3)/60):"unknown",S=`userId: ${n.user.profile.sub}, sessionDuration: ${m} minutes`;i.info(`User ${f} signing out. ${S}`)}else i&&i.info("No user session found");await xe.signout(),r(f=>({...f,user:null}))}catch(f){throw console.error("Signout error:",f),i==null||i.error("User sign-out failed",f),r(m=>({...m,error:f.message})),f}},l=async()=>{try{if(!n.initialized)throw new Error("Authentication system not initialized");i==null||i.debug("Attempting token renewal"),r(m=>({...m,error:null}));const f=await xe.renewToken();return r(m=>({...m,user:f})),i==null||i.info("Token renewed successfully"),f}catch(f){throw i==null||i.error("Token renewal failed",f),r(m=>({...m,error:f.message})),f}},c=async()=>{if(!n.initialized)throw new Error("Authentication system not initialized");return xe.getAccessToken()},d=f=>{r(m=>({...m,user:f}))},g={user:n.user,loading:n.loading,error:n.error,initialized:n.initialized,isAuthenticated:n.user!==null&&!n.user.expired,signin:o,signout:a,getAccessToken:c,renewToken:l,setUser:d};return N.createElement(of.Provider,{value:g},t)}function Ep({children:t,loadingComponent:e,redirectingComponent:n}){const{isAuthenticated:r,loading:i,signin:s,initialized:o}=Va(),a=D.useRef(!1),l=D.useRef(!1),c=D.useMemo(()=>ne.create("ProtectedRoute"),[]);return D.useEffect(()=>{(!o||i)&&c.debug(`Auth state: initialized=${o}, loading=${i}`)},[o,i,c]),D.useEffect(()=>{o&&!i&&!r&&!a.current&&(a.current=!0,c.debug("User not authenticated, redirecting to signin"),s()),r&&(a.current=!1)},[o,i,r,s,c]),D.useEffect(()=>{r&&!l.current&&(l.current=!0,c.debug("User authenticated, access granted")),!r&&l.current&&(l.current=!1)},[r,c]),!o||i?e?N.createElement(N.Fragment,null,e):N.createElement("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center"},N.createElement("div",{className:"bg-white p-8 rounded-lg shadow-md"},N.createElement("div",{className:"flex items-center space-x-3"},N.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),N.createElement("div",{className:"text-lg"},"Loading...")))):r?N.createElement(N.Fragment,null,t):n?N.createElement(N.Fragment,null,n):N.createElement("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center"},N.createElement("div",{className:"bg-white p-8 rounded-lg shadow-md"},N.createElement("div",{className:"flex items-center space-x-3"},N.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),N.createElement("div",{className:"text-lg"},"Redirecting to login..."))))}function Cp({onSuccess:t,redirectUrl:e="/",errorComponent:n,loadingComponent:r}){const{setUser:i,initialized:s}=Va(),[o,a]=D.useState(null),[l,c]=D.useState(null),d=D.useRef(!1);return D.useEffect(()=>{if(!s){console.log("Waiting for auth initialization...");return}if(d.current)return;d.current=!0;const g=ne.create("SigninCallback");c(g),(async()=>{try{const m=await xe.completeSignin();i(m);const S=m.profile.preferred_username||m.profile.email,k=`userId: ${m.profile.sub}, email: ${m.profile.email}, scopes: ${m.scope}`;g.info(`User ${S} authenticated successfully. ${k}`),t?t():window.location.href=e}catch(m){if(xe.shouldRestartAuth(m)){const S=await xe.getUser();if(S){g.info("Callback already processed, user is authenticated"),i(S),t?t():window.location.href=e;return}g.warn("Authentication callback expired or invalidated, restarting auth flow",m);try{await xe.clearStaleState(),await xe.signin();return}catch(k){g.error("Failed to restart auth flow",k),a("Authentication session expired. Please try again.");return}}console.error("Signin callback error:",m),g.error("Authentication failed",m),a(m.message)}})()},[i,t,e,s]),o?n?N.createElement(N.Fragment,null,n(o)):N.createElement("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4"},N.createElement("div",{className:"bg-red-50 border border-red-200 p-6 rounded-lg shadow-md max-w-2xl"},N.createElement("h2",{className:"text-xl font-bold text-red-800 mb-2"},"Authentication Error"),N.createElement("p",{className:"text-red-700 mb-4"},o),N.createElement("button",{onClick:()=>window.location.href=e,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"},"Go to Home"))):r?N.createElement(N.Fragment,null,r):N.createElement("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center"},N.createElement("div",{className:"bg-white p-8 rounded-lg shadow-md"},N.createElement("div",{className:"flex items-center space-x-3"},N.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),N.createElement("div",{className:"text-lg"},"Completing authentication..."))))}function xp({redirectUrl:t="/"}){const e=D.useRef(!1);return D.useEffect(()=>{if(e.current)return;e.current=!0;const n=ne.create("SignoutCallback");(async()=>{try{await xe.completeSignout(),window.location.replace(t)}catch(i){n.error("Signout callback error",i),window.location.replace(t)}})()},[t]),N.createElement("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center"},N.createElement("div",{className:"bg-white p-8 rounded-lg shadow-md"},N.createElement("div",{className:"flex items-center space-x-3"},N.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),N.createElement("div",{className:"text-lg"},"Completing sign out..."))))}function Ip(){return D.useEffect(()=>{xe.completeSilentSignin().catch(t=>{console.error("Silent callback error:",t)})},[]),null}const af=D.createContext(null);function ps(){const t=D.useContext(af);if(!t)throw new Error("useAppContext must be used within AppInitializer");return t}function Tp(){return ps().auth}function Pp({children:t}){const e=Va(),n={config:{loggerService:O.LoggerService||"",logLevel:O.LogLevel||"",clientId:O.ClientId||"",openIdConfig:O.OpenIdConfig||"",isInitialized:O.isInitialized},auth:{initialized:e.initialized,isAuthenticated:e.isAuthenticated,user:e.user,getAccessToken:()=>e.getAccessToken(),renewToken:()=>e.renewToken(),signin:()=>e.signin(),signout:()=>e.signout()},createLogger:r=>ne.create(r)};return N.createElement(af.Provider,{value:n},t)}function Rp({children:t,appType:e="user",staticConfig:n,dynamicConfig:r,staticAuthConfig:i,loadingComponent:s,errorComponent:o,redirectingComponent:a}){const[l,c]=D.useState({ready:!1,error:null});r!=null&&r.basePath&&Sp(r.basePath);const d=kp(),g=d==="/signin/callback",f=d==="/signout/callback",m=d==="/silent-callback";if(typeof window<"u"&&window.self!==window.top&&m)return N.createElement(Ip,null);if(D.useEffect(()=>{(async()=>{try{if(O.isInitialized){console.log("AppInitializer: ConfigService already initialized, skipping"),c({ready:!0,error:null});return}const h=!!r,u=Re.validate(!!n,h);if(u.length>0){Re.logValidationErrors(u),c({ready:!1,error:"Configuration validation failed. Check console for details."});return}Re.logConfiguration(!!n,h),wp({getAccessToken:()=>xe.getAccessToken()}),n?(console.log("AppInitializer: Using static config (bypassing ConfigWebService)"),O.initializeWithStaticConfig({...n,appDomain:(r==null?void 0:r.appDomain)??Re.get("IF_APP_DOMAIN"),appName:Re.get("IF_APP_NAME"),environment:Re.get("IF_ENVIRONMENT"),appType:e})):r?(console.log(`AppInitializer: Using dynamic URL config - appDomain: ${r.appDomain}`),await O.initialize({configServiceUrl:r.configServiceUrl,appDomain:r.appDomain,appType:e,appName:Re.get("IF_APP_NAME"),environment:Re.get("IF_ENVIRONMENT")})):(console.log(`AppInitializer: Initializing ConfigService with appType: ${e}`),await O.initialize({configServiceUrl:Re.get("IF_CONFIG_SERVICE_URL"),appDomain:Re.get("IF_APP_DOMAIN"),appType:e,appName:Re.get("IF_APP_NAME"),environment:Re.get("IF_ENVIRONMENT")})),console.log("AppInitializer: ConfigService initialized successfully"),await ne.configureFromConfigService(),console.log("AppInitializer: LoggerService configured from ConfigService"),c({ready:!0,error:null})}catch(h){console.error("AppInitializer: Failed to initialize ConfigService:",h),c({ready:!1,error:h.message||"Failed to initialize configuration"})}})()},[e,n,r]),D.useEffect(()=>{l.ready&&(s||console.warn("[AppInitializer] No loadingComponent provided, using default"),o||console.warn("[AppInitializer] No errorComponent provided, using default"),a||console.warn("[AppInitializer] No redirectingComponent provided, using default"))},[l.ready,s,o,a]),l.error)return o?N.createElement(N.Fragment,null,o(l.error)):N.createElement("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4"},N.createElement("div",{className:"bg-red-50 border border-red-200 p-6 rounded-lg shadow-md max-w-2xl"},N.createElement("h2",{className:"text-xl font-bold text-red-800 mb-2"},"Configuration Error"),N.createElement("p",{className:"text-red-700 mb-4"},l.error),N.createElement("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"},"Retry")));if(!l.ready)return s?N.createElement(N.Fragment,null,s):N.createElement("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center"},N.createElement("div",{className:"bg-white p-8 rounded-lg shadow-md"},N.createElement("div",{className:"flex items-center space-x-3"},N.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),N.createElement("div",{className:"text-lg"},"Initializing application..."))));const k={redirectUri:(r==null?void 0:r.redirectUri)??Vs("signin/callback"),postLogoutRedirectUri:(r==null?void 0:r.postLogoutRedirectUri)??Vs("signout/callback"),silentRedirectUri:(r==null?void 0:r.silentRedirectUri)??Vs("silent-callback"),clientId:(i==null?void 0:i.clientId)??O.ClientId,authority:(i==null?void 0:i.authority)??O.OpenIdConfig};return r&&console.log("AppInitializer: Using dynamic URL config with redirect URIs",{redirectUri:k.redirectUri,postLogoutRedirectUri:k.postLogoutRedirectUri,silentRedirectUri:k.silentRedirectUri}),i&&console.log("AppInitializer: Using staticAuthConfig overrides",{clientId:i.clientId?"(overridden)":"(from ConfigService)",authority:i.authority?"(overridden)":"(from ConfigService)"}),g?N.createElement(qs,{config:k},N.createElement(Cp,{redirectUrl:Xi(),loadingComponent:s,errorComponent:o})):f?N.createElement(qs,{config:k},N.createElement(xp,{redirectUrl:Xi()})):N.createElement(qs,{config:k},N.createElement(Pp,null,N.createElement(Ep,{loadingComponent:s,redirectingComponent:a},t)))}const lf=D.createContext(),Np=()=>{const t=D.useContext(lf);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},bp=({children:t})=>{const[e,n]=D.useState(()=>{const i=localStorage.getItem("if-log-viewer-theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});D.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("if-log-viewer-theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")};return _.jsx(lf.Provider,{value:{theme:e,setTheme:n,toggleTheme:r},children:t})};class ln extends Error{constructor(e,n){const r=new.target.prototype;super(`${e}: Status code '${n}'`),this.statusCode=n,this.__proto__=r}}class qa extends Error{constructor(e="A timeout occurred."){const n=new.target.prototype;super(e),this.__proto__=n}}class nt extends Error{constructor(e="An abort occurred."){const n=new.target.prototype;super(e),this.__proto__=n}}class Dp extends Error{constructor(e,n){const r=new.target.prototype;super(e),this.transport=n,this.errorType="UnsupportedTransportError",this.__proto__=r}}class Lp extends Error{constructor(e,n){const r=new.target.prototype;super(e),this.transport=n,this.errorType="DisabledTransportError",this.__proto__=r}}class Ap extends Error{constructor(e,n){const r=new.target.prototype;super(e),this.transport=n,this.errorType="FailedToStartTransportError",this.__proto__=r}}class Ic extends Error{constructor(e){const n=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=n}}class Up extends Error{constructor(e,n){const r=new.target.prototype;super(e),this.innerErrors=n,this.__proto__=r}}class cf{constructor(e,n,r){this.statusCode=e,this.statusText=n,this.content=r}}class ms{get(e,n){return this.send({...n,method:"GET",url:e})}post(e,n){return this.send({...n,method:"POST",url:e})}delete(e,n){return this.send({...n,method:"DELETE",url:e})}getCookieString(e){return""}}var v;(function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"})(v||(v={}));class jr{constructor(){}log(e,n){}}jr.instance=new jr;const Mp="10.0.0";class oe{static isRequired(e,n){if(e==null)throw new Error(`The '${n}' argument is required.`)}static isNotEmpty(e,n){if(!e||e.match(/^\s*$/))throw new Error(`The '${n}' argument should not be empty.`)}static isIn(e,n,r){if(!(e in n))throw new Error(`Unknown ${r} value: ${e}.`)}}class X{static get isBrowser(){return!X.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!X.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!X.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Or(t,e){let n="";return mn(t)?(n=`Binary data of length ${t.byteLength}`,e&&(n+=`. Content: '${jp(t)}'`)):typeof t=="string"&&(n=`String data of length ${t.length}`,e&&(n+=`. Content: '${t}'`)),n}function jp(t){const e=new Uint8Array(t);let n="";return e.forEach(r=>{const i=r<16?"0":"";n+=`0x${i}${r.toString(16)} `}),n.substring(0,n.length-1)}function mn(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}async function uf(t,e,n,r,i,s){const o={},[a,l]=Kn();o[a]=l,t.log(v.Trace,`(${e} transport) sending data. ${Or(i,s.logMessageContent)}.`);const c=mn(i)?"arraybuffer":"text",d=await n.post(r,{content:i,headers:{...o,...s.headers},responseType:c,timeout:s.timeout,withCredentials:s.withCredentials});t.log(v.Trace,`(${e} transport) request complete. Response status: ${d.statusCode}.`)}function Op(t){return t===void 0?new Yi(v.Information):t===null?jr.instance:t.log!==void 0?t:new Yi(t)}class zp{constructor(e,n){this._subject=e,this._observer=n}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(n=>{})}}class Yi{constructor(e){this._minLevel=e,this.out=console}log(e,n){if(e>=this._minLevel){const r=`[${new Date().toISOString()}] ${v[e]}: ${n}`;switch(e){case v.Critical:case v.Error:this.out.error(r);break;case v.Warning:this.out.warn(r);break;case v.Information:this.out.info(r);break;default:this.out.log(r);break}}}}function Kn(){let t="X-SignalR-User-Agent";return X.isNode&&(t="User-Agent"),[t,$p(Mp,Fp(),Wp(),Hp())]}function $p(t,e,n,r){let i="Microsoft SignalR/";const s=t.split(".");return i+=`${s[0]}.${s[1]}`,i+=` (${t}; `,e&&e!==""?i+=`${e}; `:i+="Unknown OS; ",i+=`${n}`,r?i+=`; ${r}`:i+="; Unknown Runtime Version",i+=")",i}function Fp(){if(X.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function Hp(){if(X.isNode)return process.versions.node}function Wp(){return X.isNode?"NodeJS":"Browser"}function Ks(t){return t.stack?t.stack:t.message?t.message:`${t}`}function Bp(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class Vp extends ms{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||X.isNode){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(n("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=n("node-fetch"):this._fetchType=fetch,this._fetchType=n("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(Bp());if(typeof AbortController>"u"){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=n("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new nt;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const n=new this._abortControllerType;let r;e.abortSignal&&(e.abortSignal.onabort=()=>{n.abort(),r=new nt});let i=null;if(e.timeout){const l=e.timeout;i=setTimeout(()=>{n.abort(),this._logger.log(v.Warning,"Timeout from HTTP request."),r=new qa},l)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},mn(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let s;try{s=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:n.signal})}catch(l){throw r||(this._logger.log(v.Warning,`Error from HTTP request. ${l}.`),l)}finally{i&&clearTimeout(i),e.abortSignal&&(e.abortSignal.onabort=null)}if(!s.ok){const l=await Tc(s,"text");throw new ln(l||s.statusText,s.status)}const a=await Tc(s,e.responseType);return new cf(s.status,s.statusText,a)}getCookieString(e){let n="";return X.isNode&&this._jar&&this._jar.getCookies(e,(r,i)=>n=i.join("; ")),n}}function Tc(t,e){let n;switch(e){case"arraybuffer":n=t.arrayBuffer();break;case"text":n=t.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:n=t.text();break}return n}class qp extends ms{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new nt):e.method?e.url?new Promise((n,r)=>{const i=new XMLHttpRequest;i.open(e.method,e.url,!0),i.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(mn(e.content)?i.setRequestHeader("Content-Type","application/octet-stream"):i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const s=e.headers;s&&Object.keys(s).forEach(o=>{i.setRequestHeader(o,s[o])}),e.responseType&&(i.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),r(new nt)}),e.timeout&&(i.timeout=e.timeout),i.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),i.status>=200&&i.status<300?n(new cf(i.status,i.statusText,i.response||i.responseText)):r(new ln(i.response||i.responseText||i.statusText,i.status))},i.onerror=()=>{this._logger.log(v.Warning,`Error from HTTP request. ${i.status}: ${i.statusText}.`),r(new ln(i.statusText,i.status))},i.ontimeout=()=>{this._logger.log(v.Warning,"Timeout from HTTP request."),r(new qa)},i.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class Kp extends ms{constructor(e){if(super(),typeof fetch<"u"||X.isNode)this._httpClient=new Vp(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new qp(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new nt):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class Oe{static write(e){return`${e}${Oe.RecordSeparator}`}static parse(e){if(e[e.length-1]!==Oe.RecordSeparator)throw new Error("Message is incomplete.");const n=e.split(Oe.RecordSeparator);return n.pop(),n}}Oe.RecordSeparatorCode=30;Oe.RecordSeparator=String.fromCharCode(Oe.RecordSeparatorCode);class Qp{writeHandshakeRequest(e){return Oe.write(JSON.stringify(e))}parseHandshakeResponse(e){let n,r;if(mn(e)){const a=new Uint8Array(e),l=a.indexOf(Oe.RecordSeparatorCode);if(l===-1)throw new Error("Message is incomplete.");const c=l+1;n=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,c))),r=a.byteLength>c?a.slice(c).buffer:null}else{const a=e,l=a.indexOf(Oe.RecordSeparator);if(l===-1)throw new Error("Message is incomplete.");const c=l+1;n=a.substring(0,c),r=a.length>c?a.substring(c):null}const i=Oe.parse(n),s=JSON.parse(i[0]);if(s.type)throw new Error("Expected a handshake response from the server.");return[r,s]}}var A;(function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close",t[t.Ack=8]="Ack",t[t.Sequence=9]="Sequence"})(A||(A={}));class Jp{constructor(){this.observers=[]}next(e){for(const n of this.observers)n.next(e)}error(e){for(const n of this.observers)n.error&&n.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new zp(this,e)}}class Gp{constructor(e,n,r){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=n,this._bufferSize=r}async _send(e){const n=this._protocol.writeMessage(e);let r=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let i=()=>{},s=()=>{};mn(n)?this._bufferedByteCount+=n.byteLength:this._bufferedByteCount+=n.length,this._bufferedByteCount>=this._bufferSize&&(r=new Promise((o,a)=>{i=o,s=a})),this._messages.push(new Xp(n,this._totalMessageCount,i,s))}try{this._reconnectInProgress||await this._connection.send(n)}catch{this._disconnected()}await r}_ack(e){let n=-1;for(let r=0;r<this._messages.length;r++){const i=this._messages[r];if(i._id<=e.sequenceId)n=r,mn(i._message)?this._bufferedByteCount-=i._message.byteLength:this._bufferedByteCount-=i._message.length,i._resolver();else if(this._bufferedByteCount<this._bufferSize)i._resolver();else break}n!==-1&&(this._messages=this._messages.slice(n+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==A.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const n=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,n<=this._latestReceivedSequenceId?(n===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=n,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:A.Sequence,sequenceId:e}));const n=this._messages;for(const r of n)await this._connection.send(r._message);this._reconnectInProgress=!1}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(const n of this._messages)n._rejector(e)}_isInvocationMessage(e){switch(e.type){case A.Invocation:case A.StreamItem:case A.Completion:case A.StreamInvocation:case A.CancelInvocation:return!0;case A.Close:case A.Sequence:case A.Ping:case A.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:A.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class Xp{constructor(e,n,r,i){this._message=e,this._id=n,this._resolver=r,this._rejector=i}}const Yp=30*1e3,Zp=15*1e3,em=1e5;var K;(function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"})(K||(K={}));class Ka{static create(e,n,r,i,s,o,a){return new Ka(e,n,r,i,s,o,a)}constructor(e,n,r,i,s,o,a){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(v.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},oe.isRequired(e,"connection"),oe.isRequired(n,"logger"),oe.isRequired(r,"protocol"),this.serverTimeoutInMilliseconds=s??Yp,this.keepAliveIntervalInMilliseconds=o??Zp,this._statefulReconnectBufferSize=a??em,this._logger=n,this._protocol=r,this.connection=e,this._reconnectPolicy=i,this._handshakeProtocol=new Qp,this.connection.onreceive=l=>this._processIncomingData(l),this.connection.onclose=l=>this._connectionClosed(l),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=K.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:A.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==K.Disconnected&&this._connectionState!==K.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==K.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=K.Connecting,this._logger.log(v.Debug,"Starting HubConnection.");try{await this._startInternal(),X.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=K.Connected,this._connectionStarted=!0,this._logger.log(v.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=K.Disconnected,this._logger.log(v.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((n,r)=>{this._handshakeResolver=n,this._handshakeRejecter=r});await this.connection.start(this._protocol.transferFormat);try{let n=this._protocol.version;this.connection.features.reconnect||(n=1);const r={protocol:this._protocol.name,version:n};if(this._logger.log(v.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(r)),this._logger.log(v.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new Gp(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(n){throw this._logger.log(v.Debug,`Hub handshake failed with error '${n}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(n),n}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){if(this._connectionState===K.Disconnected)return this._logger.log(v.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===K.Disconnecting)return this._logger.log(v.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const n=this._connectionState;return this._connectionState=K.Disconnecting,this._logger.log(v.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(v.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(n===K.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new nt("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...n){const[r,i]=this._replaceStreamingParams(n),s=this._createStreamInvocation(e,n,i);let o;const a=new Jp;return a.cancelCallback=()=>{const l=this._createCancelInvocation(s.invocationId);return delete this._callbacks[s.invocationId],o.then(()=>this._sendWithProtocol(l))},this._callbacks[s.invocationId]=(l,c)=>{if(c){a.error(c);return}else l&&(l.type===A.Completion?l.error?a.error(new Error(l.error)):a.complete():a.next(l.item))},o=this._sendWithProtocol(s).catch(l=>{a.error(l),delete this._callbacks[s.invocationId]}),this._launchStreams(r,o),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...n){const[r,i]=this._replaceStreamingParams(n),s=this._sendWithProtocol(this._createInvocation(e,n,!0,i));return this._launchStreams(r,s),s}invoke(e,...n){const[r,i]=this._replaceStreamingParams(n),s=this._createInvocation(e,n,!1,i);return new Promise((a,l)=>{this._callbacks[s.invocationId]=(d,g)=>{if(g){l(g);return}else d&&(d.type===A.Completion?d.error?l(new Error(d.error)):a(d.result):l(new Error(`Unexpected message type: ${d.type}`)))};const c=this._sendWithProtocol(s).catch(d=>{l(d),delete this._callbacks[s.invocationId]});this._launchStreams(r,c)})}on(e,n){!e||!n||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(n)===-1&&this._methods[e].push(n))}off(e,n){if(!e)return;e=e.toLowerCase();const r=this._methods[e];if(r)if(n){const i=r.indexOf(n);i!==-1&&(r.splice(i,1),r.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const n=this._protocol.parseMessages(e,this._logger);for(const r of n)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(r)))switch(r.type){case A.Invocation:this._invokeClientMethod(r).catch(i=>{this._logger.log(v.Error,`Invoke client method threw error: ${Ks(i)}`)});break;case A.StreamItem:case A.Completion:{const i=this._callbacks[r.invocationId];if(i){r.type===A.Completion&&delete this._callbacks[r.invocationId];try{i(r)}catch(s){this._logger.log(v.Error,`Stream callback threw error: ${Ks(s)}`)}}break}case A.Ping:break;case A.Close:{this._logger.log(v.Information,"Close message received from server.");const i=r.error?new Error("Server returned an error on close: "+r.error):void 0;r.allowReconnect===!0?this.connection.stop(i):this._stopPromise=this._stopInternal(i);break}case A.Ack:this._messageBuffer&&this._messageBuffer._ack(r);break;case A.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(r);break;default:this._logger.log(v.Warning,`Invalid message type: ${r.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let n,r;try{[r,n]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(i){const s="Error parsing handshake response: "+i;this._logger.log(v.Error,s);const o=new Error(s);throw this._handshakeRejecter(o),o}if(n.error){const i="Server returned handshake error: "+n.error;this._logger.log(v.Error,i);const s=new Error(i);throw this._handshakeRejecter(s),s}else this._logger.log(v.Debug,"Server handshake complete.");return this._handshakeResolver(),r}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let e=this._nextKeepAlive-new Date().getTime();if(e<0){this._connectionState===K.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===K.Connected&&await this._trySendPingMessage()},e))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const n=e.target.toLowerCase(),r=this._methods[n];if(!r){this._logger.log(v.Warning,`No client method with the name '${n}' found.`),e.invocationId&&(this._logger.log(v.Warning,`No result given for '${n}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}const i=r.slice(),s=!!e.invocationId;let o,a,l;for(const c of i)try{const d=o;o=await c.apply(this,e.arguments),s&&o&&d&&(this._logger.log(v.Error,`Multiple results provided for '${n}'. Sending error to server.`),l=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),a=void 0}catch(d){a=d,this._logger.log(v.Error,`A callback for the method '${n}' threw error '${d}'.`)}l?await this._sendWithProtocol(l):s?(a?l=this._createCompletionMessage(e.invocationId,`${a}`,null):o!==void 0?l=this._createCompletionMessage(e.invocationId,null,o):(this._logger.log(v.Warning,`No result given for '${n}' method and invocation ID '${e.invocationId}'.`),l=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(l)):o&&this._logger.log(v.Error,`Result given for '${n}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(v.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new nt("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===K.Disconnecting?this._completeClose(e):this._connectionState===K.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===K.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=K.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),X.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(n=>n.apply(this,[e]))}catch(n){this._logger.log(v.Error,`An onclose callback called with error '${e}' threw error '${n}'.`)}}}async _reconnect(e){const n=Date.now();let r=0,i=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),s=this._getNextRetryDelay(r,0,i);if(s===null){this._logger.log(v.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=K.Reconnecting,e?this._logger.log(v.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(v.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(o=>o.apply(this,[e]))}catch(o){this._logger.log(v.Error,`An onreconnecting callback called with error '${e}' threw error '${o}'.`)}if(this._connectionState!==K.Reconnecting){this._logger.log(v.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;s!==null;){if(this._logger.log(v.Information,`Reconnect attempt number ${r+1} will start in ${s} ms.`),await new Promise(o=>{this._reconnectDelayHandle=setTimeout(o,s)}),this._reconnectDelayHandle=void 0,this._connectionState!==K.Reconnecting){this._logger.log(v.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=K.Connected,this._logger.log(v.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(o=>o.apply(this,[this.connection.connectionId]))}catch(o){this._logger.log(v.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${o}'.`)}return}catch(o){if(this._logger.log(v.Information,`Reconnect attempt failed because of error '${o}'.`),this._connectionState!==K.Reconnecting){this._logger.log(v.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===K.Disconnecting&&this._completeClose();return}r++,i=o instanceof Error?o:new Error(o.toString()),s=this._getNextRetryDelay(r,Date.now()-n,i)}}this._logger.log(v.Information,`Reconnect retries have been exhausted after ${Date.now()-n} ms and ${r} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,n,r){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:n,previousRetryCount:e,retryReason:r})}catch(i){return this._logger.log(v.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${n}) threw error '${i}'.`),null}}_cancelCallbacksWithError(e){const n=this._callbacks;this._callbacks={},Object.keys(n).forEach(r=>{const i=n[r];try{i(null,e)}catch(s){this._logger.log(v.Error,`Stream 'error' callback called with '${e}' threw error: ${Ks(s)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,n,r,i){if(r)return i.length!==0?{target:e,arguments:n,streamIds:i,type:A.Invocation}:{target:e,arguments:n,type:A.Invocation};{const s=this._invocationId;return this._invocationId++,i.length!==0?{target:e,arguments:n,invocationId:s.toString(),streamIds:i,type:A.Invocation}:{target:e,arguments:n,invocationId:s.toString(),type:A.Invocation}}}_launchStreams(e,n){if(e.length!==0){n||(n=Promise.resolve());for(const r in e)e[r].subscribe({complete:()=>{n=n.then(()=>this._sendWithProtocol(this._createCompletionMessage(r)))},error:i=>{let s;i instanceof Error?s=i.message:i&&i.toString?s=i.toString():s="Unknown error",n=n.then(()=>this._sendWithProtocol(this._createCompletionMessage(r,s)))},next:i=>{n=n.then(()=>this._sendWithProtocol(this._createStreamItemMessage(r,i)))}})}}_replaceStreamingParams(e){const n=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(this._isObservable(s)){const o=this._invocationId;this._invocationId++,n[o]=s,r.push(o.toString()),e.splice(i,1)}}return[n,r]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,n,r){const i=this._invocationId;return this._invocationId++,r.length!==0?{target:e,arguments:n,invocationId:i.toString(),streamIds:r,type:A.StreamInvocation}:{target:e,arguments:n,invocationId:i.toString(),type:A.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:A.CancelInvocation}}_createStreamItemMessage(e,n){return{invocationId:e,item:n,type:A.StreamItem}}_createCompletionMessage(e,n,r){return n?{error:n,invocationId:e,type:A.Completion}:{invocationId:e,result:r,type:A.Completion}}_createCloseMessage(){return{type:A.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const tm=[0,2e3,1e4,3e4,null];class Pc{constructor(e){this._retryDelays=e!==void 0?[...e,null]:tm}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class cn{}cn.Authorization="Authorization";cn.Cookie="Cookie";class nm extends ms{constructor(e,n){super(),this._innerClient=e,this._accessTokenFactory=n}async send(e){let n=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(n=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const r=await this._innerClient.send(e);return n&&r.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):r}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[cn.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[cn.Authorization]&&delete e.headers[cn.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var ce;(function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"})(ce||(ce={}));var Se;(function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"})(Se||(Se={}));let rm=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Rc{get pollAborted(){return this._pollAbort.aborted}constructor(e,n,r){this._httpClient=e,this._logger=n,this._pollAbort=new rm,this._options=r,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,n){if(oe.isRequired(e,"url"),oe.isRequired(n,"transferFormat"),oe.isIn(n,Se,"transferFormat"),this._url=e,this._logger.log(v.Trace,"(LongPolling transport) Connecting."),n===Se.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[r,i]=Kn(),s={[r]:i,...this._options.headers},o={abortSignal:this._pollAbort.signal,headers:s,timeout:1e5,withCredentials:this._options.withCredentials};n===Se.Binary&&(o.responseType="arraybuffer");const a=`${e}&_=${Date.now()}`;this._logger.log(v.Trace,`(LongPolling transport) polling: ${a}.`);const l=await this._httpClient.get(a,o);l.statusCode!==200?(this._logger.log(v.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new ln(l.statusText||"",l.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,o)}async _poll(e,n){try{for(;this._running;)try{const r=`${e}&_=${Date.now()}`;this._logger.log(v.Trace,`(LongPolling transport) polling: ${r}.`);const i=await this._httpClient.get(r,n);i.statusCode===204?(this._logger.log(v.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):i.statusCode!==200?(this._logger.log(v.Error,`(LongPolling transport) Unexpected response code: ${i.statusCode}.`),this._closeError=new ln(i.statusText||"",i.statusCode),this._running=!1):i.content?(this._logger.log(v.Trace,`(LongPolling transport) data received. ${Or(i.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(i.content)):this._logger.log(v.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(r){this._running?r instanceof qa?this._logger.log(v.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=r,this._running=!1):this._logger.log(v.Trace,`(LongPolling transport) Poll errored after shutdown: ${r.message}`)}}finally{this._logger.log(v.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?uf(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(v.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(v.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[n,r]=Kn();e[n]=r;const i={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let s;try{await this._httpClient.delete(this._url,i)}catch(o){s=o}s?s instanceof ln&&(s.statusCode===404?this._logger.log(v.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(v.Trace,`(LongPolling transport) Error sending a DELETE request: ${s}`)):this._logger.log(v.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(v.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(v.Trace,e),this.onclose(this._closeError)}}}class im{constructor(e,n,r,i){this._httpClient=e,this._accessToken=n,this._logger=r,this._options=i,this.onreceive=null,this.onclose=null}async connect(e,n){return oe.isRequired(e,"url"),oe.isRequired(n,"transferFormat"),oe.isIn(n,Se,"transferFormat"),this._logger.log(v.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((r,i)=>{let s=!1;if(n!==Se.Text){i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let o;if(X.isBrowser||X.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const a=this._httpClient.getCookieString(e),l={};l.Cookie=a;const[c,d]=Kn();l[c]=d,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...l,...this._options.headers}})}try{o.onmessage=a=>{if(this.onreceive)try{this._logger.log(v.Trace,`(SSE transport) data received. ${Or(a.data,this._options.logMessageContent)}.`),this.onreceive(a.data)}catch(l){this._close(l);return}},o.onerror=a=>{s?this._close():i(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(v.Information,`SSE connected to ${this._url}`),this._eventSource=o,s=!0,r()}}catch(a){i(a);return}})}async send(e){return this._eventSource?uf(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class sm{constructor(e,n,r,i,s,o){this._logger=r,this._accessTokenFactory=n,this._logMessageContent=i,this._webSocketConstructor=s,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=o}async connect(e,n){oe.isRequired(e,"url"),oe.isRequired(n,"transferFormat"),oe.isIn(n,Se,"transferFormat"),this._logger.log(v.Trace,"(WebSockets transport) Connecting.");let r;return this._accessTokenFactory&&(r=await this._accessTokenFactory()),new Promise((i,s)=>{e=e.replace(/^http/,"ws");let o;const a=this._httpClient.getCookieString(e);let l=!1;if(X.isNode||X.isReactNative){const c={},[d,g]=Kn();c[d]=g,r&&(c[cn.Authorization]=`Bearer ${r}`),a&&(c[cn.Cookie]=a),o=new this._webSocketConstructor(e,void 0,{headers:{...c,...this._headers}})}else r&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(r)}`);o||(o=new this._webSocketConstructor(e)),n===Se.Binary&&(o.binaryType="arraybuffer"),o.onopen=c=>{this._logger.log(v.Information,`WebSocket connected to ${e}.`),this._webSocket=o,l=!0,i()},o.onerror=c=>{let d=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?d=c.error:d="There was an error with the transport",this._logger.log(v.Information,`(WebSockets transport) ${d}.`)},o.onmessage=c=>{if(this._logger.log(v.Trace,`(WebSockets transport) data received. ${Or(c.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(c.data)}catch(d){this._close(d);return}},o.onclose=c=>{if(l)this._close(c);else{let d=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?d=c.error:d="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",s(new Error(d))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(v.Trace,`(WebSockets transport) sending data. ${Or(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(v.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}const Nc=100;class om{constructor(e,n={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,oe.isRequired(e,"url"),this._logger=Op(n.logger),this.baseUrl=this._resolveUrl(e),n=n||{},n.logMessageContent=n.logMessageContent===void 0?!1:n.logMessageContent,typeof n.withCredentials=="boolean"||n.withCredentials===void 0)n.withCredentials=n.withCredentials===void 0?!0:n.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");n.timeout=n.timeout===void 0?100*1e3:n.timeout;let r=null,i=null;if(X.isNode&&typeof require<"u"){const s=typeof __webpack_require__=="function"?__non_webpack_require__:require;r=s("ws"),i=s("eventsource")}!X.isNode&&typeof WebSocket<"u"&&!n.WebSocket?n.WebSocket=WebSocket:X.isNode&&!n.WebSocket&&r&&(n.WebSocket=r),!X.isNode&&typeof EventSource<"u"&&!n.EventSource?n.EventSource=EventSource:X.isNode&&!n.EventSource&&typeof i<"u"&&(n.EventSource=i),this._httpClient=new nm(n.httpClient||new Kp(this._logger),n.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=n,this.onreceive=null,this.onclose=null}async start(e){if(e=e||Se.Binary,oe.isIn(e,Se,"transferFormat"),this._logger.log(v.Debug,`Starting connection with transfer format '${Se[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const n="Failed to start the HttpConnection before stop() was called.";return this._logger.log(v.Error,n),await this._stopPromise,Promise.reject(new nt(n))}else if(this._connectionState!=="Connected"){const n="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(v.Error,n),Promise.reject(new nt(n))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Qa(this.transport)),this._sendQueue.send(e))}async stop(e){if(this._connectionState==="Disconnected")return this._logger.log(v.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(v.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(n=>{this._stopPromiseResolver=n}),await this._stopInternal(e),await this._stopPromise}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(n){this._logger.log(v.Error,`HttpConnection.transport.stop() threw error '${n}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(v.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let n=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===ce.WebSockets)this.transport=this._constructTransport(ce.WebSockets),await this._startTransport(n,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let r=null,i=0;do{if(r=await this._getNegotiationResponse(n),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new nt("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(r.url&&(n=r.url),r.accessToken){const s=r.accessToken;this._accessTokenFactory=()=>s,this._httpClient._accessToken=s,this._httpClient._accessTokenFactory=void 0}i++}while(r.url&&i<Nc);if(i===Nc&&r.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(n,this._options.transport,r,e)}this.transport instanceof Rc&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(v.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(r){return this._logger.log(v.Error,"Failed to start the connection: "+r),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(r)}}async _getNegotiationResponse(e){const n={},[r,i]=Kn();n[r]=i;const s=this._resolveNegotiateUrl(e);this._logger.log(v.Debug,`Sending negotiation request: ${s}.`);try{const o=await this._httpClient.post(s,{content:"",headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(o.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${o.statusCode}'`));const a=JSON.parse(o.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Ic("Client didn't negotiate Stateful Reconnect but the server did.")):a}catch(o){let a="Failed to complete negotiation with the server: "+o;return o instanceof ln&&o.statusCode===404&&(a=a+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(v.Error,a),Promise.reject(new Ic(a))}}_createConnectUrl(e,n){return n?e+(e.indexOf("?")===-1?"?":"&")+`id=${n}`:e}async _createTransport(e,n,r,i){let s=this._createConnectUrl(e,r.connectionToken);if(this._isITransport(n)){this._logger.log(v.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=n,await this._startTransport(s,i),this.connectionId=r.connectionId;return}const o=[],a=r.availableTransports||[];let l=r;for(const c of a){const d=this._resolveTransportOrError(c,n,i,(l==null?void 0:l.useStatefulReconnect)===!0);if(d instanceof Error)o.push(`${c.transport} failed:`),o.push(d);else if(this._isITransport(d)){if(this.transport=d,!l){try{l=await this._getNegotiationResponse(e)}catch(g){return Promise.reject(g)}s=this._createConnectUrl(e,l.connectionToken)}try{await this._startTransport(s,i),this.connectionId=l.connectionId;return}catch(g){if(this._logger.log(v.Error,`Failed to start the transport '${c.transport}': ${g}`),l=void 0,o.push(new Ap(`${c.transport} failed: ${g}`,ce[c.transport])),this._connectionState!=="Connecting"){const f="Failed to select transport before stop() was called.";return this._logger.log(v.Debug,f),Promise.reject(new nt(f))}}}}return o.length>0?Promise.reject(new Up(`Unable to connect to the server with any of the available transports. ${o.join(" ")}`,o)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case ce.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new sm(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case ce.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new im(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case ce.LongPolling:return new Rc(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,n){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async r=>{let i=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(e,n),await this.features.resend()}catch{i=!0}else{this._stopConnection(r);return}i&&this._stopConnection(r)}:this.transport.onclose=r=>this._stopConnection(r),this.transport.connect(e,n)}_resolveTransportOrError(e,n,r,i){const s=ce[e.transport];if(s==null)return this._logger.log(v.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(am(n,s))if(e.transferFormats.map(a=>Se[a]).indexOf(r)>=0){if(s===ce.WebSockets&&!this._options.WebSocket||s===ce.ServerSentEvents&&!this._options.EventSource)return this._logger.log(v.Debug,`Skipping transport '${ce[s]}' because it is not supported in your environment.'`),new Dp(`'${ce[s]}' is not supported in your environment.`,s);this._logger.log(v.Debug,`Selecting transport '${ce[s]}'.`);try{return this.features.reconnect=s===ce.WebSockets?i:void 0,this._constructTransport(s)}catch(a){return a}}else return this._logger.log(v.Debug,`Skipping transport '${ce[s]}' because it does not support the requested transfer format '${Se[r]}'.`),new Error(`'${ce[s]}' does not support ${Se[r]}.`);else return this._logger.log(v.Debug,`Skipping transport '${ce[s]}' because it was disabled by the client.`),new Lp(`'${ce[s]}' is disabled by the client.`,s)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(v.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(v.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(v.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(v.Error,`Connection disconnected with error '${e}'.`):this._logger.log(v.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(n=>{this._logger.log(v.Error,`TransportSendQueue.stop() threw error '${n}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(n){this._logger.log(v.Error,`HttpConnection.onclose(${e}) threw error '${n}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!X.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const n=window.document.createElement("a");return n.href=e,this._logger.log(v.Information,`Normalizing '${e}' to '${n.href}'.`),n.href}_resolveNegotiateUrl(e){const n=new URL(e);n.pathname.endsWith("/")?n.pathname+="negotiate":n.pathname+="/negotiate";const r=new URLSearchParams(n.searchParams);return r.has("negotiateVersion")||r.append("negotiateVersion",this._negotiateVersion.toString()),r.has("useStatefulReconnect")?r.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&r.append("useStatefulReconnect","true"),n.search=r.toString(),n.toString()}}function am(t,e){return!t||(e&t)!==0}class Qa{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new ui,this._transportResult=new ui,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new ui),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new ui;const e=this._transportResult;this._transportResult=void 0;const n=typeof this._buffer[0]=="string"?this._buffer.join(""):Qa._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(n),e.resolve()}catch(r){e.reject(r)}}}static _concatBuffers(e){const n=e.map(s=>s.byteLength).reduce((s,o)=>s+o),r=new Uint8Array(n);let i=0;for(const s of e)r.set(new Uint8Array(s),i),i+=s.byteLength;return r.buffer}}class ui{constructor(){this.promise=new Promise((e,n)=>[this._resolver,this._rejecter]=[e,n])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}const lm="json";class cm{constructor(){this.name=lm,this.version=2,this.transferFormat=Se.Text}parseMessages(e,n){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];n===null&&(n=jr.instance);const r=Oe.parse(e),i=[];for(const s of r){const o=JSON.parse(s);if(typeof o.type!="number")throw new Error("Invalid payload.");switch(o.type){case A.Invocation:this._isInvocationMessage(o);break;case A.StreamItem:this._isStreamItemMessage(o);break;case A.Completion:this._isCompletionMessage(o);break;case A.Ping:break;case A.Close:break;case A.Ack:this._isAckMessage(o);break;case A.Sequence:this._isSequenceMessage(o);break;default:n.log(v.Information,"Unknown message type '"+o.type+"' ignored.");continue}i.push(o)}return i}writeMessage(e){return Oe.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,n){if(typeof e!="string"||e==="")throw new Error(n)}}const um={trace:v.Trace,debug:v.Debug,info:v.Information,information:v.Information,warn:v.Warning,warning:v.Warning,error:v.Error,critical:v.Critical,none:v.None};function dm(t){const e=um[t.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${t}`)}class fm{configureLogging(e){if(oe.isRequired(e,"logging"),hm(e))this.logger=e;else if(typeof e=="string"){const n=dm(e);this.logger=new Yi(n)}else this.logger=new Yi(e);return this}withUrl(e,n){return oe.isRequired(e,"url"),oe.isNotEmpty(e,"url"),this.url=e,typeof n=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...n}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:n},this}withHubProtocol(e){return oe.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Pc(e):this.reconnectPolicy=e:this.reconnectPolicy=new Pc,this}withServerTimeout(e){return oe.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return oe.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e==null?void 0:e.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const n=new om(this.url,e);return Ka.create(n,this.logger||jr.instance,this.protocol||new cm,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function hm(t){return t.log!==void 0}const gm=({level:t})=>{const e={Trace:"",Debug:"",Information:"",Warning:"",Error:"",Critical:""};return _.jsx("span",{className:"level-icon",children:e[t]||""})},pm=new URL("/infoforum/logs/IF-Logo.png",import.meta.url).href,mm=({loggerServiceUrl:t})=>{const{auth:e}=ps(),{getAccessToken:n,isAuthenticated:r,initialized:i}=e,{theme:s,setTheme:o}=Np(),{signout:a}=Tp(),[l,c]=D.useState([]),[d,g]=D.useState(!1),[f,m]=D.useState(null),[S,k]=D.useState(""),[j,h]=D.useState(""),[u,p]=D.useState(""),[y,x]=D.useState(null),[C,T]=D.useState(!1),[I,$]=D.useState(!1),[L,le]=D.useState(!1),[Ee,_t]=D.useState(100),Ge=D.useRef(null),wn=async(w,M={})=>{const ee=await fetch(w,{...M,headers:{"Content-Type":"application/json",...M.headers}});if(!ee.ok){const te=await ee.json().catch(()=>({}));throw new Error(te.detail||`HTTP ${ee.status}: ${ee.statusText}`)}return ee.json()},ot=D.useCallback(async()=>{if(!t){console.error("loggerServiceUrl prop is required");return}g(!0),m(null);try{const w=await wn(`${t}/logs?limit=${Ee}`);c(w)}catch(w){m(w.message)}finally{g(!1)}},[t,Ee]);D.useEffect(()=>{r&&i&&t&&(console.log("Auth ready, loading logs from:",t),ot())},[r,i,t,ot]),D.useEffect(()=>{if(!I){Ge.current&&(Ge.current.stop(),Ge.current=null,le(!1));return}return!r||!i||!t?void 0:((async()=>{let M=null;try{M=await n()}catch(te){console.warn("getAccessToken failed for SignalR:",te),m("No token available for real-time connection");return}if(!M){m("No token available for real-time connection");return}const ee=new fm().withUrl(`${t}/loghub`,{accessTokenFactory:()=>M}).withAutomaticReconnect().configureLogging(v.Information).build();Ge.current=ee,ee.on("newlogentry",te=>{console.log("Log hub message received:",te),te._isNew=!0,c(at=>[...at,te].slice(-Ee))}),ee.onreconnecting(()=>{console.log("Reconnecting..."),le(!1)}),ee.onreconnected(()=>{console.log("Reconnected"),le(!0)}),ee.onclose(()=>{console.log("Connection closed"),le(!1)});try{await ee.start(),console.log("Connected to log stream"),le(!0)}catch(te){console.error("Connection error:",te),m("Failed to connect to real-time log stream")}})(),()=>{Ge.current&&Ge.current.stop()})},[I,Ee,n,r,i,t]);const Zt=async()=>{if(t){g(!0),m(null);try{const w=[];S&&w.push({field:"level",operator:"Equals",value:S}),j&&w.push({field:"message",operator:"Contains",value:j});const M=await wn(`${t}/logs/search`,{method:"POST",body:JSON.stringify({filters:w,filterLogic:"And",limit:Ee})});c(M)}catch(w){m(w.message)}finally{g(!1)}}},P=w=>{$(w),w&&ot()},b=w=>{var lt,Ga,Xa,Ya,Za,el,tl,nl,rl,il,sl,ol,al,ll,cl,ul;if(!u)return!0;const M=u.toLowerCase(),ee=((Ga=(lt=w==null?void 0:w.logData)==null?void 0:lt.message)==null?void 0:Ga.toLowerCase())||"",te=((Ya=(Xa=w==null?void 0:w.logData)==null?void 0:Xa.text)==null?void 0:Ya.toLowerCase())||"",at=((el=(Za=w==null?void 0:w.logData)==null?void 0:Za.category)==null?void 0:el.toLowerCase())||"",Ue=((nl=(tl=w==null?void 0:w.logData)==null?void 0:tl.environment)==null?void 0:nl.toLowerCase())||"",vt=((il=(rl=w==null?void 0:w.logData)==null?void 0:rl.application)==null?void 0:il.toLowerCase())||"",Br=((ol=(sl=w==null?void 0:w.logData)==null?void 0:sl.pathname)==null?void 0:ol.toLowerCase())||"",Vr=((ll=(al=w==null?void 0:w.logData)==null?void 0:al.machineName)==null?void 0:ll.toLowerCase())||"",bt=((ul=(cl=w==null?void 0:w.logData)==null?void 0:cl.host)==null?void 0:ul.toLowerCase())||"";return ee.includes(M)||te.includes(M)||at.includes(M)||Ue.includes(M)||vt.includes(M)||Br.includes(M)||Vr.includes(M)||bt.includes(M)},U=w=>{switch(w==null?void 0:w.toLowerCase()){case"production":return"badge-production";case"uat":return"badge-uat";case"sit":return"badge-sit";default:return"badge-default"}};return _.jsxs("div",{className:"app-container",children:[_.jsxs("header",{className:"app-header",children:[_.jsxs("div",{className:"header-left",children:[_.jsx("img",{src:pm,alt:"IF",className:"if-logo"}),_.jsx("h1",{className:"app-title",children:"IF Log Viewer"}),_.jsx("span",{className:"version-label",children:"v1.0"})]}),_.jsxs("div",{className:"header-center",children:[_.jsxs("select",{onChange:w=>k(w.target.value),disabled:I,className:"filter-select",children:[_.jsx("option",{value:"",children:"All Levels"}),_.jsx("option",{value:"Trace",children:"Trace"}),_.jsx("option",{value:"Debug",children:"Debug"}),_.jsx("option",{value:"Information",children:"Information"}),_.jsx("option",{value:"Warning",children:"Warning"}),_.jsx("option",{value:"Error",children:"Error"}),_.jsx("option",{value:"Critical",children:"Critical"})]}),_.jsx("input",{type:"text",value:j,onChange:w=>h(w.target.value),placeholder:"Message...",disabled:I,className:"filter-input"}),_.jsx("button",{onClick:Zt,disabled:I,className:"btn-primary",children:"Search"}),_.jsx("button",{onClick:ot,disabled:I,className:"btn-secondary",children:"Clear"})]}),_.jsxs("div",{className:"header-right",children:[_.jsx("select",{value:Ee,onChange:w=>_t(parseInt(w.target.value)),disabled:I,className:"theme-select",children:[25,50,75,100,125,150,175,200,225,250,275,300,325,350,375,400,425,450,475,500].map(w=>_.jsx("option",{value:w,children:w},w))}),_.jsxs("select",{value:s,onChange:w=>o(w.target.value),className:"theme-select",children:[_.jsx("option",{value:"light",children:"Light"}),_.jsx("option",{value:"dark",children:"Dark"})]}),_.jsx("button",{onClick:a,className:"btn-warning",children:"Sign Out"})]})]}),_.jsx("div",{className:"main-content",children:_.jsxs("div",{className:"results-panel",children:[_.jsxs("div",{className:"filter-row",children:[_.jsxs("div",{className:"filter-row-left",children:[_.jsx("button",{onClick:()=>P(!I),className:`toggle-switch ${I?"toggle-switch-active":""}`,children:_.jsx("span",{className:"toggle-switch-knob"})}),_.jsx("span",{children:"Live"}),I&&_.jsx("span",{className:L?"status-connected":"status-disconnected",children:L?"":""})]}),_.jsx("div",{className:"filter-row-center",children:_.jsx("input",{type:"text",value:u,onChange:w=>p(w.target.value),placeholder:"Filter Results...",className:"search-input"})}),_.jsx("div",{className:"filter-row-right",children:_.jsxs("span",{className:"results-count",children:[l.filter(b).length," log",l.filter(b).length===1?"":"s"]})})]}),f&&_.jsx("div",{className:"error-message",children:f}),d&&_.jsx("div",{className:"loading-message",children:"Loading..."}),!d&&l.length===0&&_.jsx("div",{className:"empty-message",children:I&&L?"Waiting for logs...":"No logs found"}),!d&&l.length>0&&_.jsx(_.Fragment,{children:_.jsx("div",{className:"table-container",children:_.jsxs("table",{className:"log-table",children:[_.jsx("thead",{children:_.jsxs("tr",{className:"table-header-row",children:[_.jsx("th",{className:"table-header-cell"}),_.jsx("th",{className:"table-header-cell",children:"ID"}),_.jsx("th",{className:"table-header-cell",children:"Level"}),_.jsx("th",{className:"table-header-cell",children:"Attributes"}),_.jsx("th",{className:"table-header-cell",children:"Message"}),_.jsx("th",{className:"table-header-cell",children:"Created"})]})}),_.jsx("tbody",{children:l.map(w=>{var M,ee,te,at,Ue,vt,Br,Vr;return b(w)?_.jsxs(N.Fragment,{children:[_.jsxs("tr",{className:`table-row ${y===w.idx?"table-row-focused":""} ${w._isNew?"animate-new-log":""}`,onClick:()=>x(bt=>bt===w.idx?null:w.idx),children:[_.jsx("td",{className:"table-cell-icon",children:y===w.idx?"":""}),_.jsx("td",{className:"table-cell",children:w.idx}),_.jsx("td",{className:"table-cell",children:_.jsx(gm,{level:(M=w.logData)==null?void 0:M.level})}),_.jsx("td",{className:"table-cell",children:_.jsxs("div",{className:"badge-container",children:[((ee=w.logData)==null?void 0:ee.environment)&&_.jsx("span",{className:`badge ${U(w.logData.environment)}`,children:w.logData.environment}),((te=w.logData)==null?void 0:te.application)&&_.jsx("span",{className:"badge badge-application",children:w.logData.application}),(((at=w.logData)==null?void 0:at.machineName)||((Ue=w.logData)==null?void 0:Ue.host))&&_.jsx("span",{className:"badge badge-machine",children:w.logData.machineName||w.logData.host}),((vt=w.logData)==null?void 0:vt.pathname)&&_.jsx("span",{className:"badge badge-pathname",children:w.logData.pathname}),((Br=w.logData)==null?void 0:Br.category)&&_.jsx("span",{className:"badge badge-category",children:w.logData.category})]})}),_.jsx("td",{className:"table-cell",children:((Vr=w.logData)==null?void 0:Vr.message)||""}),_.jsxs("td",{className:"table-cell-date",children:[new Date(w.createdAt).toLocaleDateString()," ",new Date(w.createdAt).toLocaleTimeString()]})]}),y===w.idx&&_.jsx("tr",{children:_.jsx("td",{colSpan:6,children:_.jsxs("div",{className:"detail-panel",children:[_.jsx("div",{className:"detail-actions",children:_.jsx("button",{onClick:bt=>{bt.stopPropagation();const lt=JSON.stringify(w.logData,null,2);navigator.clipboard.writeText(lt),T(!0),setTimeout(()=>T(!1),2e3)},className:`btn-copy ${C?"btn-copy-success":""}`,children:C?"Copied!":"Copy"})}),_.jsx("div",{className:"detail-grid",children:typeof w.logData=="string"?_.jsx("div",{className:"detail-value",children:w.logData}):Object.entries(w.logData||{}).map(([bt,lt])=>_.jsxs("div",{className:"detail-row",children:[_.jsxs("span",{className:"detail-key",children:[bt,":"]}),_.jsx("span",{className:"detail-value",children:lt==null?_.jsx("span",{className:"detail-null",children:"null"}):typeof lt=="object"?JSON.stringify(lt,null,2):String(lt)})]},bt))})]})})})]},w.idx):null})})]})})})]})})]})},_m=t=>{const e=()=>t.createLogger("BrowserConsoleTest");window.IFDebug={trace:(n="Test trace message")=>{e().trace(n),console.log("Trace sent:",n)},debug:(n="Test debug message")=>{e().debug(n),console.log("Debug sent:",n)},info:(n="Test info message")=>{e().info(n),console.log("Info sent:",n)},warn:(n="Test warning message")=>{e().warn(n),console.log("Warning sent:",n)},error:(n="Test error message")=>{e().error(n,new Error("Test exception")),console.log("Error sent:",n)},critical:(n="Test critical message")=>{e().critical(n,new Error("Critical test exception")),console.log("Critical sent:",n)},testAll:()=>{console.log("Sending all log levels..."),window.IFDebug.trace(),window.IFDebug.debug(),window.IFDebug.info(),window.IFDebug.warn(),window.IFDebug.error(),window.IFDebug.critical(),console.log("All log levels sent!")},getConfig:()=>({loggerService:t.config.loggerService,logLevel:t.config.logLevel,clientId:t.config.clientId,isInitialized:t.config.isInitialized}),getAuth:()=>({isAuthenticated:t.auth.isAuthenticated,initialized:t.auth.initialized,user:t.auth.user})},console.log("IFDebug available: trace, debug, info, warn, error, critical, testAll, getConfig, getAuth")};function vm(){const t=ps(),{config:e}=t;return D.useEffect(()=>{_m(t)},[t]),_.jsx(bp,{children:_.jsx(mm,{loggerServiceUrl:e.loggerService})})}const wm=()=>{const{createLogger:t}=ps(),e=(s,o)=>{const a=t("LogViewerTests");switch(s){case"trace":a.trace(o);break;case"debug":a.debug(o);break;case"info":a.info(o);break;case"warn":a.warn(o);break;case"error":a.error(o,new Error("Test error"));break;case"critical":a.critical(o,new Error("Test critical"));break}},n=async(s,o)=>{{console.error("VITE_LOG_SERVICE_URL not configured");return}},r=s=>({padding:"16px 32px",fontSize:"18px",fontWeight:"bold",color:"white",backgroundColor:s,border:"none",borderRadius:"8px",cursor:"pointer",minWidth:"150px"}),i={marginBottom:"48px",padding:"24px",backgroundColor:"#f9fafb",borderRadius:"12px"};return _.jsxs("div",{style:{padding:"40px",fontFamily:"system-ui, sans-serif",maxWidth:"900px",margin:"0 auto"},children:[_.jsx("h1",{style:{marginBottom:"8px"},children:"Log Viewer Tests"}),_.jsx("p",{style:{color:"#666",marginBottom:"32px"},children:"Click buttons to send log entries to the logging service"}),_.jsxs("div",{style:i,children:[_.jsx("h2",{style:{marginTop:0,marginBottom:"16px",color:"#1f2937"},children:"Log Viewer (Browser)"}),_.jsx("p",{style:{color:"#6b7280",marginBottom:"20px",fontSize:"14px"},children:"Simulates logs from React/browser applications"}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"16px"},children:[_.jsx("button",{style:r("#9CA3AF"),onClick:()=>e("trace","Trace level message"),children:"Trace"}),_.jsx("button",{style:r("#6B7280"),onClick:()=>e("debug","Debug level message"),children:"Debug"}),_.jsx("button",{style:r("#3B82F6"),onClick:()=>e("info","Information level message"),children:"Information"}),_.jsx("button",{style:r("#F59E0B"),onClick:()=>e("warn","Warning level message"),children:"Warning"}),_.jsx("button",{style:r("#EF4444"),onClick:()=>e("error","Error level message"),children:"Error"}),_.jsx("button",{style:r("#7C3AED"),onClick:()=>e("critical","Critical level message"),children:"Critical"})]}),_.jsx("button",{style:{...r("#10B981"),width:"100%",padding:"16px"},onClick:()=>{e("trace","Trace level message"),e("debug","Debug level message"),e("info","Information level message"),e("warn","Warning level message"),e("error","Error level message"),e("critical","Critical level message")},children:"Send All Frontend Levels"})]}),_.jsxs("div",{style:i,children:[_.jsx("h2",{style:{marginTop:0,marginBottom:"16px",color:"#1f2937"},children:"Logger Web Service (Server)"}),_.jsx("p",{style:{color:"#6b7280",marginBottom:"20px",fontSize:"14px"},children:"Simulates logs from .NET backend services"}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"16px"},children:[_.jsx("button",{style:r("#9CA3AF"),onClick:()=>n(),children:"Trace"}),_.jsx("button",{style:r("#6B7280"),onClick:()=>n(),children:"Debug"}),_.jsx("button",{style:r("#3B82F6"),onClick:()=>n(),children:"Information"}),_.jsx("button",{style:r("#F59E0B"),onClick:()=>n(),children:"Warning"}),_.jsx("button",{style:r("#EF4444"),onClick:()=>n(),children:"Error"}),_.jsx("button",{style:r("#7C3AED"),onClick:()=>n(),children:"Critical"})]}),_.jsx("button",{style:{...r("#0EA5E9"),width:"100%",padding:"16px"},onClick:()=>{n(),n(),n(),n(),n(),n()},children:"Send All Backend Levels"})]})]})};function ym(){const e=window.location.pathname.match(/^\/([^/]+)\/logs/i);if(e){const[,n]=e;return["signin","signout","silent-callback","callback","api","config"].includes(n.toLowerCase())?null:{appDomain:n}}return null}function Ja(t){return`/${t.appDomain}/logs`}function Qs(t,e){const n=window.location.origin,r=Ja(t);return e?`${n}${r}/${e}`:`${n}${r}`}const yt=ym(),bc="/config",Sm=yt?Ja(yt):"",km=window.location.pathname,Em=km===`${Sm}/tests`,Dc=Vd(document.getElementById("root"));yt?(console.log("URL Config:",yt),console.log("Config Service URL:",bc),Dc.render(_.jsx(D.StrictMode,{children:_.jsx(Rp,{appType:"user",dynamicConfig:{configServiceUrl:bc,appDomain:yt.appDomain,redirectUri:Qs(yt,"signin/callback"),postLogoutRedirectUri:Qs(yt,"signout/callback"),silentRedirectUri:Qs(yt,"silent-callback"),basePath:Ja(yt)},loadingComponent:_.jsx("div",{className:"loading-message",children:"Loading..."}),errorComponent:t=>_.jsxs("div",{className:"error-message",children:["Error: ",t]}),redirectingComponent:_.jsx("div",{className:"loading-message",children:"Redirecting to login..."}),children:Em?_.jsx(wm,{}):_.jsx(vm,{})})}))):Dc.render(_.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-white border border-gray-300 p-8 rounded-lg shadow-lg max-w-2xl",children:[_.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Configuration Required"}),_.jsx("p",{className:"text-gray-700 mb-4",children:"This application requires an application domain in the URL."}),_.jsxs("div",{className:"bg-gray-50 p-4 rounded border border-gray-200 mb-4",children:[_.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Expected URL format:"}),_.jsxs("code",{className:"text-sm text-blue-600 break-all",children:[window.location.origin,"/",_.jsx("span",{className:"text-green-600",children:"{appDomain}"}),"/logs/"]})]}),_.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Example:"}),_.jsxs("code",{className:"text-sm text-blue-600 break-all block bg-gray-50 p-2 rounded",children:[window.location.origin,"/infoforum/logs/"]}),_.jsxs("div",{className:"mt-6 text-xs text-gray-500",children:["Current path: ",_.jsx("code",{className:"bg-gray-100 px-1",children:window.location.pathname})]})]})}));
